{
  "predicates": [{
    "equals": {
      "method": "POST",
      "path": "/api/infrastructure-monitoring/analyze/entity-types",
      "query": {
        "q": "jvm"
      }
    }
  }, {
    "contains": { "body": "tagFilterExpression" }
  }],
  "responses": [{
    "is": {
      "statusCode": 200,
      "headers": {
        "Content-Type": "application/json;charset=utf-8",
        "Access-Control-Allow-Origin": "*",
        "Access-Control-Allow-Methods": "GET, POST, PUT, PATCH, DELETE"
      },
      "body": "{ \"plugins\": [\"jvmRuntimePlatform\", \"dropwizardApplicationContainer\",\"elasticsearchNode\",\"hazelcastNode\", \"springbootApplicationContainer\", \"tomcatApplicationContainer\" ]}"
    }
  }]
},
{
  "predicates": [{
    "equals": {
      "method": "POST",
      "path": "/api/infrastructure-monitoring/analyze/entity-types"
    }
  }, {
    "contains": { "body": "tagFilterExpression" }
  }],
  "responses": [{
    "is": {
      "statusCode": 200,
      "headers": {
        "Content-Type": "application/json;charset=utf-8",
        "Access-Control-Allow-Origin": "*",
        "Access-Control-Allow-Methods": "GET, POST, PUT, PATCH, DELETE"
      },
      "body": "[]"
    }
  }]
},
{
  "predicates": [{
    "equals": {
      "method": "GET",
      "path": "/api/infrastructure-monitoring/catalog/plugins"
    }
  }],
  "responses": [{
    "is": {
      "statusCode": 200,
      "headers": {
        "Content-Type": "application/json;charset=utf-8",
        "Access-Control-Allow-Origin": "*",
        "Access-Control-Allow-Methods": "GET, POST, PUT, PATCH, DELETE"
      },
      "body": "[{\"plugin\": \"host\", \"label\": \"Host\"}, {\"plugin\": \"process\", \"label\": \"Process\"}, {\"plugin\": \"awsEc\", \"label\": \"AWS ElastiCache instance\"}, {\"plugin\": \"hadoopYARN\", \"label\": \"Hadoop YARN\"}, {\"plugin\": \"dropwizardApplicationContainer\", \"label\": \"Dropwizard\"}, {\"plugin\": \"jvmRuntimePlatform\", \"label\": \"JVM\"}]"
    }
  }]
},
{
  "predicates": [{
    "equals": {
      "method": "GET",
      "path": "/api/infrastructure-monitoring/catalog/metrics/process",
      "query": {
        "filter": "builtin"
      }
    }
  }],
  "responses": [{
    "is": {
      "statusCode": 200,
      "headers": {
        "Content-Type": "application/json;charset=utf-8",
        "Access-Control-Allow-Origin": "*",
        "Access-Control-Allow-Methods": "GET, POST, PUT, PATCH, DELETE"
      },
      "body": "[{\"formatter\": \"NUMBER\",\"label\": \"Virtual\",\"description\": \"Virtual\",\"metricId\": \"mem.virtual\",\"pluginId\": \"process\"}, {\"formatter\": \"NUMBER\",\"label\": \"CPU\",\"description\": \"CPU\",\"metricId\": \"cpu.user\",\"pluginId\": \"process\"}, {\"formatter\": \"NUMBER\",\"label\": \"CPU\",\"description\": \"CPU\",\"metricId\": \"cpu.sys\",\"pluginId\": \"process\"}]"
    }
  }]
},
{
  "predicates": [{
    "equals": {
      "method": "GET",
      "path": "/api/infrastructure-monitoring/catalog/metrics/dropwizardApplicationContainer",
      "query": {
        "filter": "custom"
      }
    }
  }],
  "responses": [{
    "is": {
      "statusCode": 200,
      "headers": {
        "Content-Type": "application/json;charset=utf-8",
        "Access-Control-Allow-Origin": "*",
        "Access-Control-Allow-Methods": "GET, POST, PUT, PATCH, DELETE"
      },
      "body": "[{\"formatter\": \"NUMBER\",\"label\": \"Dropwizard meter service.errors\",\"description\": \"Dropwizard meter\",\"metricId\": \"service.errors\",\"pluginId\": \"dropwizardApplicationContainer\"},{\"formatter\": \"NUMBER\",\"label\": \"Dropwizard meter KPI.errors\",\"description\": \"Dropwizard meter\",\"metricId\": \"KPI.errors\",\"pluginId\": \"dropwizardApplicationContainer\"},{\"formatter\": \"MILLIS\",\"label\": \"Dropwizard timer (99th)\",\"description\":\"Dropwizard timer, 99th percentile\",\"metricId\": \"KPI.time.99th\",\"pluginId\": \"dropwizardApplicationContainer\"}]"
    }
  }]
},
{
  "predicates": [{
    "equals": {
      "method": "GET",
      "path": "/api/infrastructure-monitoring/catalog/metrics/jvmRuntimePlatform"
    }
  }],
  "responses": [{
    "is": {
      "statusCode": 200,
      "headers": {
        "Content-Type": "application/json;charset=utf-8",
        "Access-Control-Allow-Origin": "*",
        "Access-Control-Allow-Methods": "GET, POST, PUT, PATCH, DELETE"
      },
      "body": "[{\"formatter\":\"BYTES\", \"label\":\"Memory Free\", \"description\":\"Free memory in bytes\", \"metricId\":\"memory.free\", \"pluginId\":\"jvmRuntimePlatform\"}, {\"formatter\":\"BYTES\", \"label\":\"Memory Used\", \"description\":\"Used memory in bytes\", \"metricId\":\"memory.used\", \"pluginId\":\"jvmRuntimePlatform\"}]"
    }
  }]
},
{
  "predicates": [{
    "equals": {
      "method": "GET",
      "path": "/api/infrastructure-monitoring/snapshots",
      "query": {
        "q": "filler AND entity.pluginId:process"
      }
    }
  }],
  "responses": [{
    "is": {
      "statusCode": 200,
      "headers": {
        "Content-Type": "application/json;charset=utf-8",
        "Access-Control-Allow-Origin": "*",
        "Access-Control-Allow-Methods": "GET, POST, PUT, PATCH, DELETE"
      },
      "body": "[\"kBfqGyrfEXvUcwix_fL97vYegx0\",\"kBfqGyrfEXvUcwix_fL97vYegx1\"]"
    }
  }]
},
{
  "predicates": [{
    "equals": {
      "method": "GET",
      "path": "/api/infrastructure-monitoring/snapshots",
      "query": {
        "q": "filler AND entity.pluginId:dropwizardApplicationContainer"
      }
    }
  }],
  "responses": [{
    "is": {
      "statusCode": 200,
      "headers": {
        "Content-Type": "application/json;charset=utf-8",
        "Access-Control-Allow-Origin": "*",
        "Access-Control-Allow-Methods": "GET, POST, PUT, PATCH, DELETE"
      },
      "body": "[\"0DtgUvTuwiV_OGCK0_GGuC3fBaw\"]"
    }
  }]
},
{
  "predicates": [{
    "equals": {
      "method": "GET",
      "path": "/api/infrastructure-monitoring/snapshots?plugin=*&size=<value>&query=<query>",
      "query": {
        "q": "filler AND entity.pluginId:process"
      }
    }
  }],
  "responses": [{
    "is": {
      "statusCode": 200,
      "headers": {
        "Content-Type": "application/json;charset=utf-8",
        "Access-Control-Allow-Origin": "*",
        "Access-Control-Allow-Methods": "GET, POST, PUT, PATCH, DELETE"
      },
      "body": "{ \"items\": [{\"snapshotId\":\"kBfqGyrfEXvUcwix_fL97vYegx0\",\"plugin\":\"plugin-1\",\"from\":\"1698788697000\",\"to\": \"null\",\"tags\": [],\"label\":\"label-1\",\"host\":\"host-1\"}, {\"snapshotId\":\"kBfqGyrfEXvUcwix_fL97vYegx1\",\"plugin\":\"plugin-2\",\"from\":\"1698788698000\",\"to\": \"null\",\"tags\": [],\"label\":\"label-2\",\"host\":\"host-2\"}] }"
    }
  }]
},
{
  "predicates": [{
    "equals": {
      "method": "GET",
      "path": "/api/infrastructure-monitoring/snapshots?plugin=*&size=<value>&query=<query>",
      "query": {
        "q": "filler AND entity.pluginId:dropwizardApplicationContainer"
      }
    }
  }],
  "responses": [{
    "is": {
      "statusCode": 200,
      "headers": {
        "Content-Type": "application/json;charset=utf-8",
        "Access-Control-Allow-Origin": "*",
        "Access-Control-Allow-Methods": "GET, POST, PUT, PATCH, DELETE"
      },
      "body": "{ \"items\": [{\"snapshotId\":\"0DtgUvTuwiV_OGCK0_GGuC3fBaw\",\"plugin\":\"plugin-3\",\"from\":\"1698829676000\",\"to\": \"null\",\"tags\": [],\"label\":\"label-1\",\"host\":\"host-3\"}]}"
    }
  }]
},
{
  "predicates": [{
    "equals": {
      "method": "GET",
      "path": "/api/infrastructure-monitoring/snapshots/kBfqGyrfEXvUcwix_fL97vYegx0"
    }
  }],
  "responses": [{
    "is": {
      "statusCode": 200,
      "headers": {
        "Content-Type": "application/json;charset=utf-8",
        "Access-Control-Allow-Origin": "*",
        "Access-Control-Allow-Methods": "GET, POST, PUT, PATCH, DELETE"
      },
      "body": "{\"id\": \"kBfqGyrfEXvUcwix_fL97vYegx1\",\"plugin\": \"process\",\"from\": 1516294054000,\"to\": 1516610096000,\"tags\": [],\"label\": \"node\",\"entityId\": {\"host\": \"0e:36:2c:ff:fe:a1:77:25\",\"pluginId\": \"com.instana.forge.infrastructure.os.process.Process\",\"steadyId\": \"30978\"}}"
    }
  }]
},
{
  "predicates": [{
    "equals": {
      "method": "GET",
      "path": "/api/infrastructure-monitoring/snapshots/kBfqGyrfEXvUcwix_fL97vYegx1"
    }
  }],
  "responses": [{
    "is": {
      "statusCode": 200,
      "headers": {
        "Content-Type": "application/json;charset=utf-8",
        "Access-Control-Allow-Origin": "*",
        "Access-Control-Allow-Methods": "GET, POST, PUT, PATCH, DELETE"
      },
      "body": "{\"id\": \"kBfqGyrfEXvUcwix_fL97vYegx1\",\"plugin\": \"process\",\"from\": 1516294054000,\"to\": 1516610096000,\"tags\": [],\"label\": \"node\",\"entityId\": {\"host\": \"0e:36:2c:ff:fe:a1:77:25\",\"pluginId\": \"com.instana.forge.infrastructure.os.process.Process\",\"steadyId\": \"30978\"}}"
    }
  }]
},
{
  "predicates": [{
    "equals": {
      "method": "GET",
      "path": "/api/infrastructure-monitoring/snapshots/0DtgUvTuwiV_OGCK0_GGuC3fBaw"
    }
  }],
  "responses": [{
    "is": {
      "statusCode": 200,
      "headers": {
        "Content-Type": "application/json;charset=utf-8",
        "Access-Control-Allow-Origin": "*",
        "Access-Control-Allow-Methods": "GET, POST, PUT, PATCH, DELETE"
      },
      "body": "{\"id\": \"0DtgUvTuwiV_OGCK0_GGuC3fBaw\",\"plugin\": \"dropwizardApplicationContainer\",\"data\":{\"pid\":\"29042\"},\"from\": 1516294054000,\"to\": 1516610096000,\"tags\": [],\"label\": \"node\",\"entityId\": {\"host\": \"0e:36:2c:ff:fe:a1:77:25\",\"pluginId\": \"dropwizardApplicationContainer\",\"steadyId\": \"30978\"}}"
    }
  }]
},
{
  "predicates": [{
    "equals": {
      "method": "POST",
      "path": "/api/infrastructure-monitoring/metrics",
      "query": {
        "metric": "mem.virtual",
        "snapshotId": "kBfqGyrfEXvUcwix_fL97vYegx0"
      }
    }
  }],
  "responses": [{
    "inject": "<%- stringify(filename, 'metrics_factory_1.ejs') %>"
  }]
},
{
  "predicates": [{
    "equals": {
      "method": "POST",
      "path": "/api/infrastructure-monitoring/metrics",
      "query": {
        "metric": "mem.virtual",
        "snapshotId": "kBfqGyrfEXvUcwix_fL97vYegx1"
      }
    }
  }],
  "responses": [{
    "inject": "<%- stringify(filename, 'metrics_factory_2.ejs') %>"
  }]
},
{
  "predicates": [{
    "equals": {
      "method": "POST",
      "path": "/api/infrastructure-monitoring/metrics",
      "query": {
        "metric": "KPI.errors",
        "snapshotId": "0DtgUvTuwiV_OGCK0_GGuC3fBaw"
      }
    }
  }],
  "responses": [{
    "inject": "<%- stringify(filename, 'metrics_factory_3.ejs') %>"
  }]
},
{
  "predicates": [{
    "equals": {
      "method": "POST",
      "path": "/api/infrastructure-monitoring/analyze/entity-groups"
    }
  },{
    "contains": { "body": "tagFilterExpression" }
  }],
  "responses": [{
    "inject": "<%- stringify(filename, 'infraExplore_response.ejs') %>"
  }]
},
