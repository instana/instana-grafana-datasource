{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"react\"","webpack:///external \"lodash\"","webpack:///external \"@grafana/ui\"","webpack:///external \"@grafana/data\"","webpack:///./components/plugin.css?ac86","webpack:///../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack:///../node_modules/css-loader/dist/runtime/api.js","webpack:///external \"@grafana/runtime\"","webpack:///./components/plugin.css","webpack:///./instana-grafana.css?3c02","webpack:///./instana-grafana.css","webpack:///./components/ApplicationServiceEndpointMetrics/ApplicationBoundaryScope.css?0b42","webpack:///./components/ApplicationServiceEndpointMetrics/ApplicationBoundaryScope.css","webpack:///../node_modules/tslib/tslib.es6.js","webpack:///./GlobalVariables.ts","webpack:///./util/delta_util.ts","webpack:///./lists/granularities.ts","webpack:///./util/time_util.ts","webpack:///./lists/rollups.ts","webpack:///./util/rollup_granularity_util.ts","webpack:///./util/request_handler.ts","webpack:///./cache.ts","webpack:///./util/analyze_util.ts","webpack:///./util/target_util.ts","webpack:///./lists/default_metric_catalog.ts","webpack:///./util/queryInterval_check.ts","webpack:///./util/instana_version.ts","webpack:///./datasources/DataSource_Application.ts","webpack:///./datasources/DataSource_Endpoint.ts","webpack:///./lists/max_metrics.ts","webpack:///./datasources/Datasource_Infrastructure.ts","webpack:///./datasources/DataSource_MobileApp.ts","webpack:///./datasources/DataSource_Service.ts","webpack:///./datasources/DataSource_Slo.ts","webpack:///./datasources/DataSource_Slo2.ts","webpack:///./datasources/DataSource_Website.ts","webpack:///./datasources/DataSource_SyntheticMonitoring.ts","webpack:///./lists/metric_categories.ts","webpack:///./util/aggregation_util.ts","webpack:///./migration.ts","webpack:///./datasources/DataSource.ts","webpack:///./util/proxy_check.ts","webpack:///./components/ConfigEditor.tsx","webpack:///./components/FormField/FormWrapper.tsx","webpack:///./components/FormField/FormSwitch.tsx","webpack:///./components/Infrastructure/Custom/FreeTextMetrics.tsx","webpack:///./lists/aggregation_function.ts","webpack:///./components/AdvancedSettings/AggregateQuery.tsx","webpack:///./components/FormField/FormInput.tsx","webpack:///./components/AdvancedSettings/AdvancedSettings.tsx","webpack:///./lists/apply_call_to_entities.ts","webpack:///./components/Entity/Entity.tsx","webpack:///./components/Analyze/ApplicationCallsMetrics.tsx","webpack:///./components/ApplicationServiceEndpointMetrics/ApplicationBoundaryScope.tsx","webpack:///./components/ApplicationServiceEndpointMetrics/ApplicationServiceEndpointMetrics.tsx","webpack:///./components/Infrastructure/Explore.tsx","webpack:///./lists/operators.ts","webpack:///./components/FormField/FormTextArea.tsx","webpack:///./components/Analyze/Filter.tsx","webpack:///./components/FormField/FormSelect.tsx","webpack:///./components/Infrastructure/QueryType.tsx","webpack:///./components/Infrastructure/Infrastructure.tsx","webpack:///./components/Metric/Metric.tsx","webpack:///./components/Infrastructure/Custom/MetricFilter.tsx","webpack:///./lists/beacon_types_mobile_app.ts","webpack:///./components/Analyze/MobileAppMetrics.tsx","webpack:///./lists/slo_specifics.ts","webpack:///./components/SLOInformation/SloInformation.tsx","webpack:///./lists/slo2_specifics.ts","webpack:///./components/SLOInformation/Slo2Information.tsx","webpack:///./lists/beacon_types_website.ts","webpack:///./components/Analyze/WebsiteMetrics.tsx","webpack:///./components/SyntheticMonitoring/SyntheticMonitoring.tsx","webpack:///./components/QueryEditor.tsx","webpack:///./module.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","__WEBPACK_EXTERNAL_MODULE__0__","__WEBPACK_EXTERNAL_MODULE__1__","__WEBPACK_EXTERNAL_MODULE__2__","__WEBPACK_EXTERNAL_MODULE__3__","api","content","default","options","exported","locals","memo","isOldIE","Boolean","window","document","all","atob","getTarget","target","styleTarget","querySelector","HTMLIFrameElement","contentDocument","head","e","stylesInDom","getIndexByIdentifier","identifier","result","length","modulesToDom","list","idCountMap","identifiers","item","id","base","count","concat","index","obj","css","media","sourceMap","references","updater","push","addStyle","insertStyleElement","style","createElement","attributes","nonce","keys","forEach","setAttribute","insert","Error","appendChild","textStore","replaceText","replacement","filter","join","applyToSingletonTag","remove","styleSheet","cssText","cssNode","createTextNode","childNodes","removeChild","insertBefore","applyToTag","removeAttribute","btoa","unescape","encodeURIComponent","JSON","stringify","firstChild","singleton","singletonCounter","update","styleIndex","parentNode","removeStyleElement","newObj","lastIdentifiers","newList","toString","newLastIdentifiers","_i","_index","splice","useSourceMap","this","map","cssMapping","sourceMapping","base64","data","sourceURLs","sources","source","sourceRoot","cssWithMappingToString","mediaQuery","dedupe","alreadyImportedModules","__WEBPACK_EXTERNAL_MODULE__7__","___CSS_LOADER_API_IMPORT___","extendStatics","b","setPrototypeOf","__proto__","Array","__extends","TypeError","String","__","constructor","__assign","assign","arguments","apply","__rest","indexOf","getOwnPropertySymbols","propertyIsEnumerable","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","rejected","done","then","__generator","body","f","y","g","_","label","sent","trys","ops","verb","iterator","v","op","pop","__read","ar","error","__spreadArray","to","from","pack","slice","ALL_APPLICATIONS","ALL_ENDPOINTS","omitLabels","readTime","time","Date","valueOf","getTime","windowSize","getWindowSize","timeFilter","getTimeKey","msToMin","hoursToMs","hours","atLeastGranularity","granularity","granularityInMs","availableFor","rollup","getDefaultChartGranularity","getPossibleGranularities","maxValues","possibleGranularities","granularities","getDefaultMetricRollupDuration","getPossibleRollups","now","possibleRollups","rollups","rollupDefinition","rollUp","getRequest","endpoint","swallowError","maxRetries","doRequest","method","url","postRequest","request","datasourceRequest","status","errors","includes","setTimeout","statusText","store","put","ttl","undefined","del","expiry","timeout","clearTimeout","createTagFilter","tagFilter","tag","operator","stringValue","type","numberValue","booleanValue","readItemMetrics","response","getLabel","flatten","items","metrics","datapoints","metric","refId","stableHash","emptyResultData","buildTimeSeries","description","aggregations","isInvalidQueryInterval","queryIntervalLimit","versionCache","getVersion","cachedVersion","imageTag","majorVersion","parseInt","split","instanaOptions","applicationsCache","miscCache","runQuery","queryinterval_limit_app_calls","group","fetchAnalyzeMetricsForApplication","showWarningCantShowAllResults","canLoadMore","buildAnalyzeApplicationLabel","getApplications","applications","paginateApplications","allResults","flattenDeep","pageSet","orderBy","compact","entry","boundaryScope","application","results","page","pageSize","pageLimit","queryParameters","totalHits","getApplicationTags","applicationTags","version","getCatalog","catalog","mapCatalogResponse","tags","getCatalogFromDeprecatedEndpoint","tagsResponse","canApplyToSource","canApplyToDestination","getApplicationMetricsCatalog","tagFilters","entity","applicationCallToEntity","filters","isValid","find","getTagEntity","timeInterval","aggregation","groupbyTag","callToEntity","groupbyTagSecondLevelKey","includeSynthetic","timeFrame","tagFilterExpression","logicalOperator","elements","selectedEntity","fetchApplicationMetrics","applicationBoundaryScope","labelFormat","replace","timeShift","timeShiftIsValid","buildApplicationMetricLabel","endpointsCache","getEndpointsOfService","applicationId","serviceId","service","endpoints","paginateEndpoints","fetchEndpointMetrics","endpointId","buildEndpointMetricLabel","timeToLiveSnapshotInfoCache","snapshotCache","snapshotInfoCache","catalogCache","typeCache","queryinterval_limit_infra","metricCategory","fetchAnalyzeEntities","showAllMetrics","freeTextMetrics","fetchSnapshotsForTarget","snapshots","fetchMultipleMetricsForSnapshots","allMetrics","extractMetricsFromText","fetchMetricsForSnapshots","freeText","metricsString","each","metricString","parse","resultPromises","batchPromises","chunk","batch","batchIndex","fetchMetricsForSnapshot","timeseries","readTimeSeries","snapshot","pid","buildLabel","entityId","host","displayMaxMetricValue","maxValue","getMaxMetricValue","buildMaxMetricTarget","convertRelativeToAbsolute","maxMetrics","max_metrics","resultLabel","series","timestamp","maxLabel","convertMetricNameToMaxLabel","datapoint","getEntityTypes","entityTypes","typesResponse","plugin","sortBy","fetchTypesForTarget","query","fetchSnapshotTypesUrl","entityQuery","showOffline","fetchAvailableMetricsForEntityType","metricResponse","crossSeriesAggregation","payload","pagination","retrievalSize","groupBy","res","message","getMetricsCatalog","catalogResponse","metricId","entityType","pluginId","buildQuery","buildSnapshotCacheKey","fetchSnapshotContextsUrl","contextsResponse","snapshotIds","snapshotsResponse","snapshotId","reduceSnapshot","snapshotResponse","pick","values","correctMeanToSum","secondMultiplier","getHostSuffix","MobileAppCache","queryinterval_limit_mobileapp_metrics","fetchAnalyzeMetricsForMobileapp","buildAnalyzeMobileAppLabel","getMobileapp","mobileapps","mobileappsResponse","mobile","getMobileappTags","mobileappTags","getMobileappMetricsCatalog","mobileappCatalog","transformAggregations","sort","beaconTypes","transformBeaconTypes","a","servicesCache","getServicesOfApplication","services","paginateServices","fetchServiceMetrics","buildServiceMetricLabel","sliReportsCache","getConfiguredSLIs","sliReports","sliName","sloReport","sloSpecific","sloValue","extractSpecificValueFromSLI","sliResult","buildResultArray","sli","errorBudgetRemaining","buildViolationDistributionTimeSeries","violationDistribution","greens","reds","greys","sloReportsCache","getSLOConfigurations","sloReports","slo2Report","slo2Specific","Math","floor","sloResult","slo","totalErrorBudget","errorBudgetSpent","buildChart","errorChart","errorAccumulationChart","errorBudgetRemainChart","startTS","websitesCache","queryinterval_limit_website_metrics","fetchAnalyzeMetricsForWebsite","buildAnalyzeWebsiteLabel","getWebsites","websites","websitesResponse","website","getWebsiteTags","websiteTags","getWebsiteMetricsCatalog","websiteCatalog","SyntheticMonitoringCache","testType","fetchMetricsForSyntheticMonitoring","testResult","testName","location","locationId","isArray","metricObj","metricName","fetchResultsForSyntheticMonitoring","aggregatedMetrics","locationLabel","props","testResultCommonProperties","locationDisplayLabel","entries","dataPoints","points","ts","getSyntheticMonitoringtests","tests","testId","getSyntheticMonitoringMetricsCatalog","agg","formatter","syntheticMetrics","aggregateTarget","targetLabel","customFilters","aggregationFunction","buildAggregationLabel","concatedTargetData","concatTargetData","aggregatedData","dataGroupedByTimestamp","aggregationLabel","timestampData","valuesOfTimestamp","aggregatedValue","toLowerCase","sum","mean","min","max","aggregateDataOfTimestamp","buildResult","selectedApplication","cf","metric_categories","category","instanceSettings","jsonData","useProxy","trimEnd","instanaUrl","availableGranularities","availableRollups","availableTimeIntervals","dataSourceSlo","dataSourceSlo2","dataSourceInfrastructure","dataSourceWebsite","dataSourceMobileapp","dataSourceApplication","dataSourceService","dataSourceEndpoint","dataSourceSyntheticMonitoring","resultCache","DataSource","range","targets","pseudoHash","targetTimeFilter","hide","setPossibleTimeIntervals","getDefaultTimeInterval","millis","convertTimeShiftToMillis","applyTimeShiftOnTimeFilter","omit","mapValues","adjustTimeFilterIfCached","buildTargetWithAppendedDataResult","buildTarget","getApplicationServiceEndpointMetrics","targetData","targetAndData","resultData","cacheResultIfNecessary","cloneDeep","applyTimeShiftIfNecessary","aggregateDataIfNecessary","queryinterval_limit_app_metrics","applyTimeShiftOnData","supportsDeltaRequests","hasResult","cachedObj","timeshift","newData","aggregateGraphs","hideOriginalGraphs","dt","appendResult","newDeltaData","cachedData","cachedResult","deltaData","matchingCachedDataIndex","findIndex","sortedUniqBy","takeRight","t1","t2","newFrom","fromDefault","penultimate","getDeltaRequestTimestamp","newTo","getSloReports","getSlo2Reports","fetchApplications","getTimeFilter","fetchApplicationTags","fetchServices","fetchEndpoints","fetchWebsites","fetchMobileapp","fetchMetricsForEntityType","parseTimeShift","endsWith","testDatasource","title","versions","onInstanaOptionsChange","eventItem","secureJsonData","onOptionsChange","currentTarget","apiToken","isApiKeyConfigured","apiKeyValue","setState","debouncedDetectFeatures","onResetAPIKey","secureJsonFields","onSwitchChange","settings","debounce","detectFeatures","canUseProxy","canQueryOfflineSnapshots","state","render","className","horizontal","required","width","placeholder","onChange","event","display","readOnly","suffix","href","theme","marginLeft","onClick","disabled","allowInfraExplore","FormWrapper","opacity","pointerEvents","stretch","children","Switch","tooltip","queryKeyword","labelWidth","remainingProps","checked","Component","debouncedRunQuery","onRunQuery","onUseFreeTextMetricsChange","loadEntityTypes","useFreeTextMetrics","onFreeTextMetricsChange","onAggregateGraphs","onHideOriginalGraph","onAggregationFunctionChange","showAdditionalSettings","legendFormat","menuPlacement","isSearchable","inputWidth","legendFormatPlaceholders","legendFormatTooltips","onLegendFormatChange","onTimeShiftChange","match","onShowAdvancedSettingsChange","showAdvancedSettings","legendFormatPlaceholder","setLegendFormatPlaceholder","setLegendFormatTooltip","hidden","invalid","dropdown","position","background","height","marginRight","dropdown__list","transition","maxHeight","overflow","zIndex","dropdown__list__active","iconTextContainer","iconStyle","alignItems","justifyContent","iconTextStyle","padding","destinationIcon","transform","fill","sourceIcon","Entity","dropdown__list__item","colors","bg2","cursor","listStyle","borderRadius","active","setActive","handleClick","onBlur","contentEditable","placement","isUnmounting","onApplicationChange","onGroupChange","showGroupBySecondLevel","onApplicationCallToEntityChange","onCallToEntityChange","onGroupByTagSecondLevelKeyChange","componentDidMount","datasource","unshift","updateGroups","updateMetrics","componentWillUnmount","groups","inboundIcon","allIcon","loadServices","loadEndpoints","onServiceChange","onEndpointChange","onApplicationBoundaryScopeChange","scope","imgUrl","loadApplications","app","onEntityChange","onInfraCallToEntityChange","rows","OPERATOR_STRING","OPERATOR_STRING_SET","OPERATOR_NUMBER","OPERATOR_BOOLEAN","OPERATOR_KEY_VALUE","addTagFilter","filterOperatorsOnType","removeTagFilter","validateChangeAndRun","onOperatorChange","onTagFilterStringValueChange","onTagFilterNumberValueChange","valueAsNumber","onFilterChange","filterValue","textareaValue","trim","operators","canShowStringInput","canShowNumberInput","onTagFilterBooleanValueChange","runDebounced","isNaN","listFilter","singleFilter","variant","searchable","onQueryChange","updateQueryTypes","debouncedEntityTypes","onTypeChange","queryTypes","noOptionsMessage","onMetricChange","canShowMaxMetricValue","onTimeIntervalChange","onAggregationChange","onShowMaxValueChange","onShowAllMetricsChange","availableMetrics","possibleTimeIntervals","possibleAggregations","canShowAggregation","canSelectAggregation","canShowAllMetrics","addCustomFilter","removeCustomFilter","onMobileappChange","mobileapp","onBeaconTypeChange","filterMetricsOnType","mobileappMetrics","onSloChange","onSloValueChange","onSloSpecificChange","isValidSlo","loadSloReports","val","valid","shouldComponentUpdate","nextProps","nextState","nextContext","onSlo2Change","slo2Reports","onWebsiteChange","websiteMetrics","testTypeOptions","fetchSyntheticTests","testOptions","placeholderOption","test","SyntheticMonitoringMetrics","onTestChange","onTestTypeChange","prevTestTypeValue","onCategoryChange","newCategory","selectionReset","changeAndRun","onMetricsFilter","setMetricPlaceholder","filterForEntityType","findMatchingEntityTypes","filterResults","filterEntityTypes","types","newAvailableMetrics","applyFilterToMetricList","isAbleToShowAllMetrics","checkMetricAndRefresh","defaultQuery","selectedWindowSize","componentDidUpdate","prevProps","prevState","nrOfTotalResults","filterResult","filteredMetrics","resetMetricSelection","resetEntityTypeSelection","resetEntitySelection","resetServices","resetEndpoints","resetSLO","resetSLO2","categories","text","color","setConfigEditor","setQueryEditor"],"mappings":"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","file":"module.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 13);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__0__;","module.exports = __WEBPACK_EXTERNAL_MODULE__1__;","module.exports = __WEBPACK_EXTERNAL_MODULE__2__;","module.exports = __WEBPACK_EXTERNAL_MODULE__3__;","var api = require(\"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--8-1!../../node_modules/postcss-loader/src/index.js??ref--8-2!../../node_modules/sass-loader/dist/cjs.js!./plugin.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","\"use strict\";\n\nvar isOldIE = function isOldIE() {\n  var memo;\n  return function memorize() {\n    if (typeof memo === 'undefined') {\n      // Test for IE <= 9 as proposed by Browserhacks\n      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n      // Tests for existence of standard globals is to allow style-loader\n      // to operate correctly into non-standard environments\n      // @see https://github.com/webpack-contrib/style-loader/issues/177\n      memo = Boolean(window && document && document.all && !window.atob);\n    }\n\n    return memo;\n  };\n}();\n\nvar getTarget = function getTarget() {\n  var memo = {};\n  return function memorize(target) {\n    if (typeof memo[target] === 'undefined') {\n      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n        try {\n          // This will throw an exception if access to iframe is blocked\n          // due to cross-origin restrictions\n          styleTarget = styleTarget.contentDocument.head;\n        } catch (e) {\n          // istanbul ignore next\n          styleTarget = null;\n        }\n      }\n\n      memo[target] = styleTarget;\n    }\n\n    return memo[target];\n  };\n}();\n\nvar stylesInDom = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDom.length; i++) {\n    if (stylesInDom[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var index = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3]\n    };\n\n    if (index !== -1) {\n      stylesInDom[index].references++;\n      stylesInDom[index].updater(obj);\n    } else {\n      stylesInDom.push({\n        identifier: identifier,\n        updater: addStyle(obj, options),\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction insertStyleElement(options) {\n  var style = document.createElement('style');\n  var attributes = options.attributes || {};\n\n  if (typeof attributes.nonce === 'undefined') {\n    var nonce = typeof __webpack_nonce__ !== 'undefined' ? __webpack_nonce__ : null;\n\n    if (nonce) {\n      attributes.nonce = nonce;\n    }\n  }\n\n  Object.keys(attributes).forEach(function (key) {\n    style.setAttribute(key, attributes[key]);\n  });\n\n  if (typeof options.insert === 'function') {\n    options.insert(style);\n  } else {\n    var target = getTarget(options.insert || 'head');\n\n    if (!target) {\n      throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n    }\n\n    target.appendChild(style);\n  }\n\n  return style;\n}\n\nfunction removeStyleElement(style) {\n  // istanbul ignore if\n  if (style.parentNode === null) {\n    return false;\n  }\n\n  style.parentNode.removeChild(style);\n}\n/* istanbul ignore next  */\n\n\nvar replaceText = function replaceText() {\n  var textStore = [];\n  return function replace(index, replacement) {\n    textStore[index] = replacement;\n    return textStore.filter(Boolean).join('\\n');\n  };\n}();\n\nfunction applyToSingletonTag(style, index, remove, obj) {\n  var css = remove ? '' : obj.media ? \"@media \".concat(obj.media, \" {\").concat(obj.css, \"}\") : obj.css; // For old IE\n\n  /* istanbul ignore if  */\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = replaceText(index, css);\n  } else {\n    var cssNode = document.createTextNode(css);\n    var childNodes = style.childNodes;\n\n    if (childNodes[index]) {\n      style.removeChild(childNodes[index]);\n    }\n\n    if (childNodes.length) {\n      style.insertBefore(cssNode, childNodes[index]);\n    } else {\n      style.appendChild(cssNode);\n    }\n  }\n}\n\nfunction applyToTag(style, options, obj) {\n  var css = obj.css;\n  var media = obj.media;\n  var sourceMap = obj.sourceMap;\n\n  if (media) {\n    style.setAttribute('media', media);\n  } else {\n    style.removeAttribute('media');\n  }\n\n  if (sourceMap && btoa) {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    while (style.firstChild) {\n      style.removeChild(style.firstChild);\n    }\n\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar singleton = null;\nvar singletonCounter = 0;\n\nfunction addStyle(obj, options) {\n  var style;\n  var update;\n  var remove;\n\n  if (options.singleton) {\n    var styleIndex = singletonCounter++;\n    style = singleton || (singleton = insertStyleElement(options));\n    update = applyToSingletonTag.bind(null, style, styleIndex, false);\n    remove = applyToSingletonTag.bind(null, style, styleIndex, true);\n  } else {\n    style = insertStyleElement(options);\n    update = applyToTag.bind(null, style, options);\n\n    remove = function remove() {\n      removeStyleElement(style);\n    };\n  }\n\n  update(obj);\n  return function updateStyle(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {\n        return;\n      }\n\n      update(obj = newObj);\n    } else {\n      remove();\n    }\n  };\n}\n\nmodule.exports = function (list, options) {\n  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n  // tags it will allow on a page\n\n  if (!options.singleton && typeof options.singleton !== 'boolean') {\n    options.singleton = isOldIE();\n  }\n\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    if (Object.prototype.toString.call(newList) !== '[object Array]') {\n      return;\n    }\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDom[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDom[_index].references === 0) {\n        stylesInDom[_index].updater();\n\n        stylesInDom.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \" {\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join('');\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery, dedupe) {\n    if (typeof modules === 'string') {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, '']];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var i = 0; i < this.length; i++) {\n        // eslint-disable-next-line prefer-destructuring\n        var id = this[i][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = [].concat(modules[_i]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        // eslint-disable-next-line no-continue\n        continue;\n      }\n\n      if (mediaQuery) {\n        if (!item[2]) {\n          item[2] = mediaQuery;\n        } else {\n          item[2] = \"\".concat(mediaQuery, \" and \").concat(item[2]);\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || ''; // eslint-disable-next-line prefer-destructuring\n\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === 'function') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || '').concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n  return \"/*# \".concat(data, \" */\");\n}","module.exports = __WEBPACK_EXTERNAL_MODULE__7__;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(true);\n// Module\nexports.push([module.id, \".entityDropdown{min-width:80px}.settings{max-width:600px}\", \"\",{\"version\":3,\"sources\":[\"plugin.css\"],\"names\":[],\"mappings\":\"AAAA,gBAAgB,cAAc,CAAC,UAAU,eAAe\",\"file\":\"plugin.css\",\"sourcesContent\":[\".entityDropdown{min-width:80px}.settings{max-width:600px}\"]}]);\n// Exports\nmodule.exports = exports;\n","var api = require(\"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../node_modules/css-loader/dist/cjs.js??ref--8-1!../node_modules/postcss-loader/src/index.js??ref--8-2!../node_modules/sass-loader/dist/cjs.js!./instana-grafana.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(true);\n// Module\nexports.push([module.id, \"path[d=\\\"M18.71,7.21a1,1,0,0,0-1.42,0L9.84,14.67,6.71,11.53A1,1,0,1,0,5.29,13l3.84,3.84a1,1,0,0,0,1.42,0l8.16-8.16A1,1,0,0,0,18.71,7.21Z\\\"]{display:none}\", \"\",{\"version\":3,\"sources\":[\"instana-grafana.css\"],\"names\":[],\"mappings\":\"AAAA,0IAA0I,YAAY\",\"file\":\"instana-grafana.css\",\"sourcesContent\":[\"path[d=\\\"M18.71,7.21a1,1,0,0,0-1.42,0L9.84,14.67,6.71,11.53A1,1,0,1,0,5.29,13l3.84,3.84a1,1,0,0,0,1.42,0l8.16-8.16A1,1,0,0,0,18.71,7.21Z\\\"]{display:none}\"]}]);\n// Exports\nmodule.exports = exports;\n","var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/css-loader/dist/cjs.js??ref--8-1!../../../node_modules/postcss-loader/src/index.js??ref--8-2!../../../node_modules/sass-loader/dist/cjs.js!./ApplicationBoundaryScope.css\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\n\nmodule.exports = exported;","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(true);\n// Module\nexports.push([module.id, \".dropdown{position:relative;background:transparent;width:\\\"32px\\\";height:\\\"32px\\\";margin-right:\\\"4px\\\"}.dropdown-list{transition:max-height .2s ease-out;max-height:0;overflow:hidden;z-index:2;position:absolute}.dropdown-list-active{overflow:hidden;z-index:2;max-height:1000px;opacity:1;position:absolute}.iconTextContainer{display:inline-flex}.iconStyle{display:flex;align-items:center;justify-content:center}.iconTextStyle{padding:7px}\", \"\",{\"version\":3,\"sources\":[\"ApplicationBoundaryScope.css\"],\"names\":[],\"mappings\":\"AAAA,UAAU,iBAAiB,CAAC,sBAAsB,CAAC,YAAY,CAAC,aAAa,CAAC,kBAAkB,CAAC,eAAe,kCAAkC,CAAC,YAAY,CAAC,eAAe,CAAC,SAAS,CAAC,iBAAiB,CAAC,sBAAsB,eAAe,CAAC,SAAS,CAAC,iBAAiB,CAAC,SAAS,CAAC,iBAAiB,CAAC,mBAAmB,mBAAmB,CAAC,WAAW,YAAY,CAAC,kBAAkB,CAAC,sBAAsB,CAAC,eAAe,WAAW\",\"file\":\"ApplicationBoundaryScope.css\",\"sourcesContent\":[\".dropdown{position:relative;background:transparent;width:\\\"32px\\\";height:\\\"32px\\\";margin-right:\\\"4px\\\"}.dropdown-list{transition:max-height .2s ease-out;max-height:0;overflow:hidden;z-index:2;position:absolute}.dropdown-list-active{overflow:hidden;z-index:2;max-height:1000px;opacity:1;position:absolute}.iconTextContainer{display:inline-flex}.iconStyle{display:flex;align-items:center;justify-content:center}.iconTextStyle{padding:7px}\"]}]);\n// Exports\nmodule.exports = exports;\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n","/* CONFIG */\nexport const PAGINATION_LIMIT = 15; // pagesize=200 => 3000 results in dropdown (~30sec.)\nexport const CACHE_MAX_AGE = 60000;\nexport const SEPARATOR = '|';\n\n/* CATEGORIES */\nexport const BUILT_IN_METRICS = 0;\nexport const CUSTOM_METRICS = 1;\nexport const ANALYZE_APPLICATION_METRICS = 2;\nexport const ANALYZE_WEBSITE_METRICS = 3;\nexport const APPLICATION_SERVICE_ENDPOINT_METRICS = 4; // replaces previous ->\n// APPLICATION_METRICS = '4';\n// SERVICE_METRICS = '5';\n// ENDPOINT_METRICS = '6';\nexport const SLO_INFORMATION = 7;\nexport const INFRASTRUCTURE_ANALYZE = 8;\nexport const ANALYZE_MOBILE_APP_METRICS = 9;\nexport const SLO2_INFORMATION = 10;\nexport const SYNTHETIC_MONITORING = 11;\n\n/* DROPDOWN DEFAULTS */\nexport const ALL_APPLICATIONS = '-- No Application Filter --';\nexport const ALL_WEBSITES = '-- No Website Filter --';\nexport const ALL_MOBILE_APPS = '-- No Mobile App Filter --';\nexport const ALL_SERVICES = '-- No Service Filter --';\nexport const ALL_ENDPOINTS = '-- No Endpoint Filter --';\n\n/* PLACEHOLDER */\nexport const PLEASE_SPECIFY = 'Please specify';\n","import _ from 'lodash';\n\nimport TimeFilter from '../types/time_filter';\n\nconst omitLabels = [\n  'refId',\n  'pluginId',\n  'showWarningCantShowAllResults',\n  'timeShiftIsValid',\n  'useFreeTextMetrics',\n  'showGroupBySecondLevel',\n  'canShowAllMetrics',\n  'timeFilter',\n  'stableHash',\n];\n\nexport function generateStableHash(obj: any): string {\n  let pseudoHash = _.omit(obj, omitLabels);\n  pseudoHash = _.mapValues(pseudoHash, (value: any) => {\n    // to reduce overhead of interface Selectable\n    if (value != null && typeof value === 'object' && 'key' in value) {\n      value = value.key;\n    }\n\n    return value;\n  });\n  return JSON.stringify(pseudoHash);\n}\n\n/* Check if two time filters are overlapping.\n\nReturn true when:\na)\n  from |-------------------| to (t2)\n              from |--------------------| to (t1)\nb)\n  from |-------------------| to (t2)\n  from |-------------------| to (t1)\nc)\n  from |-------------------| to (t2)\n              from |-------| to (t1)\n\nReturns false when:\nd)\n  from |-------------------| to (t2)\n                      from |-------| to (t1)\ne)\n  from |-------------------| to (t2)\n       from |--------| to (t1)\nf)\n     from |-------------------| to (t2)\nfrom |----------------------------------------| to (t1)\ng)\n                from |-------------------| to (t2)\n  from |--------------------| to (t1)\nh)\n                from |-------------------| to (t2)\n  from |-------------| to (t1)\ni)\n                from |-------------------| to (t2)\n  from |--------| to (t1)\nj)\n  from |-------------------| to (t2)\n                        from |----------| to (t1)\nk)\n  from |-------------------| to (t2)\n  from |----------| to (t1)\n*/\nexport function hasIntersection(t1: TimeFilter, t2: TimeFilter): boolean {\n  return t1.from < t2.to && t1.from >= t2.from && t1.to >= t2.to;\n}\n\n/*\n  Appends new found items to already existing data in cache.\n  Also removes old data accordingly (e.g. if 4 new datapoints were added,\n  the corresponding oldest four datapoints are removed).\n*/\nexport function appendData(newDeltaData: any, cachedData: any): any {\n  _.each(newDeltaData, (deltaData) => {\n    let matchingCachedDataIndex = _.findIndex(\n      cachedData,\n      (o: any) => o.key === deltaData.key && o.target === deltaData.target\n    );\n    if (cachedData[matchingCachedDataIndex] && deltaData.datapoints) {\n      // const size = matchingCachedData.datapoints.length;\n      let datapoints = deltaData.datapoints.concat(cachedData[matchingCachedDataIndex].datapoints);\n      datapoints = _.sortedUniqBy(\n        datapoints.sort((a: any, b: any) => a[1] - b[1]),\n        (a: any) => a[1]\n      );\n      cachedData[matchingCachedDataIndex].datapoints = _.takeRight(datapoints, 800);\n      cachedData[matchingCachedDataIndex].target = deltaData.target;\n    } else {\n      cachedData.push(deltaData);\n    }\n  });\n\n  return cachedData;\n}\n\nexport function getDeltaRequestTimestamp(series: any, fromDefault: number, timeInterval: any): number {\n  // we do not apply any delta for requests that contain a one second granularity (application requests)\n  if (timeInterval.key === '1') {\n    return fromDefault;\n  }\n\n  // the found series can have multiple results, it's ok just to use the first one\n  // because data is written in batches and we know that once there is a datapoint\n  // for a series, the other series' datapoints are up-to-date as well.\n  const length = series[0].datapoints.length;\n  if (length < 2) {\n    return fromDefault;\n  }\n\n  const penultimate = length - 2;\n  return series[0].datapoints[penultimate][1];\n}\n","// accoring to metrics/BaseGranularity.java\nexport default [\n  {\n    value: 1, // 1s\n    label: '1s',\n  },\n  {\n    value: 5, // 5s\n    label: '5s',\n  },\n  {\n    value: 10, // 10s\n    label: '10s',\n  },\n  {\n    value: 60, // 1m\n    label: '1min',\n  },\n  {\n    value: 60 * 5, // 5m\n    label: '5min',\n  },\n  {\n    value: 60 * 10, // 10m\n    label: '10min',\n  },\n  {\n    value: 60 * 30, // 30m\n    label: '30min',\n  },\n  {\n    value: 60 * 60, // 1h\n    label: '1h',\n  },\n  {\n    value: 60 * 60 * 4, // 4h\n    label: '4h',\n  },\n  {\n    value: 60 * 60 * 6, // 6h\n    label: '6h',\n  },\n  {\n    value: 60 * 60 * 8, // 8h\n    label: '8h',\n  },\n  {\n    value: 60 * 60 * 12, // 12h\n    label: '12h',\n  },\n  {\n    value: 60 * 60 * 24, // 1d\n    label: '1d',\n  },\n  {\n    value: 60 * 60 * 24 * 5, // 5d\n    label: '5d',\n  },\n  {\n    value: 60 * 60 * 24 * 10, // 10d\n    label: '10d',\n  },\n];\n","import { TimeRange } from '@grafana/data/types/time';\nimport TimeFilter from '../types/time_filter';\nimport { SEPARATOR } from '../GlobalVariables';\n\nexport function readTime(time: TimeRange): TimeFilter {\n  const from = new Date(time!.from.valueOf()).getTime();\n  const to = new Date(time!.to.valueOf()).getTime();\n  return {\n    from: from,\n    to: to,\n    windowSize: to - from,\n  };\n}\n\nexport function getWindowSize(timeFilter: TimeFilter): number {\n  return timeFilter.to - timeFilter.from;\n}\n\nexport function getTimeKey(timeFilter: TimeFilter): string {\n  // time might be part of a cache key as this can cause different results\n  return msToMin(timeFilter.from) + SEPARATOR + msToMin(timeFilter.to);\n}\n\nfunction msToMin(time: number): number {\n  return time / 60000; // Avoid rounding to retain precision\n}\n\nexport function hoursToMs(hours: any): number {\n  if (hours > 0) {\n    return hours * 60 * 60 * 1000; // Direct conversion without rounding\n  }\n  return 0;\n}\n\nexport function atLeastGranularity(windowSize: number, granularity: number): number {\n  // Ensure windowSize is not smaller than granularity\n  const granularityInMs = granularity * 1000;\n  return windowSize >= granularityInMs ? windowSize : granularityInMs;\n}\n","export default [\n  {\n    availableFor: 1000 * 60 * 60 * 24, // 1d\n    rollup: 1000, // 1s\n    label: '1s',\n  },\n  {\n    availableFor: 1000 * 60 * 60 * 24, // 1d\n    rollup: 1000 * 5, // 5s\n    label: '5s',\n  },\n  {\n    availableFor: 1000 * 60 * 60 * 24 * 31, // 1 month\n    rollup: 1000 * 60, // 1m\n    label: '1min',\n  },\n  {\n    availableFor: 1000 * 60 * 60 * 24 * 31 * 3, // 3 months\n    rollup: 1000 * 60 * 5, // 5m\n    label: '5min',\n  },\n  {\n    availableFor: 1000 * 60 * 60 * 24 * 31 * 12, // 1 year aka forever\n    rollup: 1000 * 60 * 60, // 1h\n    label: '1h',\n  },\n];\n","import granularities from '../lists/granularities';\nimport TimeFilter from '../types/time_filter';\nimport Selectable from '../types/selectable';\nimport { getWindowSize } from './time_util';\nimport rollups from '../lists/rollups';\n\nconst MAX_DATAPOINTS_ANALYZE = 600;\nconst MAX_DATAPOINTS_INFRASTRUCTURE = 800;\nconst UI_DATAPOINTS_ANALYZE = 80;\n\nfunction currentTime() {\n  return Date.now();\n}\n\nexport function getDefaultChartGranularity(windowSize: number): Selectable {\n  return getPossibleGranularities(windowSize, UI_DATAPOINTS_ANALYZE)[0];\n}\n\nexport function getPossibleGranularities(windowSize: number, maxValues = MAX_DATAPOINTS_ANALYZE): Selectable[] {\n  let possibleGranularities = granularities.filter(\n    (granularity) => windowSize / 1000 / granularity.value <= maxValues && granularity.value * 1000 <= windowSize\n  );\n\n  // window sizes of this length and up have a granularity of at least 1h\n  if (windowSize > 48000001) {\n    possibleGranularities = possibleGranularities.filter((granularity) => granularity.value >= 3600);\n  }\n\n  if (windowSize >= 1800000) {\n    possibleGranularities = possibleGranularities.filter((granularity) => granularity.value >= 60);\n  }\n\n  if (possibleGranularities.length > 0) {\n    return possibleGranularities.map((granularity) => ({\n      key: granularity.value.toString(),\n      label: granularity.label,\n    }));\n  }\n\n  return [\n    {\n      key: granularities[granularities.length - 1].value.toString(),\n      label: granularities[granularities.length - 1].label,\n    },\n  ];\n}\n\nexport function getDefaultMetricRollupDuration(timeFilter: TimeFilter): Selectable {\n  return getPossibleRollups(timeFilter)[0];\n}\n\nexport function getPossibleRollups(timeFilter: TimeFilter): Selectable[] {\n  // Ignoring time differences for now since small time differences\n  // can be accepted. This time is only used to calculate the rollup.\n  const now = currentTime();\n  const windowSize = getWindowSize(timeFilter);\n\n  let possibleRollups = rollups\n    .filter((rollupDefinition) => timeFilter.from >= now - rollupDefinition.availableFor)\n    .filter((rollUp) => windowSize >= rollUp.rollup && windowSize / rollUp.rollup <= MAX_DATAPOINTS_INFRASTRUCTURE);\n\n  if (possibleRollups.length > 0) {\n    return possibleRollups.map((rollup) => ({\n      key: rollup.rollup.toString(),\n      label: rollup.label,\n    }));\n  }\n\n  return [\n    {\n      key: rollups[rollups.length - 1].rollup.toString(),\n      label: rollups[rollups.length - 1].label,\n    },\n  ];\n}\n","import { getBackendSrv } from '@grafana/runtime';\nimport { BackendSrvRequest } from '@grafana/runtime/services/backendSrv';\nimport { InstanaOptions } from '../types/instana_options';\nimport { DataSourceInstanceSettings } from '@grafana/data';\nimport _ from 'lodash';\n\nexport const getRequest = (options: InstanaOptions, endpoint: string, swallowError = false, maxRetries = 1) => {\n  const request = {\n    method: 'GET',\n    url: options.url + endpoint,\n  };\n\n  return doRequest(options, request, swallowError, maxRetries);\n};\n\nexport const postRequest = (\n  options: InstanaOptions,\n  endpoint: string,\n  data: {},\n  swallowError = false,\n  maxRetries = 0\n) => {\n  const request = {\n    method: 'POST',\n    url: options.url + endpoint,\n    data: data,\n  };\n\n  return doRequest(options, request, swallowError, maxRetries);\n};\n\nfunction doRequest(\n  options: InstanaOptions,\n  request: BackendSrvRequest,\n  swallowError: boolean,\n  maxRetries: number\n): any {\n  return getBackendSrv()\n    .datasourceRequest(request)\n    .catch((error) => {\n      if (error.status === 429) {\n        // if the error was caused by a concurrent execution limit, we will retry\n        if (\n          maxRetries > 0 &&\n          error.data?.errors &&\n          error.data.errors[0] &&\n          error.data.errors[0].includes('concurrent')\n        ) {\n          const backoff = maxRetries >= 4 ? 10000 : (4 - maxRetries) * 20000; // something between 10 and 60 seconds\n          return new Promise((resolve) => setTimeout(resolve, backoff)).then(() => {\n            return doRequest(options, request, swallowError, maxRetries - 1);\n          });\n        }\n        throw new Error('API limit is reached.');\n        return;\n      }\n\n      if (swallowError && (error.status >= 400 || error.status < 500)) {\n        console.log(error);\n        return;\n      }\n      if (maxRetries > 0 && error.status >= 500) {\n        return doRequest(options, request, swallowError, maxRetries - 1);\n      }\n      // in order to display a reasonable error message text inside ui\n      if (!error.statusText && error.data?.errors && error.data.errors[0]) {\n        throw new Error(error.data.errors[0]);\n      }\n      throw error;\n    });\n}\n\nexport function instanaUrl(instanceSettings: DataSourceInstanceSettings<InstanaOptions>): string {\n  if (instanceSettings.jsonData.useProxy) {\n    return _.trimEnd(instanceSettings.url, '/ ') + '/instana'; // to match proxy route in plugin.json\n  } else {\n    return _.trimEnd(instanceSettings.jsonData.url, '/ ');\n  }\n}\n","export default class Cache<T> {\n  store: any;\n\n  constructor() {\n    this.store = {};\n  }\n\n  put(key: string, value: T, ttl = 70000): void {\n    if (key === undefined || value === undefined) {\n      return;\n    }\n\n    this.del(key);\n    this.store[key] = {\n      value,\n      expiry: Date.now() + ttl,\n      timeout: setTimeout(() => {\n        this.del(key);\n      }, ttl),\n    };\n  }\n\n  get(key: string): T {\n    var item = this.store[key];\n    if (item && !(item.expiry && item.expiry > Date.now())) {\n      this.del(key);\n      item = undefined;\n    }\n    return item && item.value;\n  }\n\n  del(key: string): void {\n    if (this.store.hasOwnProperty(key)) {\n      clearTimeout(this.store[key].timeout);\n      delete this.store[key];\n    }\n  }\n}\n","import TagFilter from '../types/tag_filter';\nimport _ from 'lodash';\nimport { InstanaQuery } from '../types/instana_query';\n\ninterface CustomTagFilter {\n  name: string;\n  operator: string;\n  value: string | boolean | number;\n}\n\nexport function createTagFilter(filter: TagFilter) {\n  let tagFilter: CustomTagFilter = {\n    name: filter.tag.key,\n    operator: filter.operator.key,\n    value: filter.stringValue,\n  };\n\n  if ('NUMBER' === filter.tag.type) {\n    if (filter.numberValue !== null) {\n      tagFilter.value = filter.numberValue;\n    }\n  } else if ('BOOLEAN' === filter.tag.type) {\n    tagFilter.value = filter.booleanValue;\n  }\n\n  return tagFilter;\n}\n\nexport function readItemMetrics(target: InstanaQuery, response: any, getLabel: any) {\n  if (!response.data) {\n    return response;\n  }\n\n  // as we map two times we need to flatten the result\n  return _.flatten(\n    response.data.items.map((item: any, index: number) => {\n      return _.map(item.metrics, (value, key) => {\n        return {\n          target: getLabel(target, item, key, index),\n          datapoints: _.map(value, (metric) => [metric[1], metric[0]]),\n          refId: target.refId,\n          key: target.stableHash,\n        };\n      });\n    })\n  );\n}\n","import { TimeSeries, TimeSeriesPoints } from '@grafana/data';\n\nexport function emptyResultData(refId: string): TimeSeries {\n  return {\n    target: refId,\n    datapoints: [],\n  };\n}\n\nexport function buildTimeSeries(label: string, refId: string, datapoints: TimeSeriesPoints): TimeSeries {\n  return {\n    target: label,\n    refId: refId,\n    datapoints: datapoints,\n  };\n}\n","export default [\n  { key: 'calls', label: 'Call count', description: 'calls', aggregations: [{ key: 'SUM', label: 'SUM' }] },\n  {\n    key: 'latency',\n    label: 'Call latency',\n    description: 'latency',\n    aggregations: [\n      { key: 'MAX', label: 'MAX' },\n      { key: 'MEAN', label: 'MEAN' },\n      { key: 'MIN', label: 'MIN' },\n      { key: 'P25', label: 'P25' },\n      { key: 'P50', label: 'P50' },\n      { key: 'P75', label: 'P75' },\n      { key: 'P90', label: 'P90' },\n      { key: 'P95', label: 'P95' },\n      { key: 'P98', label: 'P98' },\n      { key: 'P99', label: 'P99' },\n    ],\n  },\n  { key: 'errors', label: 'Error rate', description: 'errors', aggregations: [{ key: 'MEAN', label: 'MEAN' }] },\n  {\n    key: 'services',\n    label: 'Service Count',\n    description: 'services',\n    aggregations: [{ key: 'DISTINCT_COUNT', label: 'DISTINCT_COUNT' }],\n  },\n];\n","/**\n * Util method to validate query intervals which are too big.\n *\n * @param windowSize in ms\n * @param queryIntervalLimit in ms\n */\nexport function isInvalidQueryInterval(windowSize: number, queryIntervalLimit?: number): boolean {\n  if (queryIntervalLimit) {\n    if (queryIntervalLimit > 0) {\n      return windowSize > queryIntervalLimit;\n    }\n    return false;\n  }\n\n  return false;\n}\n","import Cache from '../cache';\nimport { getRequest } from './request_handler';\nimport { InstanaOptions } from '../types/instana_options';\n\nconst versionCache: Cache<number> = new Cache<number>();\n\n/*\n  Get version of current Instana backend and cache it for 10 minutes.\n  This should be the ONLY way to retrieve any information about the Instana backend version.\n */\nexport default function getVersion(options: InstanaOptions) {\n  let cachedVersion = versionCache.get('version');\n  if (cachedVersion) {\n    return Promise.resolve(cachedVersion);\n  }\n\n  return getRequest(options, '/api/instana/version').then(\n    (result: any) => {\n      if (result.data && result.data.imageTag) {\n        const majorVersion = parseInt(result.data.imageTag.split('.', 2)[1], 10) || null;\n        if (majorVersion) {\n          versionCache.put(options.url, majorVersion, 600000);\n        }\n        return majorVersion;\n      }\n      return null;\n    },\n    (error: any) => {\n      return null;\n    }\n  );\n}\n","import { SelectableValue } from '@grafana/data';\nimport { InstanaOptions } from '../types/instana_options';\nimport Cache from '../cache';\nimport _ from 'lodash';\nimport TimeFilter from '../types/time_filter';\nimport { getTimeKey, getWindowSize, hoursToMs, atLeastGranularity } from '../util/time_util';\nimport { getRequest, postRequest } from '../util/request_handler';\nimport { getDefaultChartGranularity } from '../util/rollup_granularity_util';\nimport { InstanaQuery } from '../types/instana_query';\nimport { createTagFilter, readItemMetrics } from '../util/analyze_util';\nimport { emptyResultData } from '../util/target_util';\nimport { ALL_APPLICATIONS, PAGINATION_LIMIT } from '../GlobalVariables';\nimport defaultApplicationMetricCatalog from '../lists/default_metric_catalog';\nimport { isInvalidQueryInterval } from '../util/queryInterval_check';\nimport getVersion from '../util/instana_version';\n\nexport class DataSourceApplication {\n  instanaOptions: InstanaOptions;\n  applicationsCache: Cache<Promise<SelectableValue[]>>;\n  miscCache: Cache<any>;\n\n  constructor(options: InstanaOptions) {\n    this.instanaOptions = options;\n    this.applicationsCache = new Cache<Promise<SelectableValue[]>>();\n    this.miscCache = new Cache<any>();\n  }\n\n  runQuery(target: InstanaQuery, timeFilter: TimeFilter): any {\n    // do not try to execute to big queries\n    if (isInvalidQueryInterval(timeFilter.windowSize, hoursToMs(this.instanaOptions.queryinterval_limit_app_calls))) {\n      throw new Error(\n        'Limit for maximum selectable windowsize exceeded, max is: ' +\n          this.instanaOptions.queryinterval_limit_app_calls +\n          ' hours'\n      );\n    }\n\n    // avoid invalid calls\n    if (!target || !target.metric || !target.metric.key || !target.group || !target.group.key) {\n      return Promise.resolve(emptyResultData(target.refId));\n    }\n\n    return this.fetchAnalyzeMetricsForApplication(target, timeFilter).then((response) => {\n      target.showWarningCantShowAllResults = response.data.canLoadMore;\n      return readItemMetrics(target, response, this.buildAnalyzeApplicationLabel);\n    });\n  }\n\n  getApplications(timeFilter: TimeFilter) {\n    const key = getTimeKey(timeFilter);\n\n    let applications = this.applicationsCache.get(key);\n    if (applications) {\n      return applications;\n    }\n\n    const windowSize = getWindowSize(timeFilter);\n    let page = 1;\n    let pageSize = 200;\n\n    applications = this.paginateApplications([], windowSize, timeFilter.to, page, pageSize, PAGINATION_LIMIT).then(\n      (response: any) => {\n        let allResults = _.flattenDeep(\n          _.map(response, (pageSet) => {\n            return pageSet.items;\n          })\n        );\n\n        return _.orderBy(\n          _.compact(allResults).map((entry) => {\n            return {\n              key: entry.id,\n              label: entry.label,\n              boundaryScope: entry.boundaryScope,\n            };\n          }),\n          [(application) => application.label.toLowerCase()],\n          ['asc']\n        );\n      }\n    );\n\n    this.applicationsCache.put(key, applications, 600000);\n    return applications;\n  }\n\n  paginateApplications(\n    results: any,\n    windowSize: number,\n    to: number,\n    page: number,\n    pageSize: number,\n    pageLimit: number\n  ) {\n    if (page > pageLimit) {\n      return results;\n    }\n\n    let queryParameters = 'windowSize=' + windowSize + '&to=' + to + '&page=' + page + '&pageSize=' + pageSize;\n\n    return getRequest(this.instanaOptions, '/api/application-monitoring/applications?' + queryParameters).then(\n      (response: any) => {\n        results.push(response.data);\n        if (page * pageSize < response.data.totalHits) {\n          page++;\n          return this.paginateApplications(results, windowSize, to, page, pageSize, pageLimit);\n        } else {\n          return results;\n        }\n      }\n    );\n  }\n\n  getApplicationTags(timeFilter: TimeFilter) {\n    let applicationTags = this.miscCache.get('applicationTags');\n    if (applicationTags) {\n      return applicationTags;\n    }\n\n    return getVersion(this.instanaOptions).then((version: number) => {\n      if (version >= 191) {\n        applicationTags = this.getCatalog(timeFilter).then((catalog: any) =>\n          this.mapCatalogResponse(catalog.data.tags)\n        );\n      } else {\n        applicationTags = this.getCatalogFromDeprecatedEndpoint().then((tagsResponse: any) =>\n          this.mapCatalogResponse(tagsResponse.data)\n        );\n      }\n\n      this.miscCache.put('applicationTags', applicationTags);\n      return applicationTags;\n    });\n  }\n\n  getCatalog(timeFilter: TimeFilter) {\n    const endpoint = '/api/application-monitoring/catalog?dataSource=CALLS&useCase=FILTERING&from=' + timeFilter.from;\n    return getRequest(this.instanaOptions, endpoint);\n  }\n\n  getCatalogFromDeprecatedEndpoint() {\n    return getRequest(this.instanaOptions, '/api/application-monitoring/catalog/tags');\n  }\n\n  mapCatalogResponse(catalog: any) {\n    return catalog.map((entry: any) => ({\n      key: entry.name,\n      label: entry.name,\n      type: entry.type,\n      canApplyToSource: entry.canApplyToSource,\n      canApplyToDestination: entry.canApplyToDestination,\n    }));\n  }\n\n  getApplicationMetricsCatalog() {\n    return defaultApplicationMetricCatalog;\n  }\n\n  fetchAnalyzeMetricsForApplication(target: InstanaQuery, timeFilter: TimeFilter) {\n    const windowSize = getWindowSize(timeFilter);\n    let tagFilters: any[] = [];\n\n    return Promise.resolve(this.getApplicationTags(timeFilter)).then((applicationTags) => {\n      if (target.entity.key) {\n        tagFilters.push({\n          name: 'application.name',\n          operator: 'EQUALS',\n          value: target.entity.label!,\n          entity: target.applicationCallToEntity ? target.applicationCallToEntity : 'DESTINATION',\n        });\n      }\n\n      _.forEach(target.filters, (filter) => {\n        if (filter.isValid) {\n          let tagFilter: any = createTagFilter(filter);\n          const tag = _.find(applicationTags, ['key', filter.tag.key]);\n          if (tag.canApplyToDestination || tag.canApplyToSource) {\n            tagFilter['entity'] = this.getTagEntity(filter.entity, tag);\n          }\n          tagFilters.push(tagFilter);\n        }\n      });\n\n      if (!target.timeInterval) {\n        target.timeInterval = getDefaultChartGranularity(windowSize);\n      }\n      const metric: any = {\n        metric: target.metric.key,\n        aggregation: target.aggregation && target.aggregation.key ? target.aggregation.key : 'SUM',\n        granularity: target.timeInterval.key,\n      };\n\n      const group: any = {\n        groupbyTag: target.group.key,\n      };\n      const tag: any = _.find(applicationTags, ['key', target.group.key]);\n      if (tag.canApplyToDestination || tag.canApplyToSource) {\n        group['groupbyTagEntity'] = target.callToEntity;\n      }\n      if (target.group.type === 'KEY_VALUE_PAIR' && target.groupbyTagSecondLevelKey) {\n        group['groupbyTagSecondLevelKey'] = target.groupbyTagSecondLevelKey;\n      }\n\n      let includeSynthetic = false;\n      target.filters.map((filter) => {\n        if (filter.tag.key === 'call.is_synthetic') {\n          includeSynthetic = filter.booleanValue;\n        }\n      });\n\n      const data: any = {\n        group: group,\n        timeFrame: {\n          to: timeFilter.to,\n          windowSize: atLeastGranularity(windowSize, metric.granularity),\n        },\n        metrics: [metric],\n        includeSynthetic,\n        tagFilterExpression: {\n          type: 'EXPRESSION',\n          logicalOperator: 'AND',\n          elements: tagFilters,\n        },\n      };\n\n      return postRequest(\n        this.instanaOptions,\n        '/api/application-monitoring/analyze/call-groups?fillTimeSeries=true',\n        data,\n        false,\n        5\n      );\n    });\n  }\n\n  getTagEntity(selectedEntity: string, tag: any): string {\n    if (selectedEntity === 'DESTINATION' && tag.canApplyToDestination) {\n      return 'DESTINATION';\n    }\n    if (selectedEntity === 'SOURCE' && tag.canApplyToSource) {\n      return 'SOURCE';\n    }\n    return tag.canApplyToDestination ? 'DESTINATION' : 'SOURCE';\n  }\n\n  fetchApplicationMetrics(target: InstanaQuery, timeFilter: TimeFilter) {\n    // avoid invalid calls\n    if (!target || !target.metric || !target.metric.key) {\n      return Promise.resolve(emptyResultData(target.refId));\n    }\n\n    const windowSize = getWindowSize(timeFilter);\n    if (!target.timeInterval) {\n      target.timeInterval = getDefaultChartGranularity(windowSize);\n    }\n    const metric: any = {\n      metric: target.metric.key,\n      aggregation: target.aggregation && target.aggregation.key ? target.aggregation.key : 'SUM',\n      granularity: target.timeInterval.key,\n    };\n\n    const data: any = {\n      timeFrame: {\n        to: timeFilter.to,\n        windowSize: atLeastGranularity(windowSize, metric.granularity),\n      },\n      metrics: [metric],\n    };\n\n    if (target.entity.key !== null) {\n      data['applicationId'] = target.entity.key;\n      data['applicationBoundaryScope'] = target.applicationBoundaryScope;\n    }\n\n    return postRequest(\n      this.instanaOptions,\n      '/api/application-monitoring/metrics/applications?fillTimeSeries=true',\n      data\n    );\n  }\n\n  buildAnalyzeApplicationLabel(target: InstanaQuery, item: any, key: string, index: number): string {\n    if (target.labelFormat) {\n      let label = target.labelFormat;\n      label = _.replace(label, '$label', item.name);\n      label = _.replace(label, '$application', target.entity.label!);\n      label = _.replace(label, '$metric', target.metric.label!);\n      label = _.replace(label, '$key', key);\n      label = _.replace(label, '$index', '' + index + 1);\n      label = _.replace(label, '$timeShift', target.timeShift);\n      return label;\n    }\n\n    if (target.entity.label === ALL_APPLICATIONS) {\n      return target.timeShift ? item.name + ' - ' + key + ' - ' + target.timeShift : item.name + ' - ' + key;\n    }\n\n    return target.timeShift && target.timeShiftIsValid\n      ? item.name + ' (' + target.entity.label + ')' + ' - ' + key + ' - ' + target.timeShift\n      : item.name + ' (' + target.entity.label + ')' + ' - ' + key;\n  }\n\n  buildApplicationMetricLabel(target: InstanaQuery, item: any, key: string, index: number): string {\n    if (target.labelFormat) {\n      let label = target.labelFormat;\n      label = _.replace(label, '$label', item.application.label);\n      label = _.replace(label, '$application', target.entity.label!);\n      label = _.replace(label, '$metric', target.metric.label!);\n      label = _.replace(label, '$key', key);\n      label = _.replace(label, '$index', '' + index + 1);\n      label = _.replace(label, '$timeShift', target.timeShift);\n      return label;\n    }\n\n    if (target.entity.label === ALL_APPLICATIONS) {\n      return target.timeShift\n        ? item.application.label + ' - ' + key + ' - ' + target.timeShift\n        : item.application.label + ' - ' + key;\n    }\n\n    return target.timeShift && target.timeShiftIsValid\n      ? item.application.label + ' (' + target.entity.label + ')' + ' - ' + key + ' - ' + target.timeShift\n      : item.application.label + ' (' + target.entity.label + ')' + ' - ' + key;\n  }\n}\n","import { SelectableValue } from '@grafana/data';\nimport { InstanaOptions } from '../types/instana_options';\nimport Cache from '../cache';\nimport _ from 'lodash';\nimport TimeFilter from '../types/time_filter';\nimport { getTimeKey, getWindowSize, atLeastGranularity } from '../util/time_util';\nimport { getRequest, postRequest } from '../util/request_handler';\nimport { InstanaQuery } from '../types/instana_query';\nimport { ALL_ENDPOINTS, PAGINATION_LIMIT } from '../GlobalVariables';\nimport { emptyResultData } from '../util/target_util';\nimport { getDefaultChartGranularity } from '../util/rollup_granularity_util';\n\nexport class DataSourceEndpoint {\n  instanaOptions: InstanaOptions;\n  endpointsCache: Cache<Promise<SelectableValue[]>>;\n\n  constructor(options: InstanaOptions) {\n    this.instanaOptions = options;\n    this.endpointsCache = new Cache<Promise<SelectableValue[]>>();\n  }\n\n  getEndpointsOfService(target: InstanaQuery, timeFilter: TimeFilter) {\n    let applicationId = '';\n    if (target.entity && target.entity.key) {\n      applicationId = target.entity.key;\n    }\n\n    let serviceId = '';\n    if (target.service) {\n      serviceId = target.service.key;\n    }\n\n    const key = getTimeKey(timeFilter) + applicationId + serviceId + target.applicationBoundaryScope;\n    let endpoints = this.endpointsCache.get(key);\n    if (endpoints) {\n      return endpoints;\n    }\n\n    const windowSize = getWindowSize(timeFilter);\n    let page = 1;\n    let pageSize = 200;\n\n    endpoints = this.paginateEndpoints(\n      [],\n      applicationId,\n      serviceId,\n      windowSize,\n      target.applicationBoundaryScope,\n      timeFilter.to,\n      page,\n      pageSize,\n      PAGINATION_LIMIT\n    ).then((response: any) => {\n      let allResults = _.flattenDeep(\n        _.map(response, (pageSet) => {\n          return pageSet.items;\n        })\n      );\n\n      return _.orderBy(\n        _.compact(allResults).map((entry) => {\n          return {\n            key: entry.id,\n            label: entry.label,\n          };\n        }),\n        [(endpoint) => endpoint.label.toLowerCase()],\n        ['asc']\n      );\n    });\n\n    this.endpointsCache.put(key, endpoints, 600000);\n    return endpoints;\n  }\n\n  paginateEndpoints(\n    results: any,\n    applicationId: string,\n    serviceId: string,\n    windowSize: number,\n    applicationBoundaryScope: string,\n    to: number,\n    page: number,\n    pageSize: number,\n    pageLimit: number\n  ) {\n    if (page > pageLimit) {\n      return results;\n    }\n\n    let queryParameters = 'windowSize=' + windowSize + '&to=' + to + '&page=' + page + '&pageSize=' + pageSize;\n    if (applicationBoundaryScope === 'ALL' || applicationBoundaryScope === 'INBOUND') {\n      queryParameters += '&applicationBoundaryScope=' + applicationBoundaryScope;\n    }\n\n    let url =\n      '/api/application-monitoring/applications;id=' +\n      (applicationId ? applicationId : '') +\n      '/services;id=' +\n      (serviceId ? serviceId : '') +\n      '/endpoints?' +\n      queryParameters;\n\n    return getRequest(this.instanaOptions, url).then((response: any) => {\n      results.push(response.data);\n      if (page * pageSize < response.data.totalHits) {\n        page++;\n        return this.paginateEndpoints(\n          results,\n          applicationId,\n          serviceId,\n          windowSize,\n          applicationBoundaryScope,\n          to,\n          page,\n          pageSize,\n          pageLimit\n        );\n      } else {\n        return results;\n      }\n    });\n  }\n\n  fetchEndpointMetrics(target: InstanaQuery, timeFilter: TimeFilter) {\n    // avoid invalid calls\n    if (!target || !target.metric || !target.metric.key) {\n      return Promise.resolve(emptyResultData(target.refId));\n    }\n\n    const windowSize = getWindowSize(timeFilter);\n    if (!target.timeInterval) {\n      target.timeInterval = getDefaultChartGranularity(windowSize);\n    }\n    const metric: any = {\n      metric: target.metric.key,\n      aggregation: target.aggregation && target.aggregation.key ? target.aggregation.key : 'SUM',\n      granularity: target.timeInterval.key,\n    };\n\n    const data: any = {\n      endpointId: target.endpoint.key,\n      timeFrame: {\n        to: timeFilter.to,\n        windowSize: atLeastGranularity(windowSize, metric.granularity),\n      },\n      metrics: [metric],\n    };\n\n    if (target.entity && target.entity.key) {\n      data['applicationId'] = target.entity.key;\n      // only set applicationBoundaryScope when an application is selected\n      data['applicationBoundaryScope'] = target.applicationBoundaryScope;\n    }\n\n    if (target.service && target.service.key) {\n      data['serviceId'] = target.service.key;\n    }\n\n    return postRequest(this.instanaOptions, '/api/application-monitoring/metrics/endpoints?fillTimeSeries=true', data);\n  }\n\n  buildEndpointMetricLabel(target: InstanaQuery, item: any, key: string, index: number): string {\n    if (target.labelFormat) {\n      let label = target.labelFormat;\n      label = _.replace(label, '$label', item.endpoint.label);\n      label = _.replace(label, '$endpoint', target.endpoint.label!);\n      label = _.replace(label, '$service', target.service.label!);\n      label = _.replace(label, '$application', target.entity.label!);\n      label = _.replace(label, '$metric', target.metric.label!);\n      label = _.replace(label, '$key', key);\n      label = _.replace(label, '$index', '' + index + 1);\n      label = _.replace(label, '$timeShift', target.timeShift);\n      return label;\n    }\n\n    if (target.endpoint.label === ALL_ENDPOINTS) {\n      return target.timeShift\n        ? item.endpoint.label + ' - ' + key + ' - ' + target.timeShift\n        : item.endpoint.label + ' - ' + key;\n    }\n\n    return target.timeShift && target.timeShiftIsValid\n      ? item.endpoint.label + ' (' + target.endpoint.label + ')' + ' - ' + key + ' - ' + target.timeShift\n      : item.endpoint.label + ' (' + target.endpoint.label + ')' + ' - ' + key;\n  }\n}\n","export default [\n  {\n    key: 'cpu.used', // metric.key\n    value: 'cpu.count', // value of the metric found in GET /snapshots/{snapshotId}\n    label: 'cpu.max', // label that shall be shown as target in graph\n  },\n  {\n    key: 'memory.used',\n    value: 'memory.total',\n    label: 'memory.max',\n  },\n  {\n    key: 'openFiles.used',\n    value: 'openFiles.max',\n    label: 'openFiles.max',\n  },\n];\n","import { CUSTOM_METRICS, INFRASTRUCTURE_ANALYZE, SEPARATOR } from '../GlobalVariables';\nimport { atLeastGranularity, getTimeKey, getWindowSize, hoursToMs } from '../util/time_util';\nimport { getRequest, postRequest } from '../util/request_handler';\nimport Cache from '../cache';\nimport { InstanaOptions } from '../types/instana_options';\nimport { InstanaQuery } from '../types/instana_query';\nimport { SelectableValue } from '@grafana/data';\nimport TimeFilter from '../types/time_filter';\nimport _ from 'lodash';\nimport { emptyResultData } from '../util/target_util';\nimport { getDefaultChartGranularity, getDefaultMetricRollupDuration } from '../util/rollup_granularity_util';\nimport { isInvalidQueryInterval } from '../util/queryInterval_check';\nimport max_metrics from '../lists/max_metrics';\n\nexport class DataSourceInfrastructure {\n  instanaOptions: InstanaOptions;\n  snapshotCache: Cache<Promise<SelectableValue[]>>;\n  snapshotInfoCache: Cache<Promise<SelectableValue[]>>;\n  catalogCache: Cache<Promise<SelectableValue[]>>;\n  typeCache: Cache<Promise<SelectableValue[]>>;\n  timeToLiveSnapshotInfoCache = 4000000; // set to 1,11 hour\n  miscCache: Cache<any>;\n\n  constructor(options: InstanaOptions) {\n    this.instanaOptions = options;\n    this.snapshotCache = new Cache<Promise<SelectableValue[]>>();\n    this.snapshotInfoCache = new Cache<Promise<SelectableValue[]>>();\n    this.catalogCache = new Cache<Promise<SelectableValue[]>>();\n    this.typeCache = new Cache<Promise<SelectableValue[]>>();\n    this.miscCache = new Cache<any>();\n  }\n\n  runQuery(target: InstanaQuery, timeFilter: TimeFilter) {\n    // do not try to execute to big queries\n    if (isInvalidQueryInterval(timeFilter.windowSize, hoursToMs(this.instanaOptions.queryinterval_limit_infra))) {\n      throw new Error(\n        'Limit for maximum selectable windowsize exceeded, max is: ' +\n          this.instanaOptions.queryinterval_limit_infra +\n          ' hours'\n      );\n    }\n\n    if (\n      target.tagFilterExpression ||\n      (target.metricCategory.key === INFRASTRUCTURE_ANALYZE &&\n        target.metric.key &&\n        target.group.key &&\n        target.entity.key)\n    ) {\n      return this.fetchAnalyzeEntities(target, timeFilter);\n    }\n\n    // do not try to retrieve data without selected metric\n    if ((!target.metric || !target.metric.key) && !target.showAllMetrics && !target.freeTextMetrics) {\n      return Promise.resolve(emptyResultData(target.refId));\n    }\n\n    // for every target, fetch snapshots in the selected timeframe that satisfy the lucene query.\n    return this.fetchSnapshotsForTarget(target, timeFilter).then((snapshots) => {\n      if (target.showAllMetrics) {\n        // only available for custom metrics\n        return this.fetchMultipleMetricsForSnapshots(target, snapshots, timeFilter, target.allMetrics);\n      } else if (target.freeTextMetrics) {\n        // only available for custom metrics\n        const metrics = this.extractMetricsFromText(target.freeTextMetrics);\n        return this.fetchMultipleMetricsForSnapshots(target, snapshots, timeFilter, metrics);\n      } else {\n        return this.fetchMetricsForSnapshots(target, snapshots, timeFilter, target.metric);\n      }\n    });\n  }\n\n  extractMetricsFromText(freeText: string): string[] {\n    const metricsString = freeText.replace(/\\s/g, '').split(',');\n    let metrics: string[] = [];\n    _.each(metricsString, (metricString) => metrics.push(JSON.parse('{ \"key\": \"' + metricString + '\"}')));\n\n    if (metrics.length > 4) {\n      metrics = metrics.slice(0, 4); // API supports up to 4 metrics at once\n    }\n\n    return metrics;\n  }\n\n  fetchMultipleMetricsForSnapshots(target: InstanaQuery, snapshots: any, timeFilter: TimeFilter, metrics: any) {\n    const resultPromises: any = [];\n    _.forEach(metrics, (metric) => {\n      resultPromises.push(this.fetchMetricsForSnapshots(target, snapshots, timeFilter, metric));\n    });\n\n    return Promise.all(resultPromises).then((allResults) => {\n      const allMetrics: any = [];\n      allResults.forEach((result: any) => result.forEach((s: any) => allMetrics.push(s)));\n      return allMetrics;\n    });\n  }\n\n  fetchMetricsForSnapshots(target: InstanaQuery, snapshots: any[], timeFilter: TimeFilter, metric: any) {\n    let maxValues: any = [];\n    let batchSize = 30; // API limit\n    let snapshotBatches = _.chunk(snapshots, batchSize);\n    let batchPromises = snapshotBatches.map((batch, batchIndex) => {\n      return this.fetchMetricsForSnapshot(\n        target,\n        batch.map((s) => s.snapshotId),\n        timeFilter,\n        metric\n      ).then((response: any) => {\n        if (!response.data) {\n          return [];\n        }\n\n        let timeseries = this.readTimeSeries(response.data.items, target.aggregation, timeFilter);\n        return _.flatten(\n          response.data.items.map((item: any, index: number) => {\n            return _.map(item.metrics, (value, key) => {\n              let snapshot = batch[index];\n              snapshot.response.pid = snapshot.pid;\n              snapshot.response.name = snapshot.name;\n\n              let label = this.buildLabel(\n                snapshot.response,\n                snapshot.response.entityId.host,\n                target,\n                batchIndex * batchSize + index,\n                metric\n              );\n\n              let result = {\n                target: label,\n                datapoints: _.map(value, (metric) => [metric[1], metric[0]]),\n                refId: target.refId,\n                key: target.stableHash,\n              };\n\n              if (target.displayMaxMetricValue) {\n                const maxValue = this.getMaxMetricValue(target.metric, snapshots);\n                maxValues.push(this.buildMaxMetricTarget(target, timeseries, maxValue, label));\n                result.datapoints = this.convertRelativeToAbsolute(result.datapoints, maxValue);\n              }\n\n              return result;\n            });\n          })\n        );\n      });\n    });\n\n    // Execute all batch requests and flatten results\n    return Promise.all(batchPromises).then((allResults) => _.flatten(allResults));\n  }\n\n  getMaxMetricValue(metric: any, snapshot: any): number {\n    const maxMetrics: any = max_metrics;\n    return snapshot.response.data.data[_.find(maxMetrics, (m: any) => m.key === metric.key).value];\n  }\n\n  buildMaxMetricTarget(target: any, timeseries: any, maxValue: any, resultLabel: any) {\n    let datapoints = _.map(timeseries, (series) => {\n      return [maxValue, series.timestamp];\n    });\n\n    let maxLabel = this.convertMetricNameToMaxLabel(target.metric);\n\n    return {\n      target: resultLabel + ' ' + maxLabel,\n      datapoints: datapoints,\n      refId: target.refId,\n      key: target.stableHash + maxLabel,\n    };\n  }\n\n  convertMetricNameToMaxLabel(metric: any): string {\n    const maxMetrics: any = max_metrics;\n    return _.find(maxMetrics, (m) => m.key === metric.key).label;\n  }\n\n  convertRelativeToAbsolute(datapoints: any, maxValue: any) {\n    return _.map(datapoints, (datapoint) => {\n      if (datapoint[0]) {\n        return [datapoint[0] * maxValue, datapoint[1]];\n      }\n      return [null, datapoint[1]];\n    });\n  }\n\n  getEntityTypes(): Promise<SelectableValue[]> {\n    let entityTypes = this.typeCache.get('entityTypes');\n    if (entityTypes) {\n      return entityTypes;\n    }\n\n    entityTypes = getRequest(this.instanaOptions, '/api/infrastructure-monitoring/catalog/plugins').then(\n      (typesResponse: any) => {\n        const result = typesResponse.data.map((entry: any) => ({\n          key: entry.plugin,\n          label: entry.label,\n        }));\n\n        result.push({\n          key: 'regionEntity',\n          label: 'Region',\n        });\n\n        return _.sortBy(result, 'label');\n      }\n    );\n\n    this.typeCache.put('entityTypes', entityTypes);\n\n    return entityTypes;\n  }\n\n  fetchTypesForTarget(query: InstanaQuery, timeFilter: TimeFilter): any {\n    const fetchSnapshotTypesUrl =\n      `/api/snapshots/types` +\n      `?q=${encodeURIComponent(query.entityQuery)}` +\n      `&from=${timeFilter.from}` +\n      `&to=${timeFilter.to}` +\n      (this.instanaOptions.showOffline ? `` : `&time=${timeFilter.to}`);\n    return getRequest(this.instanaOptions, fetchSnapshotTypesUrl);\n  }\n\n  fetchAvailableMetricsForEntityType(target: InstanaQuery, timeFilter: TimeFilter) {\n    const windowSize = getWindowSize(timeFilter);\n    target.timeInterval = getDefaultChartGranularity(windowSize);\n    const data = {\n      tagFilterExpression: {\n        type: 'EXPRESSION',\n        logicalOperator: 'AND',\n        elements: [],\n      },\n      timeFrame: {\n        to: timeFilter.to,\n        windowSize: atLeastGranularity(windowSize, target.timeInterval.key),\n      },\n      query: '',\n      type: target.entity.key,\n    };\n\n    let metricFortarget = postRequest(this.instanaOptions, '/api/infrastructure-monitoring/analyze/metrics', data).then(\n      (metricResponse: any) => {\n        let result: any[] = [];\n        metricResponse.data.metrics.map((metric: any) =>\n          result.push({\n            key: metric.id,\n            label: metric.label,\n            description: metric.description,\n            aggregations: [\n              { key: 'MAX', label: 'MAX' },\n              { key: 'MEAN', label: 'MEAN' },\n              { key: 'MIN', label: 'MIN' },\n              { key: 'P25', label: 'P25' },\n              { key: 'P50', label: 'P50' },\n              { key: 'P75', label: 'P75' },\n              { key: 'P90', label: 'P90' },\n              { key: 'P95', label: 'P95' },\n              { key: 'P98', label: 'P98' },\n              { key: 'P99', label: 'P99' },\n            ],\n          })\n        );\n\n        return _.sortBy(result, 'label');\n      }\n    );\n    return metricFortarget;\n  }\n\n  fetchAnalyzeEntities(target: InstanaQuery, timeFilter: TimeFilter) {\n    const windowSize = getWindowSize(timeFilter);\n\n    if (!target.timeInterval) {\n      target.timeInterval = getDefaultChartGranularity(windowSize);\n    }\n    if (target.timeInterval.key < 60000) {\n      target.timeInterval.key = 60000;\n    }\n    const metric: any = {\n      metric: target.metric.key,\n      aggregation: target.aggregation && target.aggregation.key ? target.aggregation.key : 'SUM',\n      granularity: target.timeInterval.key,\n      crossSeriesAggregation: 'DISTINCT_COUNT',\n    };\n\n    const tagFilterExpression =\n      target.filters && target.filters.length !== 0\n        ? target.filters\n        : {\n            elements: [],\n            type: 'EXPRESSION',\n            logicalOperator: 'AND',\n          };\n    const payload = {\n      tagFilterExpression: tagFilterExpression,\n      pagination: {\n        retrievalSize: 200,\n      },\n      groupBy: [target.groupbyTagSecondLevelKey],\n      type: target.entity.key,\n      metrics: [metric],\n      timeFrame: {\n        to: timeFilter.to,\n        windowSize: atLeastGranularity(windowSize, metric.granularity),\n      },\n    };\n\n    return postRequest(this.instanaOptions, '/api/infrastructure-monitoring/analyze/entity-groups', payload).then(\n      (res: any) => {\n        let result: any = [];\n\n        if (!res.data && res.errors.length >= 1) {\n          throw new Error(res.errors[0].message || res.errors[0]);\n        }\n\n        res.data.items.forEach((entity: any) => {\n          for (var metric in entity.metrics) {\n            result.push({\n              target: entity.tags[target.groupbyTagSecondLevelKey] + ' - ' + metric,\n              datapoints: entity.metrics[metric]\n                ? entity.metrics[metric].map((datapoint: any) => [datapoint[1], datapoint[0]])\n                : [],\n              refId: target.refId,\n              key: target.stableHash,\n            });\n          }\n        });\n\n        return result;\n      }\n    );\n  }\n\n  getMetricsCatalog(plugin: SelectableValue, metricCategory: number): Promise<SelectableValue[]> {\n    const key = plugin.key + '|' + metricCategory;\n\n    let metrics = this.catalogCache.get(key);\n    if (metrics) {\n      return metrics;\n    }\n\n    const filter = metricCategory === CUSTOM_METRICS ? 'custom' : 'builtin';\n    metrics = getRequest(\n      this.instanaOptions,\n      `/api/infrastructure-monitoring/catalog/metrics/${plugin.key}?filter=${filter}`\n    ).then((catalogResponse: any) =>\n      catalogResponse.data.map((entry: any) => ({\n        key: entry.metricId,\n        label: entry.label,\n        description: entry.metricId,\n        aggregations: [\n          { key: 'MEAN', label: 'MEAN' },\n          { key: 'SUM', label: 'SUM' },\n        ],\n        entityType: entry.pluginId,\n      }))\n    );\n\n    this.catalogCache.put(key, metrics);\n\n    return metrics;\n  }\n\n  async fetchSnapshotsForTarget(target: InstanaQuery, timeFilter: TimeFilter) {\n    const windowSize = getWindowSize(timeFilter);\n    target.timeInterval = getDefaultChartGranularity(windowSize);\n    const query = this.buildQuery(target);\n    const key = this.buildSnapshotCacheKey(query, timeFilter);\n\n    let snapshots = this.snapshotCache.get(key);\n    if (snapshots) {\n      return snapshots;\n    }\n\n    const fetchSnapshotContextsUrl =\n      `/api/infrastructure-monitoring/snapshots` +\n      `?plugin=${target.entityType.key}` +\n      `&size=100` +\n      `&query=${target.entityQuery}` +\n      `&windowSize=${atLeastGranularity(windowSize, target.timeInterval.key)}` +\n      `&to=${timeFilter.to}` +\n      `&offline=${this.instanaOptions.showOffline}`;\n\n    snapshots = getRequest(this.instanaOptions, fetchSnapshotContextsUrl)\n      .then((contextsResponse: any) => {\n        const snapshotIds = contextsResponse.data.items.map(({ snapshotId }: any) => snapshotId);\n\n        if (snapshotIds.length === 0) {\n          return [];\n        }\n\n        const fetchSnapshotsUrl = `/api/infrastructure-monitoring/snapshots`;\n        const payload = {\n          snapshotIds,\n          timeFrame: {\n            to: timeFilter.to,\n            windowSize: atLeastGranularity(windowSize, target.timeInterval.key),\n          },\n        };\n\n        return postRequest(this.instanaOptions, fetchSnapshotsUrl, payload).then((snapshotsResponse: any) => {\n          return snapshotsResponse.data.items.map((snapshot: any) => ({\n            snapshotId: snapshot.snapshotId,\n            host: snapshot.host,\n            pid: _.get(snapshot, ['data', 'pid'], ''),\n            name: _.get(snapshot, ['data', 'name'], ''),\n            response: this.reduceSnapshot(snapshot),\n          }));\n        });\n      })\n      .then((response: any) => _.compact(response)); // Remove undefined items\n\n    this.snapshotCache.put(key, snapshots);\n    return snapshots;\n  }\n\n  buildQuery(target: InstanaQuery): string {\n    // check for entity.pluginId or entity.selfType, because otherwise the backend has a problem with `AND entity.pluginId`\n    if (`${target.entityQuery}`.includes('entity.pluginId:') || `${target.entityQuery}`.includes('entity.selfType:')) {\n      return encodeURIComponent(`${target.entityQuery}`);\n    } else {\n      return encodeURIComponent(`${target.entityQuery} AND entity.pluginId:${target.entityType.key}`);\n    }\n  }\n\n  buildSnapshotCacheKey(query: string, timeFilter: TimeFilter): string {\n    return query + SEPARATOR + getTimeKey(timeFilter);\n  }\n\n  reduceSnapshot(snapshotResponse: any) {\n    // reduce data to used label formatting values\n    snapshotResponse.data = _.pick(snapshotResponse.data, ['id', 'label', 'plugin', 'data']);\n    return snapshotResponse;\n  }\n\n  readTimeSeries(values: any, aggregation: SelectableValue, timeFilter: TimeFilter) {\n    if (aggregation && aggregation.key === 'SUM') {\n      return this.correctMeanToSum(values, timeFilter);\n    }\n    return values;\n  }\n\n  correctMeanToSum(values: any, timeFilter: TimeFilter) {\n    const secondMultiplier = parseInt(getDefaultMetricRollupDuration(timeFilter).key, 10) / 1000;\n    return _.map(values, (value) => {\n      return {\n        value: value.value ? value.value * secondMultiplier : null,\n        timestamp: value.timestamp,\n      };\n    });\n  }\n\n  fetchMetricsForSnapshot(target: InstanaQuery, snapshotIds: string[], timeFilter: TimeFilter, metric: any) {\n    const windowSize = getWindowSize(timeFilter);\n    target.timeInterval = getDefaultChartGranularity(windowSize);\n    const data = {\n      metrics: [metric.key],\n      query: target.entityQuery,\n      plugin: target.entityType.key,\n      rollup: target.timeInterval.key,\n      snapshotIds,\n      timeFrame: {\n        to: timeFilter.to,\n        windowSize: atLeastGranularity(windowSize, target.timeInterval.key),\n      },\n    };\n\n    return postRequest(\n      this.instanaOptions,\n      '/api/infrastructure-monitoring/metrics' + `?offline=${this.instanaOptions.showOffline}`,\n      data\n    );\n  }\n\n  getHostSuffix(host: string): string {\n    if (host) {\n      return ' (on host \"' + host + '\")';\n    }\n    return '';\n  }\n\n  buildLabel(snapshotResponse: any, host: any, target: InstanaQuery, index: any, metric: any): string {\n    if (target.labelFormat) {\n      let label = target.labelFormat;\n      label = _.replace(label, '$label', snapshotResponse.label);\n      label = _.replace(label, '$plugin', snapshotResponse.plugin); // not documented\n      label = _.replace(label, '$snapshot', snapshotResponse.snapshotId); // not documented\n      label = _.replace(label, '$host', host ? host : 'unknown');\n      label = _.replace(label, '$pid', snapshotResponse.pid);\n      label = _.replace(label, '$type', target.entityType.label ?? '');\n      label = _.replace(label, '$name', snapshotResponse.name);\n      label = _.replace(label, '$service', _.get(snapshotResponse, ['data', 'service_name'], ''));\n      if (target.freeTextMetrics) {\n        label = _.replace(label, '$metric', metric.key);\n      } else {\n        label = _.replace(label, '$metric', _.get(target, ['metric', 'key'], 'n/a'));\n      }\n      label = _.replace(label, '$index', index + 1);\n      label = _.replace(label, '$timeShift', target.timeShift);\n      return label;\n    }\n    return target.timeShift && target.timeShiftIsValid\n      ? snapshotResponse.label + this.getHostSuffix(host) + ' - ' + target.timeShift\n      : snapshotResponse.label + this.getHostSuffix(host);\n  }\n}\n","import { atLeastGranularity, getTimeKey, getWindowSize, hoursToMs } from '../util/time_util';\nimport { createTagFilter, readItemMetrics } from '../util/analyze_util';\nimport { getRequest, postRequest } from '../util/request_handler';\n\nimport BeaconGroupBody from '../types/beacon_group_body';\nimport Cache from '../cache';\nimport { InstanaOptions } from '../types/instana_options';\nimport { InstanaQuery } from '../types/instana_query';\nimport { SelectableValue } from '@grafana/data';\nimport TimeFilter from '../types/time_filter';\nimport _ from 'lodash';\nimport { emptyResultData } from '../util/target_util';\nimport { getDefaultChartGranularity } from '../util/rollup_granularity_util';\nimport { isInvalidQueryInterval } from '../util/queryInterval_check';\n\nexport class DataSourceMobileApp {\n  instanaOptions: InstanaOptions;\n  MobileAppCache: Cache<Promise<SelectableValue[]>>;\n  miscCache: Cache<any>;\n\n  constructor(options: InstanaOptions) {\n    this.instanaOptions = options;\n    this.MobileAppCache = new Cache<Promise<SelectableValue[]>>();\n    this.miscCache = new Cache<any>();\n  }\n\n  runQuery(target: InstanaQuery, timeFilter: TimeFilter) {\n    if (\n      isInvalidQueryInterval(\n        timeFilter.windowSize,\n        hoursToMs(this.instanaOptions.queryinterval_limit_mobileapp_metrics)\n      )\n    ) {\n      throw new Error(\n        'Limit for maximum selectable windowsize exceeded, max is: ' +\n          this.instanaOptions.queryinterval_limit_mobileapp_metrics +\n          ' hours'\n      );\n    }\n\n    // avoid invalid calls\n    if (\n      !target ||\n      !target.metric ||\n      !target.metric.key ||\n      !target.group ||\n      !target.group.key ||\n      !target.entity ||\n      !target.entity.key\n    ) {\n      return Promise.resolve(emptyResultData(target.refId));\n    }\n\n    return this.fetchAnalyzeMetricsForMobileapp(target, timeFilter).then((response: any) => {\n      return readItemMetrics(target, response, this.buildAnalyzeMobileAppLabel);\n    });\n  }\n\n  getMobileapp(timeFilter: TimeFilter) {\n    const key = getTimeKey(timeFilter);\n    let mobileapps = this.MobileAppCache.get(key);\n    if (mobileapps) {\n      return mobileapps;\n    }\n\n    mobileapps = getRequest(this.instanaOptions, '/api/mobile-app-monitoring/config').then((mobileappsResponse: any) =>\n      mobileappsResponse.data.map((mobile: any) => ({\n        key: mobile.name, // use name as key because a mobileapp name can only be configured once\n        label: mobile.name,\n      }))\n    );\n    this.MobileAppCache.put(key, mobileapps, 600000);\n\n    return mobileapps;\n  }\n\n  getMobileappTags() {\n    let mobileappTags = this.miscCache.get('mobileappTags');\n    if (mobileappTags) {\n      return mobileappTags;\n    }\n\n    mobileappTags = getRequest(this.instanaOptions, '/api/mobile-app-monitoring/catalog/tags').then(\n      (tagsResponse: any) =>\n        tagsResponse.data.map((entry: any) => ({\n          key: entry.name,\n          label: entry.name,\n          type: entry.type,\n        }))\n    );\n    this.miscCache.put('mobileappTags', mobileappTags);\n\n    return mobileappTags;\n  }\n\n  getMobileappMetricsCatalog() {\n    let mobileappCatalog = this.miscCache.get('mobileappCatalog');\n    if (mobileappCatalog) {\n      return mobileappCatalog;\n    }\n\n    mobileappCatalog = getRequest(this.instanaOptions, '/api/mobile-app-monitoring/catalog/metrics').then(\n      (catalogResponse: any) =>\n        catalogResponse.data.map((entry: any) => {\n          return {\n            key: entry.metricId,\n            label: entry.label,\n            aggregations: entry.aggregations ? this.transformAggregations(entry.aggregations.sort()) : [],\n            beaconTypes: entry.beaconTypes\n              ? this.transformBeaconTypes(entry.beaconTypes)\n              : ['sessionStart', 'crash', 'httpRequest', 'custom', 'viewChange'],\n          };\n        })\n    );\n    this.miscCache.put('mobileappCatalog', mobileappCatalog);\n\n    return mobileappCatalog;\n  }\n\n  transformBeaconTypes(beaconTypes: string[]) {\n    if (beaconTypes.includes('sessionStart')) {\n      let result = _.remove(beaconTypes, (type) => type !== 'sessionStart');\n      result.push('session_start');\n      return result;\n    }\n\n    if (beaconTypes.includes('httpRequest')) {\n      let result = _.remove(beaconTypes, (type) => type !== 'httpRequest');\n      result.push('http_request');\n      return result;\n    }\n\n    if (beaconTypes.includes('viewChange')) {\n      let result = _.remove(beaconTypes, (type) => type !== 'viewChange');\n      result.push('view_change');\n      return result;\n    }\n\n    return beaconTypes;\n  }\n\n  transformAggregations(aggregations: string[]) {\n    return _.map(aggregations, (a) => {\n      return {\n        key: a,\n        label: a,\n      };\n    });\n  }\n\n  private fetchAnalyzeMetricsForMobileapp(target: InstanaQuery, timeFilter: TimeFilter) {\n    const windowSize = getWindowSize(timeFilter);\n    const tagFilters = [\n      {\n        name: 'mobileBeacon.mobileApp.name',\n        operator: 'EQUALS',\n        value: target.entity.key,\n      },\n    ];\n\n    _.forEach(target.filters, (filter) => {\n      if (filter.isValid) {\n        tagFilters.push(createTagFilter(filter));\n      }\n    });\n\n    if (!target.timeInterval) {\n      target.timeInterval = getDefaultChartGranularity(windowSize);\n    }\n    const metric: any = {\n      metric: target.metric.key,\n      aggregation: target.aggregation.key ? target.aggregation.key : 'SUM',\n      granularity: target.timeInterval.key,\n    };\n\n    const group: any = {\n      groupbyTag: target.group.key,\n    };\n    if (target.group.type === 'KEY_VALUE_PAIR' && target.groupbyTagSecondLevelKey) {\n      group['groupbyTagSecondLevelKey'] = target.groupbyTagSecondLevelKey;\n    }\n\n    const data: BeaconGroupBody = {\n      group: group,\n      timeFrame: {\n        to: timeFilter.to,\n        windowSize: atLeastGranularity(windowSize, metric.granularity),\n      },\n      tagFilters: tagFilters,\n      type: target.entityType.key,\n      metrics: [metric],\n    };\n    return postRequest(\n      this.instanaOptions,\n      '/api/mobile-app-monitoring/analyze/beacon-groups?fillTimeSeries=true',\n      data,\n      false,\n      5\n    );\n  }\n\n  buildAnalyzeMobileAppLabel(target: InstanaQuery, item: any, key: string, index: number): string {\n    if (target.labelFormat) {\n      let label = target.labelFormat;\n      label = _.replace(label, '$label', item.name);\n      label = _.replace(label, '$mobileapp', target.entity.label!);\n      label = _.replace(label, '$type', target.entityType.label!);\n      label = _.replace(label, '$metric', target.metric.label!);\n      label = _.replace(label, '$key', key);\n      label = _.replace(label, '$index', '' + index + 1);\n      label = _.replace(label, '$timeShift', target.timeShift);\n      return label;\n    }\n    return target.timeShift && target.timeShiftIsValid\n      ? item.name + ' (' + target.entity.label + ')' + ' - ' + key + ' - ' + target.timeShift\n      : item.name + ' (' + target.entity.label + ')' + ' - ' + key;\n  }\n}\n","import { SelectableValue } from '@grafana/data';\nimport { InstanaOptions } from '../types/instana_options';\nimport Cache from '../cache';\nimport _ from 'lodash';\nimport TimeFilter from '../types/time_filter';\nimport { getTimeKey, getWindowSize, atLeastGranularity } from '../util/time_util';\nimport { getRequest, postRequest } from '../util/request_handler';\nimport { getDefaultChartGranularity } from '../util/rollup_granularity_util';\nimport { InstanaQuery } from '../types/instana_query';\nimport { PAGINATION_LIMIT } from '../GlobalVariables';\nimport { emptyResultData } from '../util/target_util';\n\nexport class DataSourceService {\n  instanaOptions: InstanaOptions;\n  servicesCache: Cache<Promise<SelectableValue[]>>;\n\n  constructor(options: InstanaOptions) {\n    this.instanaOptions = options;\n    this.servicesCache = new Cache<Promise<SelectableValue[]>>();\n  }\n\n  getServicesOfApplication(target: InstanaQuery, timeFilter: TimeFilter) {\n    let applicationId = '';\n    if (target.entity && target.entity.key) {\n      applicationId = target.entity.key;\n    }\n\n    const key = getTimeKey(timeFilter) + applicationId + target.applicationBoundaryScope;\n    let services = this.servicesCache.get(key);\n    if (services) {\n      return services;\n    }\n\n    const windowSize = getWindowSize(timeFilter);\n    let page = 1;\n    let pageSize = 200;\n\n    services = this.paginateServices(\n      [],\n      applicationId,\n      windowSize,\n      timeFilter.to,\n      target.applicationBoundaryScope,\n      page,\n      pageSize,\n      PAGINATION_LIMIT\n    ).then((response: any) => {\n      let allResults = _.flattenDeep(\n        _.map(response, (pageSet) => {\n          return pageSet.items;\n        })\n      );\n\n      return _.orderBy(\n        _.compact(allResults).map((entry) => {\n          return {\n            key: entry.id,\n            label: entry.label,\n          };\n        }),\n        [(service) => service.label.toLowerCase()],\n        ['asc']\n      );\n    });\n\n    this.servicesCache.put(key, services, 600000);\n    return services;\n  }\n\n  paginateServices(\n    results: any,\n    applicationId: string,\n    windowSize: number,\n    to: number,\n    applicationBoundaryScope: string,\n    page: number,\n    pageSize: number,\n    pageLimit: number\n  ) {\n    if (page > pageLimit) {\n      return results;\n    }\n\n    let queryParameters = 'windowSize=' + windowSize + '&to=' + to + '&page=' + page + '&pageSize=' + pageSize;\n    if (applicationBoundaryScope === 'ALL' || applicationBoundaryScope === 'INBOUND') {\n      queryParameters += '&applicationBoundaryScope=' + applicationBoundaryScope;\n    }\n\n    let url =\n      '/api/application-monitoring/applications;id=' +\n      (applicationId ? applicationId : '') +\n      '/services?' +\n      queryParameters;\n\n    return getRequest(this.instanaOptions, url).then((response: any) => {\n      results.push(response.data);\n      if (page * pageSize < response.data.totalHits) {\n        page++;\n        return this.paginateServices(\n          results,\n          applicationId,\n          windowSize,\n          to,\n          applicationBoundaryScope,\n          page,\n          pageSize,\n          pageLimit\n        );\n      } else {\n        return results;\n      }\n    });\n  }\n\n  fetchServiceMetrics(target: InstanaQuery, timeFilter: TimeFilter) {\n    // avoid invalid calls\n    if (!target || !target.metric || !target.metric.key) {\n      return Promise.resolve(emptyResultData(target.refId));\n    }\n\n    const windowSize = getWindowSize(timeFilter);\n\n    if (!target.timeInterval) {\n      target.timeInterval = getDefaultChartGranularity(windowSize);\n    }\n\n    const metric = {\n      metric: target.metric.key,\n      aggregation: target.aggregation && target.aggregation.key ? target.aggregation.key : 'SUM',\n      granularity: target.timeInterval.key,\n    };\n\n    const data: any = {\n      timeFrame: {\n        to: timeFilter.to,\n        windowSize: atLeastGranularity(windowSize, metric.granularity),\n      },\n      metrics: [metric],\n    };\n\n    if (target.entity && target.entity.key) {\n      data['applicationId'] = target.entity.key;\n      // only set applicationBoundaryScope when an application is selected\n      data['applicationBoundaryScope'] = target.applicationBoundaryScope;\n    }\n\n    if (target.service && target.service.key) {\n      data['serviceId'] = target.service.key;\n    }\n\n    return postRequest(this.instanaOptions, '/api/application-monitoring/metrics/services?fillTimeSeries=true', data);\n  }\n\n  buildServiceMetricLabel(target: InstanaQuery, item: any, key: string, index: number): string {\n    if (target.labelFormat) {\n      let label = target.labelFormat;\n      label = _.replace(label, '$label', item.service.label);\n      label = _.replace(label, '$service', target.service.label!);\n      label = _.replace(label, '$application', target.entity.label!);\n      label = _.replace(label, '$metric', target.metric.label!);\n      label = _.replace(label, '$key', key);\n      label = _.replace(label, '$index', index + 1 + '');\n      label = _.replace(label, '$timeShift', target.timeShift);\n      return label;\n    }\n\n    if (target.service.key === null) {\n      return target.timeShift\n        ? item.service.label + ' - ' + key + ' - ' + target.timeShift\n        : item.service.label + ' - ' + key;\n    }\n\n    return target.timeShift && target.timeShiftIsValid\n      ? item.service.label + ' (' + target.service.label + ')' + ' - ' + key + ' - ' + target.timeShift\n      : item.service.label + ' (' + target.service.label + ')' + ' - ' + key;\n  }\n}\n","import { SelectableValue, TimeSeries, TimeSeriesPoints } from '@grafana/data';\nimport { buildTimeSeries, emptyResultData } from '../util/target_util';\nimport { InstanaOptions } from '../types/instana_options';\nimport { InstanaQuery } from '../types/instana_query';\nimport { getRequest } from '../util/request_handler';\nimport { getWindowSize } from '../util/time_util';\nimport TimeFilter from '../types/time_filter';\nimport Cache from '../cache';\nimport _ from 'lodash';\n\nexport class DataSourceSlo {\n  sliReportsCache: Cache<Promise<SelectableValue[]>>;\n  instanaOptions: InstanaOptions;\n\n  constructor(options: InstanaOptions) {\n    this.instanaOptions = options;\n    this.sliReportsCache = new Cache<Promise<SelectableValue[]>>();\n  }\n\n  getConfiguredSLIs(): Promise<SelectableValue[]> {\n    let sliReports = this.sliReportsCache.get('sliReports');\n    if (sliReports) {\n      return sliReports;\n    }\n\n    sliReports = getRequest(this.instanaOptions, '/api/settings/sli').then((response: any) =>\n      _.map(response.data, (r) => {\n        return {\n          key: r.id,\n          label: r.sliName,\n        };\n      })\n    );\n\n    this.sliReportsCache.put('sliReports', sliReports);\n    return sliReports;\n  }\n\n  runQuery(target: InstanaQuery, timeFilter: TimeFilter) {\n    //avoid involid calls\n    if (\n      !target ||\n      !target.sloReport ||\n      !target.sloReport.key ||\n      !target.sloSpecific ||\n      !target.sloSpecific.key ||\n      !target.sloValue\n    ) {\n      return Promise.resolve(emptyResultData(target.refId));\n    }\n\n    let endpoint =\n      '/api/sli/report/' +\n      target.sloReport.key +\n      '?from=' +\n      timeFilter.from +\n      '&to=' +\n      timeFilter.to +\n      '&slo=' +\n      target.sloValue;\n    return getRequest(this.instanaOptions, endpoint).then((response: any) => {\n      return this.extractSpecificValueFromSLI(target, response.data, timeFilter);\n    });\n  }\n\n  extractSpecificValueFromSLI(target: InstanaQuery, sliResult: any, timeFilter: TimeFilter) {\n    if (target.sloSpecific.key === 'SLI') {\n      return [\n        buildTimeSeries(target.sloSpecific.label!, target.refId, this.buildResultArray(sliResult.sli, timeFilter.to)),\n      ];\n    } else if (target.sloSpecific.key === 'Remaining Error Budget') {\n      return [\n        buildTimeSeries(\n          target.sloSpecific.label!,\n          target.refId,\n          this.buildResultArray(sliResult.errorBudgetRemaining, timeFilter.to)\n        ),\n      ];\n    } else if (target.sloSpecific.key === 'Timeseries') {\n      return this.buildViolationDistributionTimeSeries(target, sliResult.violationDistribution, timeFilter);\n    }\n\n    return [emptyResultData(target.refId)];\n  }\n\n  buildResultArray(result: number, timestamp: number): TimeSeriesPoints {\n    return [[result, timestamp]];\n  }\n\n  buildViolationDistributionTimeSeries(target: InstanaQuery, series: any, timeFilter: TimeFilter): TimeSeries[] {\n    if (!series) {\n      // Handle the case where series is undefined or null\n      return [];\n    }\n    const greens: any[] = [];\n    const reds: any[] = [];\n    const greys: any[] = [];\n\n    let granularity = getWindowSize(timeFilter) / Object.keys(series).length;\n    _.forEach(series, (value: number, index: number) => {\n      if (value === 1) {\n        greens.push([1, timeFilter.from + index * granularity]);\n      } else if (value === 0) {\n        greys.push([1, timeFilter.from + index * granularity]);\n      } else if (value === -1) {\n        reds.push([1, timeFilter.from + index * granularity]);\n      }\n    });\n\n    const result: TimeSeries[] = [];\n    result.push(buildTimeSeries('No violation', target.refId, greens));\n    result.push(buildTimeSeries('Violation', target.refId, reds));\n    result.push(buildTimeSeries('No data', target.refId, greys));\n\n    return result;\n  }\n}\n","import { SelectableValue, TimeSeries, TimeSeriesPoints } from '@grafana/data';\nimport { buildTimeSeries, emptyResultData } from '../util/target_util';\n\nimport Cache from '../cache';\nimport { InstanaOptions } from '../types/instana_options';\nimport { InstanaQuery } from '../types/instana_query';\nimport TimeFilter from '../types/time_filter';\nimport _ from 'lodash';\nimport { getRequest } from '../util/request_handler';\nimport { getWindowSize } from '../util/time_util';\n\nexport class DataSourceSlo2 {\n  sloReportsCache: Cache<Promise<SelectableValue[]>>;\n  instanaOptions: InstanaOptions;\n\n  constructor(options: InstanaOptions) {\n    this.instanaOptions = options;\n    this.sloReportsCache = new Cache<Promise<SelectableValue[]>>();\n  }\n\n  getSLOConfigurations(): Promise<SelectableValue[]> {\n    let sloReports = this.sloReportsCache.get('sloReports');\n    if (sloReports) {\n      return sloReports;\n    }\n\n    sloReports = getRequest(this.instanaOptions, '/api/settings/slo').then((response: any) =>\n      _.map(response.data.items, (r) => {\n        return {\n          key: r.id,\n          label: r.name,\n        };\n      })\n    );\n\n    this.sloReportsCache.put('sloReports', sloReports);\n    return sloReports;\n  }\n\n  runQuery(target: InstanaQuery, timeFilter: TimeFilter) {\n    // avoid invalid calls\n    if (!target || !target.slo2Report || !target.slo2Report.key || !target.slo2Specific || !target.slo2Specific.key) {\n      return Promise.resolve(emptyResultData(target.refId));\n    }\n\n    let endpoint =\n      '/api/slo/report/' +\n      target.slo2Report.key +\n      '?from=' +\n      Math.floor(timeFilter.from / 6000) * 6000 +\n      '&to=' +\n      Math.floor(timeFilter.to / 6000) * 6000;\n\n    return getRequest(this.instanaOptions, endpoint).then((response: any) => {\n      return this.extractSpecificValueFromSLI(target, response.data, timeFilter);\n    });\n  }\n\n  extractSpecificValueFromSLI(target: InstanaQuery, sloResult: any, timeFilter: TimeFilter) {\n    if (target.slo2Specific.key === 'Status') {\n      return [\n        buildTimeSeries(target.slo2Specific.label!, target.refId, this.buildResultArray(sloResult.sli, timeFilter.to)),\n      ];\n    } else if (target.slo2Specific.key === 'Service Level Target') {\n      return [\n        buildTimeSeries(target.slo2Specific.label!, target.refId, this.buildResultArray(sloResult.slo, timeFilter.to)),\n      ];\n    } else if (target.slo2Specific.key === 'Total Error Budget') {\n      return [\n        buildTimeSeries(\n          target.slo2Specific.label!,\n          target.refId,\n          this.buildResultArray(sloResult.totalErrorBudget, timeFilter.to)\n        ),\n      ];\n    } else if (target.slo2Specific.key === 'Remaining Error Budget') {\n      return [\n        buildTimeSeries(\n          target.slo2Specific.label!,\n          target.refId,\n          this.buildResultArray(sloResult.errorBudgetRemaining, timeFilter.to)\n        ),\n      ];\n    } else if (target.slo2Specific.key === 'Spended Error Budget') {\n      return [\n        buildTimeSeries(\n          target.slo2Specific.label!,\n          target.refId,\n          this.buildResultArray(sloResult.errorBudgetSpent, timeFilter.to)\n        ),\n      ];\n    } else if (target.slo2Specific.key === 'Timeseries') {\n      return this.buildViolationDistributionTimeSeries(target, sloResult.violationDistribution, timeFilter);\n    } else if (target.slo2Specific.key === 'Error Chart') {\n      return this.buildChart('Error budget spent', target, sloResult.errorChart, timeFilter);\n    } else if (target.slo2Specific.key === 'Error Accumulation Chart') {\n      return this.buildChart('Error Accumulation', target, sloResult.errorAccumulationChart, timeFilter);\n    } else if (target.slo2Specific.key === 'Error Budget Remain Chart') {\n      return this.buildChart('Error Budget Remain Chart', target, sloResult.errorBudgetRemainChart, timeFilter);\n    }\n\n    return [emptyResultData(target.refId)];\n  }\n\n  buildResultArray(result: number, timestamp: number): TimeSeriesPoints {\n    return [[result, timestamp]];\n  }\n\n  buildViolationDistributionTimeSeries(target: InstanaQuery, series: any, timeFilter: TimeFilter): TimeSeries[] {\n    const greens: any[] = [];\n    const reds: any[] = [];\n    const greys: any[] = [];\n\n    let granularity = getWindowSize(timeFilter) / Object.keys(series).length;\n    let startTS = Math.floor(timeFilter.from / granularity) * granularity;\n    _.forEach(series, (value: number, index: number) => {\n      if (value === 1) {\n        greens.push([1, startTS + index * granularity]);\n      } else if (value === 0) {\n        greys.push([1, startTS + index * granularity]);\n      } else if (value === -1) {\n        reds.push([1, startTS + index * granularity]);\n      }\n    });\n\n    const result: TimeSeries[] = [];\n    result.push(buildTimeSeries('No violation', target.refId, greens));\n    result.push(buildTimeSeries('Violation', target.refId, reds));\n    result.push(buildTimeSeries('No data', target.refId, greys));\n\n    return result;\n  }\n\n  buildChart(name: any, target: InstanaQuery, series: any, timeFilter: TimeFilter): TimeSeries[] {\n    const greens: any[] = [];\n\n    let granularity = getWindowSize(timeFilter) / Object.keys(series).length;\n    let startTS = Math.floor(timeFilter.from / granularity) * granularity;\n    _.forEach(series, (value: number, index: number) => {\n      greens.push([value, startTS + index * granularity]);\n    });\n\n    const result: TimeSeries[] = [];\n    result.push(buildTimeSeries(name, target.refId, greens));\n\n    return result;\n  }\n}\n","import { SelectableValue } from '@grafana/data';\nimport { InstanaOptions } from '../types/instana_options';\nimport Cache from '../cache';\nimport _ from 'lodash';\nimport TimeFilter from '../types/time_filter';\nimport { getTimeKey, getWindowSize, hoursToMs, atLeastGranularity } from '../util/time_util';\nimport BeaconGroupBody from '../types/beacon_group_body';\nimport { getRequest, postRequest } from '../util/request_handler';\nimport { getDefaultChartGranularity } from '../util/rollup_granularity_util';\nimport { InstanaQuery } from '../types/instana_query';\nimport { createTagFilter, readItemMetrics } from '../util/analyze_util';\nimport { emptyResultData } from '../util/target_util';\nimport { isInvalidQueryInterval } from '../util/queryInterval_check';\n\nexport class DataSourceWebsite {\n  instanaOptions: InstanaOptions;\n  websitesCache: Cache<Promise<SelectableValue[]>>;\n  miscCache: Cache<any>;\n\n  constructor(options: InstanaOptions) {\n    this.instanaOptions = options;\n    this.websitesCache = new Cache<Promise<SelectableValue[]>>();\n    this.miscCache = new Cache<any>();\n  }\n\n  runQuery(target: InstanaQuery, timeFilter: TimeFilter) {\n    if (\n      isInvalidQueryInterval(timeFilter.windowSize, hoursToMs(this.instanaOptions.queryinterval_limit_website_metrics))\n    ) {\n      throw new Error(\n        'Limit for maximum selectable windowsize exceeded, max is: ' +\n          this.instanaOptions.queryinterval_limit_website_metrics +\n          ' hours'\n      );\n    }\n\n    // avoid invalid calls\n    if (\n      !target ||\n      !target.metric ||\n      !target.metric.key ||\n      !target.group ||\n      !target.group.key ||\n      !target.entity ||\n      !target.entity.key\n    ) {\n      return Promise.resolve(emptyResultData(target.refId));\n    }\n\n    return this.fetchAnalyzeMetricsForWebsite(target, timeFilter).then((response: any) => {\n      return readItemMetrics(target, response, this.buildAnalyzeWebsiteLabel);\n    });\n  }\n\n  getWebsites(timeFilter: TimeFilter) {\n    const key = getTimeKey(timeFilter);\n    let websites = this.websitesCache.get(key);\n    if (websites) {\n      return websites;\n    }\n\n    websites = getRequest(this.instanaOptions, '/api/website-monitoring/config').then((websitesResponse: any) =>\n      websitesResponse.data.map((website: any) => ({\n        key: website.name, // use name as key because a website name can only be configured once\n        label: website.name,\n      }))\n    );\n    this.websitesCache.put(key, websites, 600000);\n\n    return websites;\n  }\n\n  getWebsiteTags() {\n    let websiteTags = this.miscCache.get('websiteTags');\n    if (websiteTags) {\n      return websiteTags;\n    }\n\n    websiteTags = getRequest(this.instanaOptions, '/api/website-monitoring/catalog/tags').then((tagsResponse: any) =>\n      tagsResponse.data.map((entry: any) => ({\n        key: entry.name,\n        label: entry.name,\n        type: entry.type,\n      }))\n    );\n    this.miscCache.put('websiteTags', websiteTags);\n\n    return websiteTags;\n  }\n\n  getWebsiteMetricsCatalog() {\n    let websiteCatalog = this.miscCache.get('websiteCatalog');\n    if (websiteCatalog) {\n      return websiteCatalog;\n    }\n\n    websiteCatalog = getRequest(this.instanaOptions, '/api/website-monitoring/catalog/metrics').then(\n      (catalogResponse: any) =>\n        catalogResponse.data.map((entry: any) => {\n          return {\n            key: entry.metricId,\n            label: entry.label,\n            aggregations: entry.aggregations ? this.transformAggregations(entry.aggregations.sort()) : [],\n            beaconTypes: entry.beaconTypes\n              ? this.transformBeaconTypes(entry.beaconTypes)\n              : ['pageLoad', 'resourceLoad', 'httpRequest', 'error', 'custom', 'pageChange'],\n          };\n        })\n    );\n    this.miscCache.put('websiteCatalog', websiteCatalog);\n\n    return websiteCatalog;\n  }\n\n  transformBeaconTypes(beaconTypes: string[]) {\n    if (beaconTypes.includes('pageChange')) {\n      let result = _.remove(beaconTypes, (type) => type !== 'pageChange');\n      result.push('page_change');\n      return result;\n    }\n\n    return beaconTypes;\n  }\n\n  transformAggregations(aggregations: string[]) {\n    return _.map(aggregations, (a) => {\n      return {\n        key: a,\n        label: a,\n      };\n    });\n  }\n\n  private fetchAnalyzeMetricsForWebsite(target: InstanaQuery, timeFilter: TimeFilter) {\n    const windowSize = getWindowSize(timeFilter);\n    const tagFilters = [\n      {\n        name: 'beacon.website.name',\n        operator: 'EQUALS',\n        value: target.entity.key,\n      },\n    ];\n\n    _.forEach(target.filters, (filter) => {\n      if (filter.isValid) {\n        tagFilters.push(createTagFilter(filter));\n      }\n    });\n\n    if (!target.timeInterval) {\n      target.timeInterval = getDefaultChartGranularity(windowSize);\n    }\n    const metric: any = {\n      metric: target.metric.key,\n      aggregation: target.aggregation.key ? target.aggregation.key : 'SUM',\n      granularity: target.timeInterval.key,\n    };\n\n    const group: any = {\n      groupbyTag: target.group.key,\n    };\n    if (target.group.type === 'KEY_VALUE_PAIR' && target.groupbyTagSecondLevelKey) {\n      group['groupbyTagSecondLevelKey'] = target.groupbyTagSecondLevelKey;\n    }\n\n    const data: BeaconGroupBody = {\n      group: group,\n      timeFrame: {\n        to: timeFilter.to,\n        windowSize: atLeastGranularity(windowSize, metric.granularity),\n      },\n      tagFilters: tagFilters,\n      type: target.entityType.key,\n      metrics: [metric],\n    };\n    return postRequest(\n      this.instanaOptions,\n      '/api/website-monitoring/analyze/beacon-groups?fillTimeSeries=true',\n      data,\n      false,\n      5\n    );\n  }\n\n  buildAnalyzeWebsiteLabel(target: InstanaQuery, item: any, key: string, index: number): string {\n    if (target.labelFormat) {\n      let label = target.labelFormat;\n      label = _.replace(label, '$label', item.name);\n      label = _.replace(label, '$website', target.entity.label!);\n      label = _.replace(label, '$type', target.entityType.label!);\n      label = _.replace(label, '$metric', target.metric.label!);\n      label = _.replace(label, '$key', key);\n      label = _.replace(label, '$index', '' + index + 1);\n      label = _.replace(label, '$timeShift', target.timeShift);\n      return label;\n    }\n    return target.timeShift && target.timeShiftIsValid\n      ? item.name + ' (' + target.entity.label + ')' + ' - ' + key + ' - ' + target.timeShift\n      : item.name + ' (' + target.entity.label + ')' + ' - ' + key;\n  }\n}\n","import { getRequest, postRequest } from '../util/request_handler';\nimport Cache from '../cache';\nimport { InstanaOptions } from '../types/instana_options';\nimport { SelectableValue } from '@grafana/data';\nimport { InstanaQuery } from 'types/instana_query';\nimport TimeFilter from 'types/time_filter';\nimport { atLeastGranularity, getWindowSize } from 'util/time_util';\nimport { emptyResultData } from 'util/target_util';\nimport { getDefaultChartGranularity } from 'util/rollup_granularity_util';\n\nexport class DataSourceSyntheticMonitoring {\n  instanaOptions: InstanaOptions;\n  SyntheticMonitoringCache: Cache<Promise<SelectableValue[]>>;\n  miscCache: Cache<any>;\n\n  constructor(options: InstanaOptions) {\n    this.instanaOptions = options;\n    this.SyntheticMonitoringCache = new Cache<Promise<SelectableValue[]>>();\n    this.miscCache = new Cache<any>();\n  }\n\n  runQuery(target: InstanaQuery, timeFilter: TimeFilter) {\n    if (!target?.metric?.key && target.testType?.value === 'metric') {\n      console.warn('Missing required metric field for test type = metric:', target);\n      return Promise.resolve(emptyResultData(target.refId));\n    }\n\n    if (!target?.entity?.value) {\n      console.warn('Missing test selection (entity)', target);\n      return Promise.resolve(emptyResultData(target.refId));\n    }\n\n    if (target.testType?.value === 'metric') {\n      return this.fetchMetricsForSyntheticMonitoring(target, timeFilter).then((response: any) => {\n        const result: any[] = [];\n\n        if (!response?.data?.testResult) {\n          console.warn('Invalid or empty results data:', response);\n          return emptyResultData(target.refId);\n        }\n\n        response.data.testResult.forEach((item: any) => {\n          const testName = item.testName ?? 'UnknownTest';\n          const location = item.locationId?.[0] ?? 'UnknownLocation';\n\n          if (Array.isArray(item.metrics)) {\n            item.metrics.forEach((metricObj: any) => {\n              const metricName = Object.keys(metricObj)[0];\n              const metricValue = metricObj[metricName];\n              const datapoints = [[metricValue, Date.now()]];\n\n              result.push({\n                target: `${testName} (${location}) - ${metricName}`,\n                datapoints,\n                refId: target.refId,\n                key: target.stableHash,\n              });\n            });\n          }\n        });\n\n        return result;\n      });\n    }\n\n    return this.fetchResultsForSyntheticMonitoring(target, timeFilter).then((response: any) => {\n      if (!response?.data?.items || !Array.isArray(response.data.items)) {\n        console.warn('Invalid or empty results data:', response);\n        return emptyResultData(target.refId);\n      }\n\n      const aggregatedMetrics: Record<string, Array<[number, number]>> = {};\n      let testName = 'UnknownTest';\n      let locationLabel = 'UnknownLocation';\n\n      response.data.items.forEach((item: any) => {\n        const props = item.testResultCommonProperties ?? {};\n        testName = props.testName ?? testName;\n        locationLabel = props.locationDisplayLabel ?? props.locationId ?? locationLabel;\n\n        const metrics = item.metrics ?? {};\n\n        Object.entries(metrics).forEach(([metricName, dataPoints]: [string, any]) => {\n          const points: Array<[number, number]> = Array.isArray(dataPoints)\n            ? dataPoints.filter(\n                (entry): entry is [number, number] =>\n                  Array.isArray(entry) &&\n                  entry.length === 2 &&\n                  typeof entry[0] === 'number' &&\n                  typeof entry[1] === 'number'\n              )\n            : [];\n\n          if (!aggregatedMetrics[metricName]) {\n            aggregatedMetrics[metricName] = [];\n          }\n\n          aggregatedMetrics[metricName].push(...points);\n        });\n      });\n\n      const result = Object.entries(aggregatedMetrics).map(([metricName, datapoints]) => ({\n        target: `${testName} (${locationLabel}) - ${metricName}`,\n        datapoints: datapoints.map(([ts, val]) => [val, ts]), // [value, timestamp]\n        refId: target.refId,\n        key: target.stableHash,\n      }));\n\n      return result;\n    });\n  }\n\n  getSyntheticMonitoringtests() {\n    let tests = this.miscCache.get('SyntheticMonitoringtests');\n    if (tests) {\n      return tests;\n    }\n\n    tests = getRequest(this.instanaOptions, '/api/synthetics/settings/tests').then((response: any) =>\n      response.data.map((entry: any) => ({\n        key: entry.label,\n        label: entry.label,\n        testId: entry.id,\n      }))\n    );\n    this.miscCache.put('SyntheticMonitoringtests', tests);\n    return tests;\n  }\n\n  getSyntheticMonitoringMetricsCatalog() {\n    let catalog = this.miscCache.get('SyntheticMonitoringMetricsCatalog');\n    if (catalog) {\n      return catalog;\n    }\n\n    catalog = getRequest(this.instanaOptions, '/api/synthetics/catalog/metrics').then((response: any) =>\n      response.data.map((entry: any) => ({\n        key: entry.metricId,\n        label: entry.label,\n        aggregations: entry.aggregations.map((agg: string) => ({ key: agg, label: agg })),\n        formatter: entry.formatter,\n      }))\n    );\n\n    this.miscCache.put('SyntheticMonitoringMetricsCatalog', catalog);\n    return catalog;\n  }\n\n  fetchMetricsForSyntheticMonitoring(target: InstanaQuery, timeFilter: TimeFilter) {\n    const testId = target.testId;\n    const windowSize = getWindowSize(timeFilter);\n\n    if (!target.timeInterval) {\n      target.timeInterval = getDefaultChartGranularity(windowSize);\n    }\n\n    const metric = {\n      metric: target?.metric?.key,\n      aggregation: target?.aggregation?.key || 'SUM',\n      granularity: target?.timeInterval?.key,\n    };\n\n    const tagFilterExpression = {\n      type: 'EXPRESSION',\n      elements: [\n        {\n          name: 'synthetic.testId',\n          operator: 'EQUALS',\n          value: testId,\n        },\n      ],\n      logicalOperator: 'AND',\n    };\n\n    const data = {\n      metrics: [metric],\n      tagFilterExpression,\n      timeFrame: {\n        to: timeFilter.to,\n        windowSize: atLeastGranularity(windowSize, metric.granularity),\n      },\n    };\n\n    return postRequest(this.instanaOptions, '/api/synthetics/results', data);\n  }\n\n  fetchResultsForSyntheticMonitoring(target: InstanaQuery, timeFilter: TimeFilter) {\n    const testId = target.testId;\n    const windowSize = getWindowSize(timeFilter);\n\n    if (!target.timeInterval) {\n      target.timeInterval = getDefaultChartGranularity(windowSize);\n    }\n\n    const tagFilterExpression = {\n      type: 'EXPRESSION',\n      elements: [\n        {\n          name: 'synthetic.testId',\n          operator: 'EQUALS',\n          value: testId,\n        },\n      ],\n      logicalOperator: 'AND',\n    };\n\n    const granularity = target?.timeInterval?.key;\n\n    const data = {\n      syntheticMetrics: [target?.metric?.key],\n      tagFilterExpression,\n      timeFrame: {\n        to: timeFilter.to,\n        windowSize: atLeastGranularity(windowSize, granularity),\n      },\n    };\n\n    return postRequest(this.instanaOptions, '/api/synthetics/results/list', data);\n  }\n}\n","/**\n * Do not remove the commented stuff.\n */\nexport default [\n  {\n    label: 'Infrastructure built-in metrics',\n    key: 0,\n  },\n  {\n    label: 'Infrastructure custom metrics',\n    key: 1,\n  },\n  {\n    label: 'Infrastructure Analyze',\n    key: 8,\n  },\n  {\n    // replaces Application metrics(4) & Service metrics(5) & Endpoint metrics(6)\n    label: 'Application/service/endpoint metrics',\n    key: 4,\n  },\n  {\n    label: 'Analyze application calls',\n    key: 2,\n  },\n  {\n    label: 'Analyze website',\n    key: 3,\n  },\n  {\n    label: 'Analyze mobile app',\n    key: 9,\n  },\n  {\n    label: 'Service Level Objectives (Beta)',\n    key: 10,\n  },\n  {\n    label: 'Service Level Objectives Widgets',\n    key: 7,\n  },\n  {\n    label: 'Synthetic monitoring',\n    key: 11,\n  },\n];\n","import _ from 'lodash';\nimport { InstanaQuery } from '../types/instana_query';\n\nexport function aggregateTarget(data: any, target: InstanaQuery) {\n  const targetLabel = buildAggregationLabel(target);\n  data = _.filter(data, (d) => d.target !== targetLabel); // filter out any previously calculated aggregations\n  let concatedTargetData = concatTargetData(data);\n\n  let dataGroupedByTimestamp = _.groupBy(concatedTargetData, function (d) {\n    return d[1];\n  });\n\n  let aggregatedData = aggregateDataOfTimestamp(dataGroupedByTimestamp, target.aggregationFunction.label!);\n  aggregatedData = _.sortBy(aggregatedData, [\n    function (datapoint) {\n      return datapoint[1];\n    },\n  ]);\n\n  return buildResult(aggregatedData, target.refId, targetLabel);\n}\n\nfunction concatTargetData(data: any) {\n  let result: any = [];\n  _.each(data, (entry) => {\n    result = _.concat(result, entry.datapoints);\n  });\n  return result;\n}\n\nfunction aggregateDataOfTimestamp(dataGroupedByTimestamp: any, aggregationLabel: string) {\n  let result: any = [];\n  _.each(dataGroupedByTimestamp, (timestampData, timestamp) => {\n    let valuesOfTimestamp = _.map(timestampData, (datapoint) => {\n      return datapoint[0];\n    });\n    let aggregatedValue = aggregate(aggregationLabel, valuesOfTimestamp);\n    result.push([aggregatedValue, parseInt(timestamp, 10)]);\n  });\n  return result;\n}\n\nfunction aggregate(aggregation: string, data: any) {\n  if (aggregation.toLowerCase() === 'sum') {\n    return _.sum(data);\n  } else if (aggregation.toLowerCase() === 'mean') {\n    return _.mean(data);\n  } else if (aggregation.toLowerCase() === 'min') {\n    return _.min(data);\n  } else if (aggregation.toLowerCase() === 'max') {\n    return _.max(data);\n  } else {\n    //apply not aggregation\n    return data;\n  }\n}\n\nfunction buildResult(aggregatedData: any, refId: string, target: string) {\n  return {\n    datapoints: aggregatedData,\n    refId: refId,\n    target: target,\n  };\n}\n\nfunction buildAggregationLabel(target: InstanaQuery): string {\n  if (target.showAllMetrics) {\n    if (target.allMetrics.length > 1) {\n      if (target.customFilters && target.customFilters.length > 0) {\n        let label = '';\n        _.each(target.customFilters, (filter, index) => {\n          label += filter;\n          if (index !== target.customFilters.length - 1) {\n            label += '.';\n          }\n        });\n        label = label + ' (' + target.aggregationFunction.label + ')';\n        return label;\n      } else {\n        return target.aggregationFunction.label!;\n      }\n    } else {\n      return target.allMetrics[0].key + ' (' + target.aggregationFunction.label + ')';\n    }\n  } else {\n    return target.metric.key + ' (' + target.aggregationFunction.label + ')';\n  }\n}\n","// can be removed once mixpanel shows no old plugins around\nimport _ from 'lodash';\nimport metric_categories from './lists/metric_categories';\nimport { INFRASTRUCTURE_ANALYZE } from 'GlobalVariables';\n\nexport default function (target: any) {\n  // 1.3.1 towards 2.0.0\n  if (target.entityType && typeof target.entityType === 'string') {\n    target.entityType = { key: target.entityType, label: target.entityType };\n  }\n\n  // 2.3.1 towards 2.4.0\n  if (target.filter && target.filter !== '') {\n    if (!target.customFilters) {\n      target.customFilters = [];\n      target.customFilters.push({ value: target.filter });\n    }\n  }\n\n  // 2.4.2 towards 2.4.3\n  if (target.timeInterval) {\n    if (target.timeInterval.value) {\n      target.timeInterval = { key: target.timeInterval.value, label: target.timeInterval.label };\n    } else if (target.timeInterval.rollup) {\n      target.timeInterval = { key: target.timeInterval.rollup, label: target.timeInterval.label };\n    }\n  }\n\n  //2.4.4 towards 2.5.0\n  if (target.metricCategory === '5') {\n    //old service metric view\n    target.metricCategory = '4';\n    target.service = {}; //because target.service does not exist yet.\n    target.service.key = target.entity.key;\n    target.service.label = target.entity.label;\n    if (target.selectedApplication && target.selectedApplication.key) {\n      target.entity.key = target.selectedApplication.key;\n      target.entity.label = target.selectedApplication.label;\n    } else {\n      target.entity.key = null;\n      target.entity.label = 'Test';\n    }\n  }\n\n  //2.4.4 towards 2.5.0\n  if (target.metricCategory === '6') {\n    //old endpoint metric view\n    target.metricCategory = '4';\n    target.endpoint = {}; //because target.endpoint does not exist yet.\n    target.endpoint.key = target.entity.key;\n    if (target.selectedApplication && target.selectedApplication.key) {\n      target.entity.key = target.selectedApplication.key;\n      target.entity.label = target.selectedApplication.label;\n    } else {\n      target.entity.key = null;\n      target.entity.label = 'Test';\n    }\n  }\n\n  //2.7.3 towards 3.0 (Angular to React Migration)\n  if (target.aggregation && typeof target.aggregation === 'string') {\n    target.aggregation\n      ? (target.aggregation = { key: target.aggregation, label: target.aggregation })\n      : (target.aggregation = {});\n    target.aggregationFunction\n      ? (target.aggregationFunction = {\n          key: target.aggregationFunction.label,\n          label: target.aggregationFunction.label,\n        })\n      : (target.aggregationFunction = {});\n  }\n  if (target.customFilters && target.customFilters.length > 0 && target.customFilters[0].value) {\n    target.customFilters = _.map(target.customFilters, (cf) => cf.value);\n  }\n  if (\n    target.metricCategory.key !== INFRASTRUCTURE_ANALYZE &&\n    target.filters &&\n    target.filters.length > 0 &&\n    !target.filters[0].tag.key &&\n    !target.filters[0].tag.label\n  ) {\n    _.forEach(target.filters, (filter) => {\n      filter.tag.label = filter.tag.key;\n    });\n  }\n  if (target.group && target.group.key && !target.group.label) {\n    target.group.label = target.group.key;\n  }\n  if (target.metricCategory && typeof target.metricCategory === 'string') {\n    target.metricCategory = _.find(\n      metric_categories,\n      (category) => category.key === parseInt(target.metricCategory, 10)\n    );\n  }\n\n  //3.0.1 towards 3.1.0\n  if (target.callToEntity && target.callToEntity.key) {\n    target.callToEntity = target.callToEntity.key;\n  }\n  if (target.applicationCallToEntity && target.applicationCallToEntity.key) {\n    target.applicationCallToEntity = target.applicationCallToEntity.key;\n  }\n  if (target.filters && target.filters.length > 0) {\n    target.filters.forEach((filter: any) => {\n      if (filter.entity && filter.entity.key) {\n        filter.entity = filter.entity.key;\n      }\n    });\n  }\n}\n","import {\n  ANALYZE_APPLICATION_METRICS,\n  ANALYZE_MOBILE_APP_METRICS,\n  ANALYZE_WEBSITE_METRICS,\n  APPLICATION_SERVICE_ENDPOINT_METRICS,\n  BUILT_IN_METRICS,\n  CUSTOM_METRICS,\n  INFRASTRUCTURE_ANALYZE,\n  SLO_INFORMATION,\n  SLO2_INFORMATION,\n  SYNTHETIC_MONITORING,\n} from '../GlobalVariables';\nimport {\n  DataQueryRequest,\n  DataQueryResponse,\n  DataSourceApi,\n  DataSourceInstanceSettings,\n  SelectableValue,\n} from '@grafana/data';\nimport { appendData, generateStableHash, getDeltaRequestTimestamp, hasIntersection } from '../util/delta_util';\nimport {\n  getDefaultChartGranularity,\n  getDefaultMetricRollupDuration,\n  getPossibleGranularities,\n  getPossibleRollups,\n} from '../util/rollup_granularity_util';\nimport { getRequest, instanaUrl } from '../util/request_handler';\nimport { hoursToMs, readTime } from '../util/time_util';\n\nimport Cache from '../cache';\nimport { DataSourceApplication } from './DataSource_Application';\nimport { DataSourceEndpoint } from './DataSource_Endpoint';\nimport { DataSourceInfrastructure } from './Datasource_Infrastructure';\nimport { DataSourceMobileApp } from './DataSource_MobileApp';\nimport { DataSourceService } from './DataSource_Service';\nimport { DataSourceSlo } from './DataSource_Slo';\nimport { DataSourceSlo2 } from './DataSource_Slo2';\nimport { DataSourceWebsite } from './DataSource_Website';\nimport { DataSourceSyntheticMonitoring } from './DataSource_SyntheticMonitoring';\nimport { InstanaOptions } from '../types/instana_options';\nimport { InstanaQuery } from '../types/instana_query';\nimport MetricCategories from '../lists/metric_categories';\nimport TimeFilter from '../types/time_filter';\nimport _ from 'lodash';\nimport { aggregateTarget } from '../util/aggregation_util';\nimport { emptyResultData } from '../util/target_util';\nimport getVersion from '../util/instana_version';\nimport { isInvalidQueryInterval } from '../util/queryInterval_check';\nimport migrate from '../migration';\nimport { readItemMetrics } from '../util/analyze_util';\n\nexport class DataSource extends DataSourceApi<InstanaQuery, InstanaOptions> {\n  options: InstanaOptions;\n  dataSourceInfrastructure: DataSourceInfrastructure;\n  dataSourceWebsite: DataSourceWebsite;\n  dataSourceMobileapp: DataSourceMobileApp;\n  dataSourceApplication: DataSourceApplication;\n  dataSourceService: DataSourceService;\n  dataSourceEndpoint: DataSourceEndpoint;\n  dataSourceSlo: DataSourceSlo;\n  dataSourceSlo2: DataSourceSlo2;\n  dataSourceSyntheticMonitoring: DataSourceSyntheticMonitoring;\n  timeFilter!: TimeFilter;\n  availableGranularities: SelectableValue[];\n  availableRollups: SelectableValue[];\n  availableTimeIntervals: SelectableValue[];\n  resultCache: Cache<any>;\n\n  constructor(instanceSettings: DataSourceInstanceSettings<InstanaOptions>) {\n    super(instanceSettings);\n    this.options = instanceSettings.jsonData;\n    this.options.url = instanaUrl(instanceSettings);\n    this.availableGranularities = [];\n    this.availableRollups = [];\n    this.availableTimeIntervals = [];\n    this.dataSourceSlo = new DataSourceSlo(instanceSettings.jsonData);\n    this.dataSourceSlo2 = new DataSourceSlo2(instanceSettings.jsonData);\n    this.dataSourceInfrastructure = new DataSourceInfrastructure(instanceSettings.jsonData);\n    this.dataSourceWebsite = new DataSourceWebsite(instanceSettings.jsonData);\n    this.dataSourceMobileapp = new DataSourceMobileApp(instanceSettings.jsonData);\n    this.dataSourceApplication = new DataSourceApplication(instanceSettings.jsonData);\n    this.dataSourceService = new DataSourceService(instanceSettings.jsonData);\n    this.dataSourceEndpoint = new DataSourceEndpoint(instanceSettings.jsonData);\n    this.dataSourceSyntheticMonitoring = new DataSourceSyntheticMonitoring(instanceSettings.jsonData);\n\n    this.resultCache = new Cache<any>();\n  }\n\n  async query(options: DataQueryRequest<InstanaQuery>): Promise<DataQueryResponse> {\n    const { range } = options;\n    this.timeFilter = readTime(range!);\n    this.availableRollups = getPossibleRollups(this.timeFilter);\n    this.availableGranularities = getPossibleGranularities(this.timeFilter.windowSize);\n\n    return Promise.all(\n      options.targets.map((target) => {\n        let targetTimeFilter = readTime(range!);\n\n        // grafana setting to disable query execution\n        if (target.hide) {\n          return { data: [], target: target };\n        }\n\n        // target migration for downwards compatibility\n        migrate(target);\n\n        if (!target.metricCategory) {\n          target.metricCategory = MetricCategories[0];\n        }\n\n        this.setPossibleTimeIntervals(target);\n        if (!this.availableTimeIntervals.find((i) => i.key === target.timeInterval.key)) {\n          target.timeInterval = this.getDefaultTimeInterval(target);\n        }\n\n        if (target.timeShift) {\n          let millis = this.convertTimeShiftToMillis(target.timeShift);\n          if (millis > 0) {\n            targetTimeFilter = this.applyTimeShiftOnTimeFilter(targetTimeFilter, millis);\n          }\n        }\n\n        target.timeFilter = targetTimeFilter;\n        target.stableHash = generateStableHash(target);\n        targetTimeFilter = this.adjustTimeFilterIfCached(targetTimeFilter, target);\n        const category = target.metricCategory.key;\n\n        if (category === SLO_INFORMATION) {\n          return this.dataSourceSlo.runQuery(target, targetTimeFilter).then((data: any) => {\n            return this.buildTargetWithAppendedDataResult(target, targetTimeFilter, data);\n          });\n        } else if (category === SLO2_INFORMATION) {\n          return this.dataSourceSlo2.runQuery(target, targetTimeFilter).then((data: any) => {\n            return this.buildTargetWithAppendedDataResult(target, targetTimeFilter, data);\n          });\n        } else if (category === SYNTHETIC_MONITORING) {\n          return this.dataSourceSyntheticMonitoring.runQuery(target, targetTimeFilter).then((data: any) => {\n            return this.buildTarget(target, data);\n          });\n        } else if (category === INFRASTRUCTURE_ANALYZE) {\n          return this.dataSourceInfrastructure.runQuery(target, targetTimeFilter).then((data: any) => {\n            return this.buildTarget(target, data);\n          });\n        } else if (category === BUILT_IN_METRICS || category === CUSTOM_METRICS) {\n          return this.dataSourceInfrastructure.runQuery(target, targetTimeFilter).then((data: any) => {\n            return this.buildTargetWithAppendedDataResult(target, targetTimeFilter, data);\n          });\n        } else if (category === ANALYZE_WEBSITE_METRICS) {\n          return this.dataSourceWebsite.runQuery(target, targetTimeFilter).then((data: any) => {\n            return this.buildTargetWithAppendedDataResult(target, targetTimeFilter, data);\n          });\n        } else if (category === ANALYZE_MOBILE_APP_METRICS) {\n          return this.dataSourceMobileapp.runQuery(target, targetTimeFilter).then((data: any) => {\n            return this.buildTargetWithAppendedDataResult(target, targetTimeFilter, data);\n          });\n        } else if (category === ANALYZE_APPLICATION_METRICS) {\n          return this.dataSourceApplication.runQuery(target, targetTimeFilter).then((data: any) => {\n            return this.buildTargetWithAppendedDataResult(target, targetTimeFilter, data);\n          });\n        } else if (category === APPLICATION_SERVICE_ENDPOINT_METRICS) {\n          return this.getApplicationServiceEndpointMetrics(target, targetTimeFilter).then((data: any) => {\n            return this.buildTargetWithAppendedDataResult(target, targetTimeFilter, data);\n          });\n        }\n\n        return Promise.resolve(emptyResultData(target.refId));\n      })\n    ).then((targetData) => {\n      let result: any = [];\n      _.each(targetData, (targetAndData) => {\n        // Flatten the list as Grafana expects a list of targets with corresponding datapoints.\n        let resultData: any = _.compact(_.flatten(targetAndData.data)); // Also remove empty data items\n        this.cacheResultIfNecessary(_.cloneDeep(resultData), targetAndData.target); // clone to store results without timeshift re-calculation\n        this.applyTimeShiftIfNecessary(resultData, targetAndData.target); // adjust resultdata after caching the result\n        resultData = this.aggregateDataIfNecessary(resultData, targetAndData.target);\n        result.push(resultData);\n      });\n\n      return { data: _.flatten(result) };\n    });\n  }\n\n  getApplicationServiceEndpointMetrics(target: InstanaQuery, timeFilter: TimeFilter) {\n    // do not try to execute too big queries\n    if (isInvalidQueryInterval(timeFilter.windowSize, hoursToMs(this.options.queryinterval_limit_app_metrics))) {\n      throw new Error(\n        'Limit for maximum selectable windowsize exceeded, max is: ' +\n          this.options.queryinterval_limit_app_metrics +\n          ' hours'\n      );\n    }\n\n    if (target.endpoint && target.endpoint.key) {\n      return this.dataSourceEndpoint.fetchEndpointMetrics(target, timeFilter).then((response: any) => {\n        return readItemMetrics(target, response, this.dataSourceEndpoint.buildEndpointMetricLabel);\n      });\n    } else if (target.service && target.service.key) {\n      return this.dataSourceService.fetchServiceMetrics(target, timeFilter).then((response: any) => {\n        return readItemMetrics(target, response, this.dataSourceService.buildServiceMetricLabel);\n      });\n    } else if (target.entity && target.entity.key) {\n      return this.dataSourceApplication.fetchApplicationMetrics(target, timeFilter).then((response: any) => {\n        if (response.data) {\n          target.showWarningCantShowAllResults = response.data.canLoadMore;\n        }\n        return readItemMetrics(target, response, this.dataSourceApplication.buildApplicationMetricLabel);\n      });\n    }\n\n    return Promise.resolve({ data: { items: [] } });\n  }\n\n  applyTimeShiftIfNecessary(data: any, target: InstanaQuery) {\n    if (target.timeShift) {\n      let millis = this.convertTimeShiftToMillis(target.timeShift);\n      if (millis > 0) {\n        data.forEach((data: any) => {\n          this.applyTimeShiftOnData(data, millis);\n        });\n      }\n    }\n  }\n\n  cacheResultIfNecessary(result: any, target: InstanaQuery) {\n    if (this.supportsDeltaRequests(target) && this.hasResult(result)) {\n      let cachedObj = {\n        timeFilter: target.timeFilter,\n        results: result,\n      };\n      this.resultCache.put(target.stableHash, cachedObj, 4000000); // set to 1,11 hour\n    }\n  }\n\n  supportsDeltaRequests(target: InstanaQuery): boolean {\n    if (target.metricCategory) {\n      if (\n        target.metricCategory.key === SLO_INFORMATION ||\n        target.metricCategory.key === SLO2_INFORMATION ||\n        target.metricCategory.key === INFRASTRUCTURE_ANALYZE\n      ) {\n        return false;\n      }\n    }\n\n    let version = this.resultCache.get('version');\n    if (!version) {\n      return getVersion(this.options).then((version: any) => {\n        this.resultCache.put('version', version, 4000000); // set to 1,11 hour\n        return version >= 171;\n      });\n    }\n\n    return version >= 171;\n  }\n\n  hasResult(result: any) {\n    return result && result.length > 0;\n  }\n\n  applyTimeShiftOnData(data: any, timeshift: number) {\n    data.datapoints.forEach((datapoint: any) => {\n      datapoint[1] = datapoint[1] + timeshift;\n    });\n  }\n\n  aggregateDataIfNecessary(data: any, target: InstanaQuery): any[] {\n    let newData = [];\n\n    if (target.aggregateGraphs) {\n      const aggregatedData = aggregateTarget(data, target);\n      newData.push(aggregatedData);\n      if (!target.hideOriginalGraphs) {\n        _.each(data, (dt) => {\n          if (dt.target !== aggregatedData.target) {\n            newData.push(dt);\n          }\n        });\n      }\n      return newData;\n    }\n\n    return data;\n  }\n\n  buildTarget(target: InstanaQuery, data: any) {\n    return {\n      target: target,\n      data: data,\n    };\n  }\n\n  buildTargetWithAppendedDataResult(target: InstanaQuery, timeFilter: TimeFilter, data: any) {\n    if (timeFilter.from !== target.timeFilter.from && data) {\n      data = this.appendResult(data, target);\n\n      data.forEach((t: any) => {\n        t.datapoints = t.datapoints.filter((d: any) => d[1] >= target.timeFilter.from);\n      });\n    }\n\n    return this.buildTarget(target, data);\n  }\n\n  appendResult(data: any, target: InstanaQuery) {\n    let cachedResult = this.resultCache.get(target.stableHash);\n    if (cachedResult && cachedResult.results) {\n      data = appendData(data, cachedResult.results);\n    }\n    return data;\n  }\n\n  adjustTimeFilterIfCached(timeFilter: TimeFilter, target: InstanaQuery): TimeFilter {\n    let cachedResult = this.resultCache.get(target.stableHash);\n    if (cachedResult && hasIntersection(timeFilter, cachedResult.timeFilter)) {\n      let newFrom = getDeltaRequestTimestamp(cachedResult.results, cachedResult.timeFilter.from, target.timeInterval);\n      let newTo = timeFilter.to;\n      return {\n        from: newFrom,\n        to: newTo,\n        windowSize: newTo - newFrom,\n      };\n    }\n    return timeFilter;\n  }\n\n  getSloReports(): Promise<SelectableValue[]> {\n    return this.dataSourceSlo.getConfiguredSLIs();\n  }\n\n  getSlo2Reports(): Promise<SelectableValue[]> {\n    return this.dataSourceSlo2.getSLOConfigurations();\n  }\n\n  getEntityTypes(): Promise<SelectableValue[]> {\n    return this.dataSourceInfrastructure.getEntityTypes();\n  }\n\n  fetchApplications() {\n    return this.dataSourceApplication.getApplications(this.getTimeFilter());\n  }\n\n  fetchApplicationTags() {\n    return this.dataSourceApplication.getApplicationTags(this.getTimeFilter());\n  }\n\n  fetchServices(target: InstanaQuery) {\n    return this.dataSourceService.getServicesOfApplication(target, this.getTimeFilter());\n  }\n\n  fetchEndpoints(target: InstanaQuery) {\n    return this.dataSourceEndpoint.getEndpointsOfService(target, this.getTimeFilter());\n  }\n\n  fetchTypesForTarget(query: InstanaQuery) {\n    return this.dataSourceInfrastructure.fetchTypesForTarget(query, this.getTimeFilter());\n  }\n\n  fetchWebsites(): Promise<SelectableValue[]> {\n    return this.dataSourceWebsite.getWebsites(this.getTimeFilter());\n  }\n\n  fetchMobileapp(): Promise<SelectableValue[]> {\n    return this.dataSourceMobileapp.getMobileapp(this.getTimeFilter());\n  }\n  fetchMetricsForEntityType(target: InstanaQuery): Promise<SelectableValue[]> {\n    return this.dataSourceInfrastructure.fetchAvailableMetricsForEntityType(target, this.timeFilter);\n  }\n\n  getDefaultTimeInterval(query: InstanaQuery) {\n    const category = query.metricCategory.key;\n    if (category === BUILT_IN_METRICS || category === CUSTOM_METRICS || category === INFRASTRUCTURE_ANALYZE) {\n      return getDefaultMetricRollupDuration(this.getTimeFilter());\n    } else {\n      return getDefaultChartGranularity(this.getTimeFilter().windowSize);\n    }\n  }\n\n  convertTimeShiftToMillis(timeShift: string): number {\n    if (!timeShift) {\n      return 0;\n    }\n\n    try {\n      return this.parseTimeShift(timeShift);\n    } catch (e) {\n      return 0;\n    }\n  }\n\n  parseTimeShift(timeShift: string): number {\n    let milliSeconds = 1000;\n\n    if (timeShift.endsWith('s')) {\n      return parseInt(timeShift.split('s')[0], 10) * milliSeconds;\n    } else if (timeShift.endsWith('m')) {\n      return parseInt(timeShift.split('m')[0], 10) * 60 * milliSeconds;\n    } else if (timeShift.endsWith('h')) {\n      return parseInt(timeShift.split('h')[0], 10) * 60 * 60 * milliSeconds;\n    } else if (timeShift.endsWith('d')) {\n      return parseInt(timeShift.split('d')[0], 10) * 60 * 60 * 24 * milliSeconds;\n    } else if (timeShift.endsWith('w')) {\n      return parseInt(timeShift.split('w')[0], 10) * 60 * 60 * 24 * 7 * milliSeconds;\n    }\n    return 0;\n  }\n\n  applyTimeShiftOnTimeFilter(timeFilter: TimeFilter, timeShift: number): TimeFilter {\n    return {\n      from: timeFilter.from - timeShift,\n      to: timeFilter.to - timeShift,\n      windowSize: timeFilter.windowSize,\n    };\n  }\n\n  setPossibleTimeIntervals(target: InstanaQuery) {\n    const category = target.metricCategory.key;\n    if (category === BUILT_IN_METRICS || category === CUSTOM_METRICS || category === INFRASTRUCTURE_ANALYZE) {\n      this.availableTimeIntervals = this.availableRollups;\n    } else {\n      this.availableTimeIntervals = this.availableGranularities;\n    }\n  }\n\n  getTimeFilter(): TimeFilter {\n    if (!this.timeFilter || !this.timeFilter.from) {\n      const now = Date.now();\n      const windowSize = 6 * 60 * 60 * 1000; // 6h\n      this.timeFilter = {\n        from: now - windowSize,\n        to: now,\n        windowSize: windowSize,\n      };\n    }\n\n    return this.timeFilter;\n  }\n\n  testDatasource(): Promise<any> {\n    return getRequest(this.options, '/api/infrastructure-monitoring/monitoring-state').then(\n      () => {\n        return {\n          status: 'success',\n          message: 'Successfully connected to the Instana API.',\n          title: 'Success',\n        };\n      },\n      (error: any) => {\n        if (error.status === 401) {\n          return {\n            status: 'error',\n            message: 'Unauthorized. Please verify the API Token.',\n            title: 'Error',\n          };\n        } else {\n          console.log(error);\n          return {\n            status: 'error',\n            message: 'Error (' + error.status + ') connecting to the Instana API: ' + error.statusText,\n            title: 'Error',\n          };\n        }\n      }\n    );\n  }\n}\n","import _ from 'lodash';\n\n// check grafana version (5.3+)\nexport default () => {\n  const version = _.get(window, ['grafanaBootData', 'settings', 'buildInfo', 'version'], '3.0.0');\n  const versions = _.split(version, '.', 2).map((v) => {\n    return parseInt(v, 10);\n  });\n  return version[0] >= 6 || (versions[0] >= 5 && versions[1] >= 3);\n};\n","import './plugin.css';\nimport { Button, Checkbox, Field, Icon, Input, Legend, Tooltip } from '@grafana/ui';\nimport { DataSourcePluginOptionsEditorProps, DataSourceSettings, SelectableValue } from '@grafana/data';\nimport React, { ChangeEvent, PureComponent } from 'react';\nimport { InstanaOptions, SecureJsonData } from '../types/instana_options';\nimport _ from 'lodash';\nimport getVersion from '../util/instana_version';\nimport proxyCheck from '../util/proxy_check';\ninterface Props extends DataSourcePluginOptionsEditorProps<InstanaOptions, SecureJsonData> {}\ninterface State {\n  canQueryOfflineSnapshots: boolean;\n  canUseProxy: boolean;\n  isApiKeyConfigured: boolean;\n  apiKeyValue: string;\n}\nexport class ConfigEditor extends PureComponent<Props, State> {\n  constructor(props: Readonly<Props>) {\n    super(props);\n    this.state = { canQueryOfflineSnapshots: false, canUseProxy: false, isApiKeyConfigured: false, apiKeyValue: '' };\n    // check possibility every time\n    this.detectFeatures();\n    const { options, onOptionsChange } = this.props;\n    const { jsonData } = options;\n    if (jsonData.useProxy === undefined) {\n      jsonData.useProxy = proxyCheck();\n    }\n    jsonData.useProxy = true;\n    // Check if API key is already configured\n    const isApiKeyConfigured = !!options.secureJsonData?.apiToken;\n    const apiKeyValue = isApiKeyConfigured ? '********' : '';\n    this.setState({ isApiKeyConfigured, apiKeyValue });\n    onOptionsChange({ ...options, jsonData });\n  }\n  onInstanaOptionsChange = (eventItem: ChangeEvent<HTMLInputElement> | SelectableValue, key: keyof InstanaOptions) => {\n    const { options, onOptionsChange } = this.props;\n    let jsonData = {\n      ...options.jsonData,\n      [key]: eventItem.currentTarget.value,\n    };\n    let secureJsonData;\n    if (key === 'apiToken') {\n      secureJsonData = {\n        apiToken: eventItem.currentTarget.value,\n      };\n      delete jsonData.apiToken;\n      options.secureJsonData = secureJsonData;\n      // Update state for API key configuration\n      const isApiKeyConfigured = !!eventItem.currentTarget.value;\n      const apiKeyValue = isApiKeyConfigured ? eventItem.currentTarget.value : '';\n      this.setState({ isApiKeyConfigured, apiKeyValue });\n    }\n    onOptionsChange({ ...options, jsonData, secureJsonData });\n    if ('url' === key || 'apiToken' === key) {\n      this.debouncedDetectFeatures(options);\n    }\n  };\n  onResetAPIKey = () => {\n    const { options, onOptionsChange } = this.props;\n    onOptionsChange({\n      ...options,\n      secureJsonFields: {\n        ...options.secureJsonFields,\n        apiToken: false,\n      },\n      secureJsonData: {\n        ...options.secureJsonData,\n        apiToken: '',\n      },\n    });\n    // Removed unused variable\n    this.setState({ apiKeyValue: '' });\n  };\n  onSwitchChange = (eventItem: SelectableValue<HTMLInputElement> | any, key: keyof InstanaOptions) => {\n    const { options, onOptionsChange } = this.props;\n    let value = false;\n    if (eventItem && eventItem.currentTarget) {\n      value = !options.jsonData[key];\n    }\n    const jsonData = {\n      ...options.jsonData,\n      [key]: value,\n    };\n    onOptionsChange({ ...options, jsonData });\n  };\n  debouncedDetectFeatures = (settings?: DataSourceSettings<InstanaOptions, {}>) => {\n    _.debounce(() => this.detectFeatures(settings), 500);\n  };\n  /**\n   * Checks whether the provided tenant-unit is able to provide certain features such as querying offline snapshots.\n   */\n  detectFeatures = (settings?: DataSourceSettings<InstanaOptions, {}>) => {\n    let jsonData = settings ? settings.jsonData : this.props.options.jsonData;\n\n    if (!jsonData || !jsonData.url) {\n      return;\n    }\n\n    this.setState({ canUseProxy: proxyCheck() });\n\n    getVersion(jsonData).then((version: any) => {\n      version\n        ? this.setState({ canQueryOfflineSnapshots: version >= 156 })\n        : this.setState({ canQueryOfflineSnapshots: false });\n    });\n  };\n\n  render() {\n    const { options } = this.props;\n    const { jsonData } = options;\n    const { apiKeyValue } = this.state;\n    return (\n      <div className=\"settings\">\n        <Legend>Instana configuration</Legend>\n        <Field\n          className={'width-30'}\n          horizontal\n          required\n          label=\"URL\"\n          description=\"The URL of your Instana installation.\"\n        >\n          <Input\n            width={30}\n            value={jsonData.url}\n            placeholder={'https://tools-acme.instana.io'}\n            onChange={(event) => this.onInstanaOptionsChange(event, 'url')}\n          />\n        </Field>\n\n        <Field\n          style={{ width: '637px' }}\n          horizontal\n          required\n          label=\"API Token\"\n          description=\"The API token to access the data.\"\n        >\n          <div style={{ display: 'flex' }}>\n            <Input\n              type=\"password\"\n              width={30}\n              value={apiKeyValue}\n              placeholder={options.secureJsonFields?.apiToken ? 'Configured' : 'Enter API Key'}\n              readOnly={options.secureJsonFields?.apiToken}\n              suffix={\n                <Tooltip\n                  content={\n                    <p>\n                      You can create API tokens following the instructions at&nbsp;\n                      <a href=\"https://www.ibm.com/docs/en/obi/current?topic=apis-web-rest-api#unit-specific-api-tokens\">\n                        https://www.ibm.com/docs/en/obi/current?topic=apis-web-rest-api\n                      </a>\n                    </p>\n                  }\n                  theme={'info'}\n                >\n                  <Icon name=\"info-circle\" />\n                </Tooltip>\n              }\n              onChange={(event) => this.onInstanaOptionsChange(event, 'apiToken')}\n            />\n            <div style={{ marginLeft: '15px' }}>\n              <Button onClick={this.onResetAPIKey}>Reset API Token</Button>\n            </div>\n          </div>\n        </Field>\n\n        <Checkbox\n          label={'Use Proxy'}\n          value={true}\n          disabled={true}\n          description={\n            'The only way to use the API token for authentication in Grafana is through Use-Proxy. Needs Grafana 10.0.0+ and Instana datasource 4.0.0+'\n          }\n        />\n        <Checkbox\n          label={'Enable offline snapshots'}\n          value={jsonData.showOffline}\n          onChange={(event) => this.onSwitchChange(event, 'showOffline')}\n          description={'Enables querying offline snapshots. Needs Instana release 260+ and Instana datasource 3.3.0+'}\n        />\n        <Checkbox\n          label={'Enable Infrastructure Analyze category'}\n          value={jsonData.allowInfraExplore}\n          onChange={(event) => this.onSwitchChange(event, 'allowInfraExplore')}\n          description={\n            'Adds a new category that allows usage of Infrastructure Analyze functionality. Needs Instana release ' +\n            '195+ and an explicit feature flag. If you are interested in this technology, please submit a request via ' +\n            'our support system at https://support.instana.com/.'\n          }\n        />\n        <br />\n        <br />\n        <b>Maximum query intervals in hours</b>\n        <p className={'width-30'}>\n          This settings are optional values to control the load of data queries, by defining the maximum allowed query\n          intervals against the Instana API.\n        </p>\n        <Field className={'width-30'} horizontal label=\"Infrastructure metrics\">\n          <Input\n            width={30}\n            value={jsonData.queryinterval_limit_infra}\n            placeholder={'optional: interval limit in hours'}\n            onChange={(event) => this.onInstanaOptionsChange(event, 'queryinterval_limit_infra')}\n          />\n        </Field>\n        <Field className={'width-30'} horizontal label=\"Application metrics\">\n          <Input\n            width={30}\n            value={jsonData.queryinterval_limit_app_metrics}\n            placeholder={'optional: interval limit in hours'}\n            onChange={(event) => this.onInstanaOptionsChange(event, 'queryinterval_limit_app_metrics')}\n          />\n        </Field>\n        <Field className={'width-30'} horizontal label=\"Analyze application calls\">\n          <Input\n            width={30}\n            value={jsonData.queryinterval_limit_app_calls}\n            placeholder={'optional: interval limit in hours'}\n            onChange={(event) => this.onInstanaOptionsChange(event, 'queryinterval_limit_app_calls')}\n          />\n        </Field>\n        <Field className={'width-30'} horizontal label=\"Analyze website\">\n          <Input\n            width={30}\n            value={jsonData.queryinterval_limit_website_metrics}\n            placeholder={'optional: interval limit in hours'}\n            onChange={(event) => this.onInstanaOptionsChange(event, 'queryinterval_limit_website_metrics')}\n          />\n        </Field>\n        <Field className={'width-30'} horizontal label=\"Analyze mobile app\">\n          <Input\n            width={30}\n            value={jsonData.queryinterval_limit_mobileapp_metrics}\n            placeholder={'optional: interval limit in hours'}\n            onChange={(event) => this.onInstanaOptionsChange(event, 'queryinterval_limit_mobileapp_metrics')}\n          />\n        </Field>\n      </div>\n    );\n  }\n}\n","import React from 'react';\n\ninterface WrapperProps {\n  disabled?: boolean;\n  stretch?: boolean;\n  children: any;\n}\n\nexport default function FormWrapper(props: WrapperProps) {\n  const style: any = { display: 'flex' };\n\n  if (props.disabled) {\n    style.opacity = '0.4';\n    style.pointerEvents = 'none';\n  }\n\n  if (props.stretch) {\n    style.width = '100%';\n  }\n\n  return <div style={style}>{props.children}</div>;\n}\n","import React from 'react';\n\nimport { InlineFormLabel, LegacyForms, PopoverContent } from '@grafana/ui';\nimport FormWrapper from './FormWrapper';\n\nconst { Switch } = LegacyForms;\n\ninterface State {}\n\ninterface Props {\n  label: string;\n  value: boolean;\n  disabled?: boolean;\n  queryKeyword?: boolean;\n  labelWidth?: number | 14;\n  tooltip?: PopoverContent;\n\n  onChange(event?: any): any;\n}\n\n/**\n * Default switch field including label. Switch element is grafana/ui <Switch />.\n */\nexport default class FormSwitch extends React.Component<Props, State> {\n  constructor(props: any) {\n    super(props);\n  }\n\n  render() {\n    const { label, tooltip, queryKeyword, disabled, labelWidth = 14, value, ...remainingProps } = this.props;\n\n    return (\n      <FormWrapper disabled={disabled} stretch={false}>\n        <InlineFormLabel className={queryKeyword ? 'query-keyword' : ''} width={labelWidth} tooltip={tooltip}>\n          {label}\n        </InlineFormLabel>\n        <Switch checked={value} label={''} {...remainingProps} />\n      </FormWrapper>\n    );\n  }\n}\n","import React, { ChangeEvent } from 'react';\n\nimport { InstanaQuery } from '../../../types/instana_query';\nimport FormSwitch from '../../FormField/FormSwitch';\nimport { Input } from '@grafana/ui';\nimport _ from 'lodash';\n\ninterface FreeTextMetricsState {}\n\ninterface Props {\n  query: InstanaQuery;\n  onRunQuery(): void;\n  onChange(value: InstanaQuery): void;\n  loadEntityTypes(filterResult?: boolean): void;\n}\n\nexport class FreeTextMetrics extends React.Component<Props, FreeTextMetricsState> {\n  constructor(props: any) {\n    super(props);\n  }\n\n  debouncedRunQuery = _.debounce(this.props.onRunQuery, 500);\n\n  onUseFreeTextMetricsChange = (event: React.SyntheticEvent<HTMLInputElement> | undefined) => {\n    const { query, onChange, loadEntityTypes } = this.props;\n    if (event && event.currentTarget) {\n      query.useFreeTextMetrics = event.currentTarget.checked;\n      if (query.useFreeTextMetrics) {\n        loadEntityTypes(false);\n        query.metric = {};\n      } else {\n        loadEntityTypes(true);\n      }\n      onChange(query);\n    }\n  };\n\n  onFreeTextMetricsChange = (eventItem: ChangeEvent<HTMLInputElement>) => {\n    const { query, onChange } = this.props;\n    query.freeTextMetrics = eventItem.currentTarget.value;\n    onChange(query);\n\n    // onRunQuery with 500ms delay after last debounce\n    this.debouncedRunQuery();\n  };\n\n  render() {\n    const { query } = this.props;\n\n    return (\n      <div className={'gf-form'}>\n        <FormSwitch\n          queryKeyword\n          label={'Enable free text metrics'}\n          tooltip={\n            'Specify comma separated metrics directly in this text field. Once this field has a value,' +\n            ' selected metrics from above will be ignored. Enabled as soon as a query is entered.' +\n            ' Max 4 metrics supported.'\n          }\n          value={query.useFreeTextMetrics}\n          onChange={this.onUseFreeTextMetricsChange}\n          disabled={false}\n        />\n        <Input\n          width={0}\n          disabled={!query.useFreeTextMetrics}\n          value={query.freeTextMetrics}\n          placeholder={'metric.one,metric.two,metric.three'}\n          onChange={this.onFreeTextMetricsChange}\n        />\n      </div>\n    );\n  }\n}\n","export default [\n  {\n    label: 'SUM',\n  },\n  {\n    label: 'MEAN',\n  },\n  {\n    label: 'MIN',\n  },\n  {\n    label: 'MAX',\n  },\n];\n","import React from 'react';\n\nimport AggregationFunctions from '../../lists/aggregation_function';\nimport { InstanaQuery } from '../../types/instana_query';\nimport FormSwitch from '../FormField/FormSwitch';\nimport { SelectableValue } from '@grafana/data';\nimport { Select } from '@grafana/ui';\n\ninterface AggregateQueryState {}\n\ninterface Props {\n  query: InstanaQuery;\n  onRunQuery(): void;\n  onChange(value: InstanaQuery): void;\n}\n\nexport class AggregateQuery extends React.Component<Props, AggregateQueryState> {\n  constructor(props: any) {\n    super(props);\n    this.state = { showAdditionalSettings: false, legendFormat: '' };\n    const { query } = this.props;\n    if (!query.aggregationFunction) {\n      query.aggregationFunction = AggregationFunctions[0];\n    }\n  }\n\n  onAggregateGraphs = (event: React.SyntheticEvent<HTMLInputElement> | undefined) => {\n    const { query, onRunQuery } = this.props;\n    if (event && event.currentTarget) {\n      query.aggregateGraphs = event.currentTarget.checked;\n      onRunQuery();\n    }\n  };\n\n  onHideOriginalGraph = (event: React.SyntheticEvent<HTMLInputElement> | undefined) => {\n    const { query, onRunQuery } = this.props;\n    if (event && event.currentTarget) {\n      query.hideOriginalGraphs = event.currentTarget.checked;\n      onRunQuery();\n    }\n  };\n\n  onAggregationFunctionChange = (event: SelectableValue) => {\n    const { query, onRunQuery } = this.props;\n    query.aggregationFunction = event;\n    onRunQuery();\n  };\n\n  render() {\n    const { query } = this.props;\n\n    return (\n      <div className={'gf-form'}>\n        <FormSwitch\n          queryKeyword\n          label={'Aggregate query graphs'}\n          tooltip={'Aggregate all graphs of a query.'}\n          value={query.aggregateGraphs}\n          onChange={this.onAggregateGraphs}\n        />\n\n        <Select\n          menuPlacement={'bottom'}\n          width={12}\n          isSearchable={true}\n          options={AggregationFunctions}\n          value={query.aggregationFunction}\n          disabled={!query.aggregateGraphs}\n          onChange={this.onAggregationFunctionChange}\n        />\n\n        <FormSwitch\n          queryKeyword\n          disabled={!query.aggregateGraphs}\n          labelWidth={10}\n          label={'Hide original graphs'}\n          tooltip={'Removes the original graphs resulted from the query and only shows the aggregated graph.'}\n          value={query.hideOriginalGraphs}\n          onChange={this.onHideOriginalGraph}\n        />\n      </div>\n    );\n  }\n}\n","import React from 'react';\n\nimport { InlineFormLabel, Input, PopoverContent } from '@grafana/ui';\nimport FormWrapper from './FormWrapper';\n\ninterface State {}\n\ninterface Props {\n  label: string;\n  value: string;\n  invalid?: boolean;\n  disabled?: boolean;\n  placeholder?: string;\n  queryKeyword?: boolean;\n  labelWidth?: number | 14;\n  inputWidth?: number | 30;\n  tooltip?: PopoverContent;\n\n  onChange(event?: any): any;\n}\n\n/**\n * Default input field including label. Input element is grafana/ui <Input />.\n */\nexport default class FormInput extends React.Component<Props, State> {\n  constructor(props: any) {\n    super(props);\n  }\n\n  render() {\n    const { label, tooltip, queryKeyword, disabled, labelWidth = 14, inputWidth = 30, ...remainingProps } = this.props;\n\n    return (\n      <FormWrapper disabled={disabled} stretch={!inputWidth}>\n        <InlineFormLabel className={queryKeyword ? 'query-keyword' : ''} width={labelWidth} tooltip={tooltip}>\n          {label}\n        </InlineFormLabel>\n        <Input width={inputWidth} disabled={disabled} {...remainingProps} />\n      </FormWrapper>\n    );\n  }\n}\n","import React, { ChangeEvent, FormEvent } from 'react';\n\nimport {\n  BUILT_IN_METRICS,\n  CUSTOM_METRICS,\n  INFRASTRUCTURE_ANALYZE,\n  SLO_INFORMATION,\n  SYNTHETIC_MONITORING,\n} from '../../GlobalVariables';\nimport { FreeTextMetrics } from '../Infrastructure/Custom/FreeTextMetrics';\nimport { InstanaQuery } from '../../types/instana_query';\nimport { AggregateQuery } from './AggregateQuery';\nimport FormSwitch from '../FormField/FormSwitch';\nimport FormInput from '../FormField/FormInput';\nimport _ from 'lodash';\n\nconst legendFormatPlaceholders = [\n  '$label (on host $host)',\n  '$label (on host $host)',\n  '$label ($application) - $key',\n  '$label ($website) - $key',\n  '$label ($application) - $key',\n  '',\n  '',\n  '',\n];\n\nconst legendFormatTooltips = [\n  <div key=\"builtIn\">\n    Default: $label (on host $host)\n    <ul>\n      <li>• $label - entity label</li>\n      <li>• $host - corresponding host MAC address</li>\n      <li>• $pid - corresponding PID</li>\n      <li>• $timeShift - corresponding timeShift</li>\n      <li>• $metric - displayed metric</li>\n      <li>• $type - entity type</li>\n      <li>• $name - label alternative</li>\n      <li>• $index - index in the list</li>\n    </ul>\n  </div>,\n  <div key=\"custom\">\n    Default: $label (on host $host)\n    <ul>\n      <li>• $label - entity label</li>\n      <li>• $host - corresponding host MAC address</li>\n      <li>• $pid - corresponding PID</li>\n      <li>• $timeShift - corresponding timeShift</li>\n      <li>• $metric - displayed metric</li>\n      <li>• $type - entity type</li>\n      <li>• $name - label alternative</li>\n      <li>• $index - index in the list</li>\n    </ul>\n  </div>,\n  <div key=\"application\">\n    Default: $label ($application) - $key\n    <ul>\n      <li>• $label - entity label</li>\n      <li>• $application - application label</li>\n      <li>• $timeShift - corresponding timeShift</li>\n      <li>• $metric - displayed metric</li>\n      <li>• $key - metric key with aggregation and rollup</li>\n      <li>• $index - index in the list</li>\n    </ul>\n  </div>,\n  <div key=\"website\">\n    Default: $label ($website) - $key\n    <ul>\n      <li>• $label - entity label</li>\n      <li>• $website - application label</li>\n      <li>• $type - entity type</li>\n      <li>• $timeShift - corresponding timeShift</li>\n      <li>• $metric - displayed metric</li>\n      <li>• $key - metric key with aggregation and rollup</li>\n      <li>• $index - index in the list</li>\n    </ul>\n  </div>,\n  <div key=\"endpoint\">\n    Default: $label ($application) - $key\n    <ul>\n      <li>• $label - entity label</li>\n      <li>• $application - application label</li>\n      <li>• $service - service label</li>\n      <li>• $endpoint - endpoint label</li>\n      <li>• $timeShift - corresponding timeShift</li>\n      <li>• $metric - displayed metric</li>\n      <li>• $key - metric key with aggregation and rollup</li>\n      <li>• $index - index in the list</li>\n    </ul>\n  </div>,\n  '',\n  '',\n  '',\n];\n\ninterface AdvancedSettingsState {\n  legendFormatPlaceholder: string;\n}\n\ninterface Props {\n  query: InstanaQuery;\n  onRunQuery(): void;\n  onChange(value: InstanaQuery): void;\n  loadEntityTypes(filterResult?: boolean): void;\n}\n\nexport default class AdvancedSettings extends React.Component<Props, AdvancedSettingsState> {\n  constructor(props: any) {\n    super(props);\n    this.state = {\n      legendFormatPlaceholder: this.setLegendFormatPlaceholder(),\n    };\n  }\n\n  debouncedRunQuery = _.debounce(this.props.onRunQuery, 500);\n\n  onLegendFormatChange = (eventItem: FormEvent<HTMLInputElement>) => {\n    const { query, onChange } = this.props;\n    query.labelFormat = eventItem.currentTarget.value;\n    onChange(query);\n\n    // onRunQuery with 500ms delay after last debounce\n    this.debouncedRunQuery();\n  };\n\n  onTimeShiftChange = (eventItem: ChangeEvent<HTMLInputElement>) => {\n    const { query, onChange } = this.props;\n    query.timeShift = eventItem.currentTarget.value;\n\n    if (query.timeShift) {\n      query.timeShiftIsValid = query.timeShift.match(/\\d+[m,s,h,d,w]{1}/) ? true : false;\n    } else {\n      query.timeShiftIsValid = true;\n    }\n\n    onChange(query);\n\n    if (query.timeShiftIsValid) {\n      // onRunQuery with 500ms delay after last debounce\n      this.debouncedRunQuery();\n    }\n  };\n\n  setLegendFormatPlaceholder(): string {\n    const { query } = this.props;\n    return legendFormatPlaceholders[query.metricCategory.key];\n  }\n\n  setLegendFormatTooltip() {\n    const { query } = this.props;\n    return legendFormatTooltips[query.metricCategory.key];\n  }\n\n  onShowAdvancedSettingsChange = (event: React.SyntheticEvent<HTMLInputElement> | undefined) => {\n    if (event && event.currentTarget) {\n      const { query, onChange } = this.props;\n      query.showAdvancedSettings = event.currentTarget.checked;\n      onChange(query);\n    }\n  };\n\n  render() {\n    const { query, onRunQuery, onChange, loadEntityTypes } = this.props;\n    const category = query.metricCategory.key;\n\n    return (\n      <div>\n        <div className={'gf-form'}>\n          <FormSwitch\n            label={'Show advanced settings'}\n            tooltip={'Show all additional settings'}\n            value={query.showAdvancedSettings}\n            onChange={(e) => this.onShowAdvancedSettingsChange(e)}\n          />\n        </div>\n\n        <div hidden={!query.showAdvancedSettings}>\n          <div\n            className={'gf-form'}\n            hidden={\n              category === SLO_INFORMATION || category === INFRASTRUCTURE_ANALYZE || category === SYNTHETIC_MONITORING\n            }\n          >\n            <FormInput\n              queryKeyword\n              inputWidth={0}\n              label={'Legend format'}\n              tooltip={this.setLegendFormatTooltip()}\n              value={query.labelFormat}\n              placeholder={this.setLegendFormatPlaceholder()}\n              onChange={(event) => this.onLegendFormatChange(event)}\n            />\n          </div>\n\n          <div className={'gf-form'}>\n            <FormInput\n              queryKeyword\n              inputWidth={0}\n              label={'Time shift'}\n              tooltip={\n                'Specify the amount of hours that shall be used. The time shift function always go back in time, ' +\n                'not forward. Accepts values such as 1s, 1m, 1h, 1d, 1w.'\n              }\n              value={query.timeShift}\n              invalid={!query.timeShiftIsValid}\n              placeholder={'1h'}\n              onChange={(event) => this.onTimeShiftChange(event)}\n            />\n          </div>\n\n          <div hidden={category !== CUSTOM_METRICS}>\n            <FreeTextMetrics\n              query={query}\n              onRunQuery={onRunQuery}\n              onChange={onChange}\n              loadEntityTypes={loadEntityTypes}\n            />\n          </div>\n\n          <div hidden={category !== BUILT_IN_METRICS && category !== CUSTOM_METRICS}>\n            <AggregateQuery query={query} onRunQuery={onRunQuery} onChange={onChange} />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","export default ['DESTINATION', 'SOURCE'];\n","import React, { useState } from 'react';\nimport { Tooltip, useTheme } from '@grafana/ui';\n\nconst DESTINATION = 'DESTINATION';\nconst SOURCE = 'SOURCE';\n\nconst dropdown = {\n  position: 'relative',\n  background: 'transparent',\n  width: '32px',\n  height: '32px',\n  marginRight: '4px',\n} as React.CSSProperties;\n\nconst dropdown__list = {\n  transition: 'max-height .2s ease-out',\n  maxHeight: 0,\n  overflow: 'hidden',\n  zIndex: 1,\n  position: 'fixed',\n} as React.CSSProperties;\n\nconst dropdown__list__active = {\n  overflow: 'hidden',\n  zIndex: 2, // we set a zIndex to ensure that the overlay is above other elements and does not move any DOM elements.\n  position: 'fixed',\n  maxHeight: '1000px',\n  opacity: 1,\n} as React.CSSProperties;\n\nconst iconTextContainer = {\n  display: 'inline-flex',\n};\n\nconst iconStyle = {\n  display: 'flex',\n  alignItems: 'center',\n  justifyContent: 'center',\n};\n\nconst iconTextStyle = {\n  padding: '7px',\n};\n\nconst iconSize = 30;\n\nconst destinationIcon = (\n  <svg style={iconStyle} height={iconSize} width={iconSize}>\n    <path\n      transform=\"translate(3, 5)\"\n      fill=\"#33a2e5\"\n      d=\"M4 11.173h6.38L8.115 8.92 9.042 8l3.704 3.684-3.704 3.684-.926-.92 2.263-2.252H4zM16.43 14.316c-1.426 0-2.632-1.206-2.632-2.632 0-1.425 1.206-2.631 2.632-2.631 1.425 0 2.631 1.206 2.631 2.631 0 1.426-1.206 2.632-2.631 2.632z\"\n    />\n  </svg>\n);\n\nconst sourceIcon = (\n  <svg style={iconStyle} height={iconSize} width={iconSize}>\n    <path\n      transform=\"translate(3, 5)\"\n      fill=\"#33a2e5\"\n      d=\"M9.939 11.173h6.379L14.054 8.92 14.98 8l3.704 3.684-3.704 3.684-.926-.92 2.264-2.252h-6.38c-.308 1.023-1.234 1.842-2.366 1.842C6.132 14.243 5 13.117 5 11.787c0-1.33 1.132-2.457 2.47-2.457 1.234 0 2.16.717 2.469 1.843z\"\n    />\n  </svg>\n);\n\n/**\n * Props have to be:\n *   value: string\n *   onChange: function that accepts a string as a parameter and returns void\n */\nexport default function Entity(props: any) {\n  const theme = useTheme();\n\n  const dropdown__list__item = {\n    background: theme.colors.bg2,\n    cursor: 'pointer',\n    listStyle: 'none',\n    borderRadius: '3px',\n    height: '32px',\n  } as React.CSSProperties;\n\n  const [active, setActive] = useState(false);\n\n  function toggleDropdown() {\n    setActive(!active);\n  }\n\n  function handleClick(entity: string) {\n    props.onChange(entity);\n    setActive(false);\n  }\n\n  return (\n    <div style={dropdown}>\n      <div\n        onClick={() => toggleDropdown()}\n        onBlur={() => setActive(false)}\n        style={dropdown__list__item}\n        contentEditable\n      >\n        <Tooltip content={props.value} theme={'info'} placement={'top'}>\n          {props.value === DESTINATION ? destinationIcon : sourceIcon}\n        </Tooltip>\n      </div>\n\n      <ul style={active ? dropdown__list__active : dropdown__list}>\n        <li onClick={() => handleClick(DESTINATION)} key={DESTINATION} style={dropdown__list__item}>\n          <div style={iconTextContainer}>\n            {destinationIcon} <span style={iconTextStyle}>{DESTINATION}</span>\n          </div>\n        </li>\n        <li onClick={() => handleClick('SOURCE')} key={SOURCE} style={dropdown__list__item}>\n          <div style={iconTextContainer}>\n            {sourceIcon} <span style={iconTextStyle}>{SOURCE}</span>\n          </div>\n        </li>\n      </ul>\n    </div>\n  );\n}\n","import React, { ChangeEvent } from 'react';\n\nimport { ALL_APPLICATIONS, ANALYZE_APPLICATION_METRICS } from '../../GlobalVariables';\nimport call_to_entities from '../../lists/apply_call_to_entities';\nimport { Input, Select, InlineFormLabel } from '@grafana/ui';\nimport { DataSource } from '../../datasources/DataSource';\nimport { InstanaQuery } from '../../types/instana_query';\nimport FormWrapper from '../FormField/FormWrapper';\nimport { SelectableValue } from '@grafana/data';\nimport Entity from '../Entity/Entity';\nimport _ from 'lodash';\nimport '../plugin.css';\n\ninterface ApplicationCallsMetricsState {\n  applications: SelectableValue[];\n}\n\ninterface Props {\n  query: InstanaQuery;\n\n  groups: SelectableValue[];\n\n  updateGroups(groups: SelectableValue[]): void;\n\n  onRunQuery(): void;\n\n  onChange(value: InstanaQuery): void;\n\n  updateMetrics(metrics: SelectableValue[]): void;\n\n  datasource: DataSource;\n}\n\nlet isUnmounting = false;\n\nexport class ApplicationCallsMetrics extends React.Component<Props, ApplicationCallsMetricsState> {\n  constructor(props: any) {\n    super(props);\n    this.state = {\n      applications: [],\n    };\n  }\n\n  componentDidMount() {\n    const { query, datasource, onChange } = this.props;\n    isUnmounting = false;\n    datasource.fetchApplications().then((applications) => {\n      if (!isUnmounting) {\n        if (!_.find(applications, { key: null })) {\n          applications.unshift({ key: null, label: ALL_APPLICATIONS });\n        }\n\n        this.setState({\n          applications: applications,\n        });\n\n        if (!query.entity || (!query.entity.key && !query.entity.label)) {\n          query.entity = applications[0];\n        }\n\n        if (!query.callToEntity) {\n          query.callToEntity = call_to_entities[0];\n        }\n        if (!query.applicationCallToEntity) {\n          query.applicationCallToEntity = call_to_entities[0];\n        }\n\n        onChange(query);\n      }\n    });\n\n    datasource.fetchApplicationTags().then((applicationTags: any) => {\n      if (!isUnmounting) {\n        this.props.updateGroups(_.sortBy(applicationTags, 'key'));\n\n        // select a meaningful default group\n        if (!query.group || !query.group.key) {\n          query.group = _.find(applicationTags, ['key', 'endpoint.name']);\n          onChange(query);\n        }\n      }\n    });\n\n    this.props.updateMetrics(datasource.dataSourceApplication.getApplicationMetricsCatalog());\n  }\n\n  componentWillUnmount() {\n    isUnmounting = true;\n  }\n\n  onApplicationChange = (application: SelectableValue) => {\n    const { query, onChange, onRunQuery } = this.props;\n    query.entity = application;\n    onChange(query);\n    onRunQuery();\n  };\n\n  onGroupChange = (group: SelectableValue) => {\n    const { query, onChange, onRunQuery } = this.props;\n    query.group = group;\n\n    if (query.group && query.metricCategory.key === ANALYZE_APPLICATION_METRICS) {\n      query.showGroupBySecondLevel = query.group.type === 'KEY_VALUE_PAIR';\n    }\n\n    if (!query.showGroupBySecondLevel) {\n      query.groupbyTagSecondLevelKey = '';\n    }\n\n    onChange(query);\n    onRunQuery();\n  };\n\n  onApplicationCallToEntityChange = (applicationCallToEntity: string) => {\n    const { query, onChange, onRunQuery } = this.props;\n    query.applicationCallToEntity = applicationCallToEntity;\n    onChange(query);\n    onRunQuery();\n  };\n\n  onCallToEntityChange = (callToEntity: string) => {\n    const { query, onChange, onRunQuery } = this.props;\n    query.callToEntity = callToEntity;\n    onChange(query);\n    onRunQuery();\n  };\n\n  debouncedRunQuery = _.debounce(this.props.onRunQuery, 500);\n\n  onGroupByTagSecondLevelKeyChange = (eventItem: ChangeEvent<HTMLInputElement>) => {\n    const { query, onChange } = this.props;\n    query.groupbyTagSecondLevelKey = eventItem.currentTarget.value;\n    onChange(query);\n\n    // onRunQuery with 500ms delay after last debounce\n    this.debouncedRunQuery();\n  };\n\n  render() {\n    const { query, groups } = this.props;\n\n    return (\n      <div className={'gf-form'}>\n        <FormWrapper stretch={true}>\n          <InlineFormLabel className={'query-keyword'} width={14} tooltip={'Select your application.'}>\n            Application\n          </InlineFormLabel>\n          <Entity value={query.applicationCallToEntity} onChange={this.onApplicationCallToEntityChange} />\n          <Select\n            menuPlacement={'bottom'}\n            width={0}\n            isSearchable={true}\n            value={query.entity}\n            options={this.state.applications}\n            onChange={this.onApplicationChange}\n          />\n        </FormWrapper>\n\n        <FormWrapper stretch={true}>\n          <InlineFormLabel className={'query-keyword'} width={7} tooltip={'Group by tag.'}>\n            Group by\n          </InlineFormLabel>\n          <Entity value={query.callToEntity} onChange={this.onCallToEntityChange} />\n          <Select\n            menuPlacement={'bottom'}\n            width={0}\n            isSearchable={true}\n            options={groups}\n            value={query.group}\n            onChange={this.onGroupChange}\n          />\n        </FormWrapper>\n\n        <div style={!query.showGroupBySecondLevel ? { display: 'none' } : {}}>\n          <Input\n            type={'text'}\n            value={query.groupbyTagSecondLevelKey}\n            onChange={this.onGroupByTagSecondLevelKeyChange}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n","import { Tooltip, useTheme } from '@grafana/ui';\nimport React, { useState } from 'react';\n\nimport './ApplicationBoundaryScope.css';\n\nconst INBOUND = 'INBOUND';\nconst ALL = 'ALL';\n\nconst dropdown = {\n  position: 'relative',\n  background: 'transparent',\n  width: '32px',\n  height: '32px',\n  marginRight: '4px',\n} as React.CSSProperties;\n\nconst iconSize = 30;\n\nconst inboundIcon = (\n  <svg className={'iconStyle'} height={iconSize} width={iconSize}>\n    <path\n      transform=\"translate(3, 5)\"\n      fill=\"#33a2e5\"\n      d=\"M12.7891666,14.6051302 L12.7751756,19.8293818 L11.4691127,19.8328795 L11.4776628,16.6402814 L6.96695389,21.1509902 L6.2433066,20.427343 L10.7540155,15.9166341 L7.56141732,15.9251842 L7.56491507,14.6191213 L12.7891666,14.6051302 Z M15.754133,9.38135895 C17.1795716,9.38135895 18.3857119,10.5874993 18.3857119,12.0129379 C18.3857119,13.4383765 17.1795716,14.6445168 15.754133,14.6445168 C14.3286944,14.6445168 13.122554,13.4383765 13.122554,12.0129379 C13.122554,10.5874993 14.3286944,9.38135895 15.754133,9.38135895 Z M6.96695389,3.2433066 L11.4776628,7.75401547 L11.4691127,4.56141732 L12.7751756,4.56491507 L12.7891666,9.7891666 L7.56491507,9.77517557 L7.56141732,8.46911269 L10.7540155,8.47766276 L6.2433066,3.96695389 L6.96695389,3.2433066 Z\"\n    />\n  </svg>\n);\n\nconst allIcon = (\n  <svg className={'iconStyle'} height={iconSize} width={iconSize}>\n    <path\n      transform=\"translate(3, 5)\"\n      fill=\"#33a2e5\"\n      d=\"M7.54586,15 L7.53186897,20.2242515 L6.22580608,20.2277493 L6.23435616,17.0351511 L1.72364729,21.54586 L1,20.8222127 L5.51070887,16.3115038 L2.31811071,16.3200539 L2.32160847,15.013991 L7.54586,15 Z M14.1975552,7.94441147 L17.901552,11.628622 L14.1975552,15.3128325 L13.271556,14.3917799 L15.5351096,12.1403179 L12.4724561,12.1407167 C12.2827518,13.474447 11.1361413,14.5 9.75,14.5 C8.23121694,14.5 7,13.2687831 7,11.75 C7,10.2312169 8.23121694,9 9.75,9 C11.0508538,9 12.1407461,9.90323356 12.4267385,11.1167623 L15.5351096,11.1169261 L13.271556,8.8654641 L14.1975552,7.94441147 Z M20.75,9 C22.2687831,9 23.5,10.2312169 23.5,11.75 C23.5,13.2687831 22.2687831,14.5 20.75,14.5 C19.2312169,14.5 18,13.2687831 18,11.75 C18,10.2312169 19.2312169,9 20.75,9 Z M1.72364729,2 L6.23435616,6.51070887 L6.22580608,3.31811071 L7.53186897,3.32160847 L7.54586,8.54586 L2.32160847,8.53186897 L2.31811071,7.22580608 L5.51070887,7.23435616 L1,2.72364729 L1.72364729,2 Z\"\n    />\n  </svg>\n);\n\n/**\n * Props have to be:\n *   value: string\n *   onChange: function that accepts a string as a parameter and returns void\n *   disabled: boolean\n */\nexport default function ApplicationBoundaryScope(props: any) {\n  const theme = useTheme();\n\n  const opacity = props.disabled ? 0.5 : 1;\n\n  const dropdown__list__item = {\n    background: theme.colors.bg2,\n    cursor: 'pointer',\n    listStyle: 'none',\n    borderRadius: '3px',\n    height: '32px',\n    opacity: opacity,\n  } as React.CSSProperties;\n\n  const [active, setActive] = useState(false);\n\n  function toggleDropdown() {\n    if (!props.disabled) {\n      setActive(!active);\n    }\n  }\n\n  function handleClick(entity: string) {\n    props.onChange(entity);\n    setActive(false);\n  }\n\n  return (\n    <div style={dropdown}>\n      <div\n        onClick={() => toggleDropdown()}\n        onBlur={() => setActive(false)}\n        style={dropdown__list__item}\n        contentEditable\n      >\n        <Tooltip content={props.value ? props.value : ALL} theme={'info'} placement={'top'}>\n          {props.value === INBOUND ? inboundIcon : allIcon}\n        </Tooltip>\n      </div>\n\n      <ul className={active ? 'dropdown-list-active' : 'dropdown-list'}>\n        <li onClick={() => handleClick(INBOUND)} key={INBOUND} style={dropdown__list__item}>\n          <div className={'iconTextContainer'}>\n            {inboundIcon} <span className={'iconTextStyle'}>{INBOUND}</span>\n          </div>\n        </li>\n        <li onClick={() => handleClick(ALL)} key={ALL} style={dropdown__list__item}>\n          <div className={'iconTextContainer'}>\n            {allIcon} <span className={'iconTextStyle'}>{ALL}</span>\n          </div>\n        </li>\n      </ul>\n    </div>\n  );\n}\n","import { ALL_APPLICATIONS, ALL_ENDPOINTS, ALL_SERVICES } from '../../GlobalVariables';\nimport { InlineFormLabel, Input, Select } from '@grafana/ui';\nimport React, { ChangeEvent } from 'react';\n\nimport ApplicationBoundaryScope from './ApplicationBoundaryScope';\nimport { DataSource } from '../../datasources/DataSource';\nimport { InstanaQuery } from '../../types/instana_query';\nimport { SelectableValue } from '@grafana/data';\nimport _ from 'lodash';\n\ninterface ApplicationServiceEndpointMetricsState {\n  applications: SelectableValue[];\n  services: SelectableValue[];\n  endpoints: SelectableValue[];\n  value: SelectableValue;\n}\n\ninterface Props {\n  query: InstanaQuery;\n\n  onRunQuery(): void;\n\n  onChange(value: InstanaQuery): void;\n\n  updateMetrics(metrics: SelectableValue[]): void;\n\n  datasource: DataSource;\n}\n\nlet isUnmounting = false;\n\nexport class ApplicationServiceEndpointMetrics extends React.Component<Props, ApplicationServiceEndpointMetricsState> {\n  constructor(props: any) {\n    super(props);\n    this.state = {\n      applications: [],\n      services: [],\n      endpoints: [],\n      value: {\n        value: 2,\n        imgUrl: '../../resources/dest.png',\n      },\n    };\n  }\n\n  componentDidMount() {\n    isUnmounting = false;\n    this.loadApplications();\n    this.loadServices();\n    this.loadEndpoints();\n\n    const { datasource } = this.props;\n    this.props.updateMetrics(datasource.dataSourceApplication.getApplicationMetricsCatalog());\n  }\n\n  componentWillUnmount() {\n    isUnmounting = true;\n  }\n\n  loadApplications() {\n    const { query, onChange, datasource } = this.props;\n    datasource.fetchApplications().then((applications) => {\n      if (!isUnmounting) {\n        if (!_.find(applications, { key: null })) {\n          applications.unshift({ key: null, label: ALL_APPLICATIONS });\n        }\n        this.setState({\n          applications: applications,\n        });\n\n        // replace removed application and preselect entity\n        if (query.entity && query.entity.key && !_.find(applications, (app) => app.key === query.entity.key)) {\n          query.entity = applications[0];\n        } else if ((!query.entity || !query.entity.key) && applications) {\n          query.entity = applications[0];\n        }\n\n        onChange(query);\n      }\n    });\n  }\n\n  loadServices() {\n    const { query, onChange, datasource } = this.props;\n    datasource.fetchServices(query).then((services) => {\n      if (!isUnmounting) {\n        if (!_.find(services, { key: null })) {\n          services.unshift({ key: null, label: ALL_SERVICES });\n        }\n        this.setState({\n          services: services,\n        });\n\n        // replace removed service and preselect service\n        if (query.service && query.service.key) {\n          if (!_.find(services, (app) => app.key === query.service.key)) {\n            query.service = services[0];\n          }\n        } else {\n          query.service = services[0];\n        }\n\n        onChange(query);\n      }\n    });\n  }\n\n  loadEndpoints() {\n    const { query, onChange, datasource } = this.props;\n    datasource.fetchEndpoints(query).then((endpoints) => {\n      if (!isUnmounting) {\n        if (!_.find(endpoints, { key: null })) {\n          endpoints.unshift({ key: null, label: ALL_ENDPOINTS });\n        }\n        this.setState({\n          endpoints: endpoints,\n        });\n\n        // replace removed endpoint and preselect endpoint\n        if (query.endpoint && query.endpoint.key) {\n          if (!_.find(endpoints, (app) => app.key === query.endpoint.key)) {\n            query.endpoint = { key: null, label: ALL_ENDPOINTS };\n          }\n        } else {\n          query.endpoint = { key: null, label: ALL_ENDPOINTS };\n        }\n\n        onChange(query);\n      }\n    });\n  }\n\n  onApplicationChange = (application: SelectableValue) => {\n    const { query, onChange, onRunQuery } = this.props;\n    query.entity = application;\n    if (application.boundaryScope !== '') {\n      //set the default boundary scope that is configured for this application\n      query.applicationBoundaryScope = application.boundaryScope;\n    } else {\n      if (query.applicationBoundaryScope !== 'ALL' && query.applicationBoundaryScope !== 'INBOUND') {\n        //if no default is set, set it to INBOUND\n        query.applicationBoundaryScope = 'INBOUND';\n      }\n    }\n\n    onChange(query);\n    this.loadServices();\n    this.loadEndpoints();\n    onRunQuery();\n  };\n\n  onServiceChange = (service: SelectableValue) => {\n    const { query, onChange, onRunQuery } = this.props;\n    query.service = service;\n    onChange(query);\n    this.loadEndpoints();\n    onRunQuery();\n  };\n\n  onEndpointChange = (endpoint: SelectableValue) => {\n    const { query, onChange, onRunQuery } = this.props;\n    query.endpoint = endpoint;\n    onChange(query);\n    onRunQuery();\n  };\n\n  debouncedRunQuery = _.debounce(this.props.onRunQuery, 500);\n\n  onGroupByTagSecondLevelKeyChange = (eventItem: ChangeEvent<HTMLInputElement>) => {\n    const { query, onChange } = this.props;\n    query.groupbyTagSecondLevelKey = eventItem.currentTarget.value;\n    onChange(query);\n\n    // onRunQuery with 500ms delay after last debounce\n    this.debouncedRunQuery();\n  };\n\n  onApplicationBoundaryScopeChange = (scope: string) => {\n    const { query, onChange, onRunQuery } = this.props;\n    query.applicationBoundaryScope = scope;\n    onChange(query);\n    this.loadServices();\n    this.loadEndpoints();\n    onRunQuery();\n  };\n\n  render() {\n    const { query } = this.props;\n\n    return (\n      <div className={'gf-form'}>\n        <InlineFormLabel className={'query-keyword'} width={14} tooltip={'Select your application.'}>\n          Application\n        </InlineFormLabel>\n        <ApplicationBoundaryScope\n          value={query.applicationBoundaryScope}\n          disabled={!query.entity?.key}\n          onChange={this.onApplicationBoundaryScopeChange}\n        />\n        <Select\n          menuPlacement={'bottom'}\n          width={0}\n          isSearchable={true}\n          value={query.entity}\n          options={this.state.applications}\n          onChange={this.onApplicationChange}\n        />\n\n        <InlineFormLabel className={'query-keyword'} width={6} tooltip={'Select your service.'}>\n          Service\n        </InlineFormLabel>\n        <Select\n          menuPlacement={'bottom'}\n          width={0}\n          isSearchable={true}\n          value={query.service}\n          options={this.state.services}\n          onChange={this.onServiceChange}\n        />\n\n        <InlineFormLabel className={'query-keyword'} width={6} tooltip={'Select your endpoint.'}>\n          Endpoint\n        </InlineFormLabel>\n        <Select\n          menuPlacement={'bottom'}\n          width={0}\n          isSearchable={true}\n          value={query.endpoint}\n          options={this.state.endpoints}\n          onChange={this.onEndpointChange}\n        />\n\n        <div style={!query.showGroupBySecondLevel ? { display: 'none' } : {}}>\n          <Input value={query.groupbyTagSecondLevelKey} onChange={this.onGroupByTagSecondLevelKeyChange} />\n        </div>\n      </div>\n    );\n  }\n}\n","import '../plugin.css';\nimport { InlineFormLabel, Input, Select } from '@grafana/ui';\nimport React, { ChangeEvent } from 'react';\nimport { DataSource } from '../../datasources/DataSource';\nimport FormWrapper from '../FormField/FormWrapper';\nimport { InstanaQuery } from '../../types/instana_query';\nimport { PLEASE_SPECIFY } from '../../GlobalVariables';\nimport { SelectableValue } from '@grafana/data';\nimport _ from 'lodash';\nimport call_to_entities from '../../lists/apply_call_to_entities';\n\ninterface AnalyzeState {\n  entityTypes: SelectableValue[];\n}\ninterface Props {\n  query: InstanaQuery;\n  groups: SelectableValue[];\n  updateGroups(groups: SelectableValue[]): void;\n  onRunQuery(): void;\n  onChange(value: InstanaQuery): void;\n  updateMetrics(metrics: any): void;\n  datasource: DataSource;\n}\nlet isUnmounting = false;\nexport class Explore extends React.Component<Props, AnalyzeState> {\n  constructor(props: any) {\n    super(props);\n    this.state = {\n      entityTypes: [],\n    };\n  }\n  componentDidMount() {\n    const { query, datasource, onChange } = this.props;\n    isUnmounting = false;\n    datasource.getEntityTypes().then((entityTypes: SelectableValue[]) => {\n      if (!isUnmounting) {\n        if (!_.find(entityTypes, { key: null })) {\n          entityTypes.unshift({ key: null, label: PLEASE_SPECIFY });\n        }\n        this.setState({\n          entityTypes: entityTypes,\n        });\n        if (!query.entity || (!query.entity.key && !query.entity.label)) {\n          query.entity = entityTypes[0];\n        }\n        if (!query.callToEntity) {\n          query.callToEntity = call_to_entities[0];\n        }\n        if (!query.applicationCallToEntity) {\n          query.applicationCallToEntity = call_to_entities[0];\n        }\n        onChange(query);\n      }\n    });\n  }\n  componentWillUnmount() {\n    isUnmounting = true;\n  }\n  onEntityChange = (entityType: SelectableValue) => {\n    const { query, datasource, onChange, onRunQuery } = this.props;\n    query.entity = entityType;\n    onChange(query);\n    onRunQuery();\n    datasource.fetchMetricsForEntityType(query).then((result: any) => {\n      this.props.updateMetrics(result);\n    });\n  };\n  onInfraCallToEntityChange = (applicationCallToEntity: string) => {\n    const { query, onChange, onRunQuery } = this.props;\n    query.applicationCallToEntity = applicationCallToEntity;\n    onChange(query);\n    onRunQuery();\n  };\n  debouncedRunQuery = _.debounce(this.props.onRunQuery, 500);\n  onCallToEntityChange = (eventItem: ChangeEvent<HTMLInputElement>) => {\n    const { query, onChange } = this.props;\n    query.callToEntity = eventItem.currentTarget.value;\n    onChange(query);\n    // onRunQuery with 500ms delay after last debounce\n    this.debouncedRunQuery();\n  };\n  onGroupByTagSecondLevelKeyChange = (eventItem: ChangeEvent<HTMLInputElement>) => {\n    const { query, onChange } = this.props;\n    query.group = {\n      key: eventItem.currentTarget.value,\n      label: eventItem.currentTarget.value,\n      type: 'STRING',\n    };\n    query.groupbyTagSecondLevelKey = eventItem.currentTarget.value;\n    onChange(query);\n    // onRunQuery with 500ms delay after last debounce\n    this.debouncedRunQuery();\n  };\n  render() {\n    const { query } = this.props;\n    return (\n      <div className={'gf-form'}>\n        <FormWrapper stretch={true}>\n          <InlineFormLabel className={'query-keyword'} width={14} tooltip={'Select your Entity Type.'}>\n            Entity types\n          </InlineFormLabel>\n          <Select\n            menuPlacement={'bottom'}\n            width={0}\n            isSearchable={true}\n            value={query.entity}\n            options={this.state.entityTypes}\n            onChange={this.onEntityChange}\n          />\n        </FormWrapper>\n        <FormWrapper stretch={true}>\n          <InlineFormLabel className={'query-keyword'} width={7} tooltip={'Enter the Group by tag.'}>\n            Group by\n          </InlineFormLabel>\n          <Input\n            type={'text'}\n            value={query.groupbyTagSecondLevelKey}\n            onChange={this.onGroupByTagSecondLevelKeyChange}\n          />\n        </FormWrapper>\n      </div>\n    );\n  }\n}\n","export default [\n  // STRING\n  { key: 'EQUALS', label: 'equals', type: 'STRING' },\n  { key: 'NOT_EQUAL', label: 'does not equal', type: 'STRING' },\n  { key: 'CONTAINS', label: 'contains', type: 'STRING' },\n  { key: 'NOT_CONTAIN', label: 'does not contain', type: 'STRING' },\n  { key: 'NOT_EMPTY', label: 'is present', type: 'STRING' },\n  { key: 'IS_EMPTY', label: 'is not present', type: 'STRING' },\n  { key: 'STARTS_WITH', label: 'starts with', type: 'STRING' },\n  { key: 'ENDS_WITH', label: 'ends with', type: 'STRING' },\n  { key: 'NOT_STARTS_WITH', label: 'does not start with', type: 'STRING' },\n  { key: 'NOT_ENDS_WITH', label: 'does not end with', type: 'STRING' },\n  // NUMBER\n  { key: 'EQUALS', label: '=', type: 'NUMBER' },\n  { key: 'NOT_EQUAL', label: '!=', type: 'NUMBER' },\n  { key: 'LESS_THAN', label: '<', type: 'NUMBER' },\n  { key: 'GREATER_THAN', label: '>', type: 'NUMBER' },\n  { key: 'IS_EMPTY', label: 'is empty', type: 'NUMBER' },\n  { key: 'NOT_EMPTY', label: 'is not empty', type: 'NUMBER' },\n  { key: 'LESS_OR_EQUAL_THAN', label: 'less or equal than', type: 'NUMBER' },\n  { key: 'GREATER_OR_EQUAL_THAN', label: 'greater or equal than', type: 'NUMBER' },\n  // BOOLEAN\n  { key: 'EQUALS', label: 'is', type: 'BOOLEAN' },\n  // KEY_VALUE_PAIR\n  { key: 'EQUALS', label: 'equals', type: 'KEY_VALUE_PAIR' },\n  { key: 'NOT_EQUAL', label: 'does not equal', type: 'KEY_VALUE_PAIR' },\n  { key: 'CONTAINS', label: 'contains', type: 'KEY_VALUE_PAIR' },\n  { key: 'NOT_CONTAIN', label: 'does not contain', type: 'KEY_VALUE_PAIR' },\n  { key: 'NOT_EMPTY', label: 'is present', type: 'KEY_VALUE_PAIR' },\n  { key: 'IS_EMPTY', label: 'is not present', type: 'KEY_VALUE_PAIR' },\n  { key: 'STARTS_WITH', label: 'starts with', type: 'KEY_VALUE_PAIR' },\n  { key: 'ENDS_WITH', label: 'ends with', type: 'KEY_VALUE_PAIR' },\n  { key: 'IS_BLANK', label: 'is blank', type: 'KEY_VALUE_PAIR' },\n  { key: 'NOT_BLANK', label: 'is not blank', type: 'KEY_VALUE_PAIR' },\n  // STRING_SET\n  { key: 'EQUALS', label: 'equals', type: 'STRING_SET' },\n  { key: 'NOT_EQUAL', label: 'does not equal', type: 'STRING_SET' },\n  { key: 'CONTAINS', label: 'contains', type: 'STRING_SET' },\n  { key: 'NOT_CONTAIN', label: 'does not contain', type: 'STRING_SET' },\n  { key: 'NOT_EMPTY', label: 'is present', type: 'STRING_SET' },\n  { key: 'IS_EMPTY', label: 'is not present', type: 'STRING_SET' },\n];\n","import React from 'react';\n\nimport { InlineFormLabel, TextArea, PopoverContent } from '@grafana/ui';\nimport FormWrapper from './FormWrapper';\n\ninterface State {}\n\ninterface Props {\n  label: string;\n  value: string;\n  invalid?: boolean;\n  disabled?: boolean;\n  placeholder?: string;\n  queryKeyword?: boolean;\n  labelWidth?: number | 14;\n  inputWidth?: number | 30;\n  tooltip?: PopoverContent;\n\n  onChange(event?: any): any;\n}\n\n/**\n * Default input text area including label. Input text area is grafana/ui <TextArea />.\n */\nexport default class FormTextArea extends React.Component<Props, State> {\n  constructor(props: any) {\n    super(props);\n  }\n\n  render() {\n    const { label, tooltip, queryKeyword, disabled, labelWidth = 14, inputWidth = 30, ...remainingProps } = this.props;\n\n    return (\n      <FormWrapper disabled={disabled} stretch={!inputWidth}>\n        <InlineFormLabel className={queryKeyword ? 'query-keyword' : ''} width={labelWidth} tooltip={tooltip}>\n          {label}\n        </InlineFormLabel>\n        <TextArea rows={4} width={inputWidth} disabled={disabled} {...remainingProps} />\n      </FormWrapper>\n    );\n  }\n}\n","import {\n  ANALYZE_APPLICATION_METRICS,\n  ANALYZE_MOBILE_APP_METRICS,\n  INFRASTRUCTURE_ANALYZE,\n  PLEASE_SPECIFY,\n} from '../../GlobalVariables';\nimport { Button, InlineFormLabel, Input, Select } from '@grafana/ui';\nimport React, { FormEvent } from 'react';\n\nimport { DataSource } from '../../datasources/DataSource';\nimport Entity from '../Entity/Entity';\nimport { InstanaQuery } from '../../types/instana_query';\nimport { SelectableValue } from '@grafana/data';\nimport TagFilter from '../../types/tag_filter';\nimport _ from 'lodash';\nimport call_to_entities from '../../lists/apply_call_to_entities';\nimport operators from '../../lists/operators';\nimport FormTextArea from 'components/FormField/FormTextArea';\n\ninterface FilterState {\n  textareaValue: string;\n}\n\ninterface Props {\n  query: InstanaQuery;\n  datasource: DataSource;\n  groups: SelectableValue[];\n\n  onRunQuery(): void;\n\n  onChange(value: InstanaQuery): void;\n}\n\nexport class Filters extends React.Component<Props, FilterState> {\n  OPERATOR_STRING = 'STRING';\n  OPERATOR_STRING_SET = 'STRING_SET';\n  OPERATOR_NUMBER = 'NUMBER';\n  OPERATOR_BOOLEAN = 'BOOLEAN';\n  OPERATOR_KEY_VALUE = 'KEY_VALUE_PAIR';\n\n  constructor(props: any) {\n    super(props);\n    this.state = {\n      textareaValue: '',\n    };\n  }\n\n  addTagFilter = () => {\n    const { query, onChange } = this.props;\n    query.filters.push({\n      tag: query.group,\n      entity: call_to_entities[0],\n      operator: this.filterOperatorsOnType(query.group.type)[0],\n      booleanValue: false,\n      numberValue: 0,\n      stringValue: '',\n      isValid: false,\n    });\n\n    onChange(query);\n  };\n\n  removeTagFilter = (index: number) => {\n    const { query, onChange, onRunQuery } = this.props;\n    query.filters.splice(index, 1);\n\n    onChange(query);\n    onRunQuery();\n  };\n\n  filterOperatorsOnType(type: any): SelectableValue[] {\n    return _.filter(operators, (o) => o.type === type);\n  }\n\n  onGroupChange(group: SelectableValue, index: number) {\n    const { query } = this.props;\n    query.filters[index].tag = group;\n\n    let ops = this.filterOperatorsOnType(group.type);\n    if (!_.includes(ops, query.filters[index].operator)) {\n      query.filters[index].operator = ops[0];\n    }\n\n    this.validateChangeAndRun(index);\n  }\n\n  onCallToEntityChange = (callToEntity: string, index: number) => {\n    const { query } = this.props;\n    query.filters[index].entity = callToEntity;\n\n    this.validateChangeAndRun(index);\n  };\n\n  onOperatorChange = (operator: SelectableValue, index: number) => {\n    const { query } = this.props;\n    query.filters[index].operator = operator;\n\n    this.validateChangeAndRun(index);\n  };\n\n  canShowStringInput(filter: TagFilter) {\n    return (\n      filter.tag.type === this.OPERATOR_KEY_VALUE ||\n      (!filter.operator.key.includes('EMPTY') &&\n        (filter.tag.type === this.OPERATOR_STRING || filter.tag.type === this.OPERATOR_STRING_SET))\n    );\n  }\n\n  canShowNumberInput(filter: TagFilter) {\n    return filter.tag.type === this.OPERATOR_NUMBER && !filter.operator.key.includes('EMPTY');\n  }\n\n  debouncedRunQuery = _.debounce(this.props.onRunQuery, 500);\n\n  onTagFilterStringValueChange = (value: FormEvent<HTMLInputElement>, index: number) => {\n    const { query } = this.props;\n    query.filters[index].stringValue = value.currentTarget.value;\n\n    this.validateChangeAndRun(index, true);\n  };\n\n  onTagFilterNumberValueChange = (value: FormEvent<HTMLInputElement>, index: number) => {\n    const { query } = this.props;\n    query.filters[index].numberValue = value.currentTarget.valueAsNumber;\n\n    this.validateChangeAndRun(index, true);\n  };\n\n  onTagFilterBooleanValueChange(value: SelectableValue, index: number) {\n    const { query } = this.props;\n    query.filters[index].booleanValue = value.key;\n\n    this.validateChangeAndRun(index);\n  }\n\n  onFilterChange = (event: FormEvent<HTMLInputElement>) => {\n    const { query, onChange, onRunQuery } = this.props;\n    const filterValue = event.currentTarget.value;\n    this.setState({\n      textareaValue: event.currentTarget.value,\n    });\n    if (filterValue.trim() !== '') {\n      query.filters = JSON.parse(filterValue);\n    } else {\n      query.filters = [];\n    }\n    onChange(query);\n    this.debouncedRunQuery = _.debounce(this.props.onRunQuery, 500);\n    onRunQuery();\n  };\n\n  validateChangeAndRun(index: number, runDebounced = false) {\n    const { query, onChange, onRunQuery } = this.props;\n    if (query.filters[index].tag) {\n      if (\n        query.filters[index].operator.key.includes('EMPTY') &&\n        (this.OPERATOR_STRING === query.filters[index].tag.type ||\n          this.OPERATOR_STRING_SET === query.filters[index].tag.type)\n      ) {\n        query.filters[index].isValid = true;\n        // to avoid sending value with query.filters[index] operators that do not require a value (such as is-present/is-not-present)\n        query.filters[index].stringValue = '';\n        query.filters[index].numberValue = 0;\n        query.filters[index].booleanValue = true;\n      } else if (\n        (this.OPERATOR_STRING === query.filters[index].tag.type ||\n          this.OPERATOR_STRING_SET === query.filters[index].tag.type) &&\n        query.filters[index].stringValue\n      ) {\n        query.filters[index].isValid = true;\n      } else if (\n        query.filters[index].operator.key.includes('EMPTY') &&\n        this.OPERATOR_KEY_VALUE === query.filters[index].tag.type &&\n        query.filters[index].stringValue\n      ) {\n        query.filters[index].isValid = true;\n      } else if (\n        this.OPERATOR_KEY_VALUE === query.filters[index].tag.type &&\n        query.filters[index].stringValue &&\n        query.filters[index].stringValue.includes('=')\n      ) {\n        query.filters[index].isValid = true;\n      } else if (this.OPERATOR_NUMBER === query.filters[index].tag.type && !isNaN(query.filters[index].numberValue)) {\n        query.filters[index].isValid = true;\n      } else if (\n        this.OPERATOR_BOOLEAN === query.filters[index].tag.type &&\n        query.filters[index].booleanValue !== undefined\n      ) {\n        query.filters[index].isValid = true;\n      }\n    } else {\n      query.filters[index].isValid = false;\n    }\n\n    onChange(query);\n    if (runDebounced) {\n      // onRunQuery with 500ms delay after last debounce\n      this.debouncedRunQuery();\n    } else {\n      onRunQuery();\n    }\n  }\n\n  render() {\n    const { query, groups } = this.props;\n    if (query.metricCategory.key === INFRASTRUCTURE_ANALYZE) {\n      return (\n        <div className={'gf-form'}>\n          <FormTextArea\n            queryKeyword\n            inputWidth={0}\n            label={'TagFilterExpression'}\n            tooltip={'Enter the tagFilterExpression here '}\n            placeholder=\"[{Enter the filter JSON here}]\"\n            value={this.state.textareaValue}\n            onChange={(event) => this.onFilterChange(event)}\n          />\n        </div>\n      );\n    } else {\n      let listFilter = query.filters?.map((singleFilter, index) => {\n        return (\n          <div key={'filter_' + index} className={'gf-form'}>\n            <InlineFormLabel className={'query-keyword'} width={14} tooltip={'Filter by tag.'}>\n              {index + 1}. filter\n            </InlineFormLabel>\n            {query.metricCategory.key === ANALYZE_APPLICATION_METRICS && ANALYZE_MOBILE_APP_METRICS && (\n              <Entity\n                value={query.filters[index].entity}\n                onChange={(callToEntity: string) => this.onCallToEntityChange(callToEntity, index)}\n              />\n            )}\n            <Select\n              menuPlacement={'bottom'}\n              width={30}\n              isSearchable={true}\n              value={query.filters[index].tag}\n              options={groups}\n              onChange={(group) => this.onGroupChange(group, index)}\n            />\n            <Select\n              menuPlacement={'bottom'}\n              width={20}\n              isSearchable={true}\n              value={query.filters[index].operator}\n              options={this.filterOperatorsOnType(query.filters[index].tag.type)}\n              onChange={(operator) => this.onOperatorChange(operator, index)}\n            />\n\n            {this.canShowStringInput(query.filters[index]) && (\n              <Input\n                width={30}\n                value={query.filters[index].stringValue}\n                placeholder={query.filters[index].tag.type === 'KEY_VALUE_PAIR' ? 'key=value' : PLEASE_SPECIFY}\n                onChange={(event) => this.onTagFilterStringValueChange(event, index)}\n              />\n            )}\n\n            {this.canShowNumberInput(query.filters[index]) && (\n              <Input\n                type={'number'}\n                width={30}\n                value={query.filters[index].numberValue}\n                placeholder={PLEASE_SPECIFY}\n                onChange={(event) => this.onTagFilterNumberValueChange(event, index)}\n              />\n            )}\n\n            {query.filters[index].tag.type === 'BOOLEAN' && (\n              <Select\n                menuPlacement={'bottom'}\n                width={30}\n                isSearchable={true}\n                onChange={(e) => this.onTagFilterBooleanValueChange(e, index)}\n                value={{ key: '' + query.filters[index].booleanValue, label: '' + query.filters[index].booleanValue }}\n                options={[\n                  { key: false, label: 'false' },\n                  { key: true, label: 'true' },\n                ]}\n              />\n            )}\n\n            <Button variant={'secondary'} onClick={() => this.removeTagFilter(index)}>\n              -\n            </Button>\n          </div>\n        );\n      });\n\n      return (\n        <div>\n          {listFilter}\n\n          <div className={'gf-form'}>\n            <InlineFormLabel width={14} tooltip={'Add an additional tag filter.'}>\n              Add filter\n            </InlineFormLabel>\n            <Button variant={'secondary'} onClick={this.addTagFilter}>\n              +\n            </Button>\n            <div hidden={!query.showWarningCantShowAllResults}>\n              <InlineFormLabel width={12} tooltip={'Add Filter to narrow down the data.'}>\n                ⚠️ Can&apos;t show all results\n              </InlineFormLabel>\n            </div>\n          </div>\n        </div>\n      );\n    }\n  }\n}\n","import React from 'react';\n\nimport { InlineFormLabel, Select, PopoverContent } from '@grafana/ui';\nimport FormWrapper from './FormWrapper';\nimport { SelectableValue } from '@grafana/data';\n\ninterface State {}\n\ninterface Props {\n  label: string;\n  value: SelectableValue;\n  options: any;\n  queryKeyword?: boolean;\n  disabled?: boolean;\n  defaultValue?: SelectableValue;\n  noOptionsMessage?: string;\n  searchable?: boolean | true;\n  labelWidth?: number | 14;\n  inputWidth?: number | 30;\n  placeholder?: string | '-';\n  tooltip?: PopoverContent;\n\n  onChange(event?: any): any;\n}\n\n/**\n * Default select field including label. Select element is grafana/ui <Select />.\n */\nexport default class FormSelect extends React.Component<Props, State> {\n  constructor(props: any) {\n    super(props);\n  }\n\n  render() {\n    const {\n      label,\n      tooltip,\n      searchable = true,\n      disabled,\n      queryKeyword,\n      placeholder = '-',\n      labelWidth = 14,\n      inputWidth = 30,\n      ...remainingProps\n    } = this.props;\n\n    return (\n      <FormWrapper disabled={disabled} stretch={!inputWidth}>\n        <InlineFormLabel className={queryKeyword ? 'query-keyword' : ''} width={labelWidth} tooltip={tooltip}>\n          {label}\n        </InlineFormLabel>\n        <Select\n          menuPlacement={'bottom'}\n          disabled={disabled}\n          width={inputWidth}\n          isSearchable={searchable}\n          placeholder={placeholder}\n          {...remainingProps}\n        />\n      </FormWrapper>\n    );\n  }\n}\n","import React, { ChangeEvent } from 'react';\n\nimport { DataSource } from '../../datasources/DataSource';\nimport { InstanaQuery } from '../../types/instana_query';\nimport { PLEASE_SPECIFY } from '../../GlobalVariables';\nimport FormSelect from '../FormField/FormSelect';\nimport { SelectableValue } from '@grafana/data';\nimport FormInput from '../FormField/FormInput';\nimport _ from 'lodash';\n\ninterface QueryTypeState {}\n\ninterface Props {\n  query: InstanaQuery;\n  datasource: DataSource;\n  queryTypes: SelectableValue[];\n  onRunQuery(): void;\n  loadEntityTypes(filterResult?: boolean): void;\n  onChange(value: InstanaQuery): void;\n  updateMetrics(metrics: SelectableValue[]): void;\n  updateQueryTypes(types: SelectableValue[]): void;\n}\n\nexport class QueryType extends React.Component<Props, QueryTypeState> {\n  constructor(props: any) {\n    super(props);\n  }\n\n  componentDidMount() {\n    const { query, loadEntityTypes } = this.props;\n    if (query.entityQuery) {\n      loadEntityTypes();\n    }\n  }\n\n  onQueryChange = (eventItem: ChangeEvent<HTMLInputElement>) => {\n    const { query, onChange, updateQueryTypes } = this.props;\n    if (eventItem.currentTarget && eventItem.currentTarget.value) {\n      query.entityQuery = eventItem.currentTarget.value;\n    } else {\n      updateQueryTypes([]);\n      query.entityQuery = '';\n      query.entityType = { key: null, label: '-' };\n    }\n\n    onChange(query);\n\n    // loadEntityTypes with 500ms delay after last debounce\n    this.debouncedEntityTypes();\n  };\n\n  onTypeChange = (eventItem: SelectableValue) => {\n    const { query, datasource, onChange } = this.props;\n    query.entityType = eventItem;\n    onChange(query);\n\n    datasource.dataSourceInfrastructure\n      .getMetricsCatalog(query.entityType, query.metricCategory.key)\n      .then((results) => {\n        this.props.updateMetrics(results);\n      });\n  };\n\n  debouncedEntityTypes = _.debounce(this.props.loadEntityTypes, 500);\n\n  render() {\n    const { query, queryTypes } = this.props;\n\n    return (\n      <div className={'gf-form'}>\n        <FormInput\n          queryKeyword\n          inputWidth={0}\n          label={'Query'}\n          tooltip={\n            <div>\n              Specify a query for the entities you wish to plot. Use the dynamic focus syntax:\n              <a href=\"https://www.ibm.com/docs/en/instana-observability/current?topic=instana-filtering-dynamic-focus#syntax\">\n                https://www.ibm.com/docs/en/instana-observability/current?topic=instana-filtering-dynamic-focus#syntax\n              </a>\n            </div>\n          }\n          value={query.entityQuery}\n          placeholder={PLEASE_SPECIFY}\n          onChange={this.onQueryChange}\n        />\n\n        <FormSelect\n          queryKeyword\n          labelWidth={6}\n          label={'Type'}\n          tooltip={'Select an entity type for a list of available metrics.'}\n          noOptionsMessage={'No types found with query'}\n          value={query.entityType}\n          options={queryTypes}\n          onChange={this.onTypeChange}\n        />\n      </div>\n    );\n  }\n}\n","import React from 'react';\n\nimport { DataSource } from '../../datasources/DataSource';\nimport { InstanaQuery } from '../../types/instana_query';\nimport { SelectableValue } from '@grafana/data';\nimport { QueryType } from './QueryType';\n\ninterface InfrastructureBuiltInState {}\n\ninterface Props {\n  query: InstanaQuery;\n  datasource: DataSource;\n  queryTypes: SelectableValue[];\n  onRunQuery(): void;\n  loadEntityTypes(filterResult?: boolean): void;\n  onChange(value: InstanaQuery): void;\n  updateMetrics(metrics: SelectableValue[]): void;\n  updateQueryTypes(types: SelectableValue[]): void;\n}\n\nlet isUnmounting = false;\n\nexport class Infrastructure extends React.Component<Props, InfrastructureBuiltInState> {\n  constructor(props: any) {\n    super(props);\n  }\n\n  componentDidMount() {\n    const { query, onChange, datasource } = this.props;\n    isUnmounting = false;\n\n    if (query.entityQuery && query.entityType && query.entityType.key) {\n      datasource.dataSourceInfrastructure\n        .getMetricsCatalog(query.entityType, query.metricCategory.key)\n        .then((results) => {\n          if (!isUnmounting) {\n            this.props.updateMetrics(results);\n          }\n        });\n    } else {\n      query.metric = {\n        key: null,\n        label: '-',\n      };\n    }\n\n    onChange(query);\n  }\n\n  componentWillUnmount() {\n    isUnmounting = true;\n  }\n\n  render() {\n    const {\n      query,\n      onRunQuery,\n      onChange,\n      updateMetrics,\n      loadEntityTypes,\n      datasource,\n      queryTypes,\n      updateQueryTypes,\n    } = this.props;\n\n    return (\n      <QueryType\n        query={query}\n        onChange={onChange}\n        queryTypes={queryTypes}\n        onRunQuery={onRunQuery}\n        datasource={datasource}\n        updateMetrics={updateMetrics}\n        loadEntityTypes={loadEntityTypes}\n        updateQueryTypes={updateQueryTypes}\n      />\n    );\n  }\n}\n","import React from 'react';\n\nimport {\n  BUILT_IN_METRICS,\n  CUSTOM_METRICS,\n  ANALYZE_APPLICATION_METRICS,\n  INFRASTRUCTURE_ANALYZE,\n} from '../../GlobalVariables';\nimport { DataSource } from '../../datasources/DataSource';\nimport { InstanaQuery } from '../../types/instana_query';\nimport max_metrics from '../../lists/max_metrics';\nimport FormSelect from '../FormField/FormSelect';\nimport FormSwitch from '../FormField/FormSwitch';\nimport { SelectableValue } from '@grafana/data';\nimport _ from 'lodash';\n\ninterface MetricState {\n  possibleTimeIntervals: SelectableValue[];\n  possibleAggregations: SelectableValue[];\n}\n\ninterface Props {\n  query: InstanaQuery;\n  datasource: DataSource;\n  availableMetrics: SelectableValue[];\n\n  updateMetrics(metrics: SelectableValue[]): void;\n\n  onRunQuery(): void;\n\n  onChange(value: InstanaQuery): void;\n}\n\nexport default class Metric extends React.Component<Props, MetricState> {\n  constructor(props: any) {\n    super(props);\n    this.state = {\n      possibleTimeIntervals: [],\n      possibleAggregations: [],\n    };\n  }\n\n  componentDidMount() {\n    const { query, datasource, onChange } = this.props;\n\n    if (\n      !query.timeInterval ||\n      !query.timeInterval.key ||\n      !datasource.availableTimeIntervals.find((i) => i.key === query.timeInterval.key)\n    ) {\n      query.timeInterval = datasource.getDefaultTimeInterval(query);\n    }\n\n    onChange(query);\n  }\n\n  onMetricChange = (metric: SelectableValue) => {\n    const { query, onRunQuery, onChange } = this.props;\n    query.metric = metric;\n\n    if (query.metric && query.metric.key && !_.includes(query.metric.aggregations, query.aggregation)) {\n      query.aggregation = query.metric.aggregations[0];\n    }\n\n    if (query.displayMaxMetricValue && !this.canShowMaxMetricValue()) {\n      query.displayMaxMetricValue = false;\n    }\n\n    query.allMetrics = [];\n    query.showAllMetrics = false;\n\n    onChange(query);\n    onRunQuery();\n  };\n\n  canShowMaxMetricValue() {\n    const { query } = this.props;\n    return (\n      query.entityType &&\n      query.entityType.key === 'host' &&\n      query.metric &&\n      _.find(max_metrics, (m) => m.key === query.metric.key)\n    );\n  }\n\n  onTimeIntervalChange = (timeInterval: SelectableValue) => {\n    const { query, onRunQuery, onChange } = this.props;\n    query.timeInterval = timeInterval;\n    onChange(query);\n    onRunQuery();\n  };\n\n  onAggregationChange = (aggregation: SelectableValue) => {\n    const { query, onRunQuery, onChange } = this.props;\n    query.aggregation = aggregation;\n    onChange(query);\n    onRunQuery();\n  };\n\n  onShowMaxValueChange = (event?: React.SyntheticEvent<HTMLInputElement>) => {\n    const { query, onChange, onRunQuery } = this.props;\n    if (event && event.currentTarget) {\n      query.displayMaxMetricValue = event.currentTarget.checked;\n      onChange(query);\n      onRunQuery();\n    }\n  };\n\n  onShowAllMetricsChange = (event?: React.SyntheticEvent<HTMLInputElement>) => {\n    const { query, onChange, onRunQuery } = this.props;\n    if (event && event.currentTarget) {\n      query.showAllMetrics = event.currentTarget.checked;\n      if (query.showAllMetrics) {\n        query.metric = { key: null, label: `Displaying ${this.props.availableMetrics.length} metrics` };\n        query.allMetrics = this.props.availableMetrics;\n      }\n      onChange(query);\n      onRunQuery();\n    }\n  };\n\n  canShowAggregation() {\n    const { query } = this.props;\n    return query.metricCategory.key >= ANALYZE_APPLICATION_METRICS;\n  }\n\n  canSelectAggregation() {\n    const { query } = this.props;\n    return query.metric && query.metric.aggregations && query.metric.aggregations.length > 1;\n  }\n\n  render() {\n    const { query, datasource } = this.props;\n\n    return (\n      <div className={'gf-form'}>\n        {\n          <FormSelect\n            queryKeyword\n            disabled={query.useFreeTextMetrics}\n            inputWidth={0}\n            label={'Metric'}\n            tooltip={'Select the metric you wish to plot.'}\n            value={query.metric}\n            noOptionsMessage={'No metrics found'}\n            options={this.props.availableMetrics}\n            onChange={this.onMetricChange}\n          />\n        }\n\n        {query.metricCategory.key === BUILT_IN_METRICS && (\n          <FormSwitch\n            queryKeyword\n            disabled={!this.canShowMaxMetricValue()}\n            labelWidth={9}\n            label={'Show max value'}\n            tooltip={\n              \"Displays the maximal value of current metric. Supported for 'Type=Host' with cpu.used, \" +\n              'memory.used and openFiles.used only.'\n            }\n            value={query.displayMaxMetricValue}\n            onChange={this.onShowMaxValueChange}\n          />\n        )}\n\n        {query.metricCategory.key === CUSTOM_METRICS && (\n          <FormSwitch\n            queryKeyword\n            disabled={!query.canShowAllMetrics}\n            labelWidth={9}\n            label={'Show all metrics'}\n            tooltip={\n              'You have the option to show all metrics in the graph once the amount of possible, selectable ' +\n              'metrics is between 1 and 5.'\n            }\n            value={query.showAllMetrics}\n            onChange={this.onShowAllMetricsChange}\n          />\n        )}\n\n        {this.canShowAggregation() && (\n          <FormSelect\n            queryKeyword\n            disabled={!this.canSelectAggregation()}\n            labelWidth={7}\n            inputWidth={12}\n            label={'Aggregation'}\n            tooltip={'Select a metric aggregation.'}\n            value={query.aggregation}\n            options={query.metric.aggregations}\n            onChange={this.onAggregationChange}\n          />\n        )}\n\n        {query.metricCategory.key !== INFRASTRUCTURE_ANALYZE && (\n          <FormSelect\n            queryKeyword\n            disabled={datasource.availableTimeIntervals.length <= 1}\n            labelWidth={5}\n            inputWidth={12}\n            label={'Rollup'}\n            tooltip={'Select the rollup value.'}\n            value={query.timeInterval}\n            options={datasource.availableTimeIntervals}\n            onChange={this.onTimeIntervalChange}\n          />\n        )}\n      </div>\n    );\n  }\n}\n","import React, { ChangeEvent } from 'react';\n\nimport { PLEASE_SPECIFY } from '../../../GlobalVariables';\nimport { DataSource } from '../../../datasources/DataSource';\nimport { InstanaQuery } from '../../../types/instana_query';\nimport { Button, InlineFormLabel } from '@grafana/ui';\nimport FormInput from '../../FormField/FormInput';\nimport { SelectableValue } from '@grafana/data';\n\ninterface MetricFilterState {\n  customFilters: string[];\n}\n\ninterface Props {\n  query: InstanaQuery;\n  datasource: DataSource;\n  availableMetrics: SelectableValue[];\n  onFilterChange(customFilters: string[]): void;\n  onRunQuery(): void;\n  onChange(value: InstanaQuery): void;\n}\n\nexport class MetricFilter extends React.Component<Props, MetricFilterState> {\n  constructor(props: any) {\n    super(props);\n\n    this.state = {\n      customFilters: [],\n    };\n  }\n\n  componentDidMount() {\n    const { query } = this.props;\n    this.setState({ customFilters: query.customFilters });\n  }\n\n  onFilterChange = (eventItem: ChangeEvent<HTMLInputElement>, index: number) => {\n    const customFilters: string[] = this.state.customFilters;\n    customFilters[index] = eventItem.currentTarget.value;\n    this.setState({ customFilters: customFilters });\n\n    this.props.onFilterChange(customFilters);\n  };\n\n  addCustomFilter = () => {\n    let customFilters = this.state.customFilters;\n    customFilters.push('');\n    this.setState({ customFilters: customFilters });\n\n    const { query, onChange } = this.props;\n    query.customFilters = customFilters;\n    onChange(query);\n  };\n\n  removeCustomFilter = (index: number) => {\n    let customFilters: string[] = this.state.customFilters;\n    customFilters.splice(index, 1);\n    this.setState({ customFilters: customFilters });\n\n    this.props.onFilterChange(customFilters);\n  };\n\n  render() {\n    let filter = null;\n    let listFilter = this.state.customFilters.map((filters, index) => {\n      filter = (\n        <div className={'gf-form'}>\n          <FormInput\n            label={index + 1 + '. filter metric select'}\n            value={this.state.customFilters[index]}\n            placeholder={PLEASE_SPECIFY}\n            onChange={(event) => this.onFilterChange(event, index)}\n            tooltip={'Type to suggest metrics.'}\n          />\n          <Button variant={'secondary'} onClick={() => this.removeCustomFilter(index)}>\n            -\n          </Button>\n        </div>\n      );\n      return filter;\n    });\n\n    return (\n      <div>\n        {listFilter}\n\n        <div className={'gf-form'}>\n          <InlineFormLabel width={14} tooltip={'Add an additional metric select filter.'}>\n            Add filter metric select\n          </InlineFormLabel>\n          <Button variant={'secondary'} onClick={this.addCustomFilter}>\n            +\n          </Button>\n        </div>\n      </div>\n    );\n  }\n}\n","export default [\n  { key: 'session_start', label: 'Session Starts' },\n  { key: 'view_change', label: 'View Transitions' },\n  { key: 'crash', label: 'Crashes' },\n  { key: 'http_request', label: 'HTTP Requests' },\n  { key: 'custom', label: 'Custom Events' },\n];\n","import { ALL_MOBILE_APPS, ANALYZE_MOBILE_APP_METRICS } from '../../GlobalVariables';\nimport React, { ChangeEvent } from 'react';\n\nimport { DataSource } from '../../datasources/DataSource';\nimport FormSelect from '../FormField/FormSelect';\nimport { Input } from '@grafana/ui';\nimport { InstanaQuery } from '../../types/instana_query';\nimport { SelectableValue } from '@grafana/data';\nimport _ from 'lodash';\nimport beacon_types from '../../lists/beacon_types_mobile_app';\n\ninterface MobileAppMetricsState {\n  mobileapps: SelectableValue[];\n}\n\ninterface Props {\n  query: InstanaQuery;\n  groups: SelectableValue[];\n  datasource: DataSource;\n\n  updateGroups(groups: SelectableValue[]): void;\n  onRunQuery(): void;\n  onChange(value: InstanaQuery): void;\n  updateMetrics(metrics: SelectableValue[]): void;\n  filterMetricsOnType(type: string): any;\n}\n\nlet isUnmounting = false;\n\nexport class MobileAppMetrics extends React.Component<Props, MobileAppMetricsState> {\n  constructor(props: any) {\n    super(props);\n    this.state = {\n      mobileapps: [],\n    };\n  }\n\n  componentDidMount() {\n    const { query, datasource, onChange } = this.props;\n    isUnmounting = false;\n    datasource.fetchMobileapp().then((mobileapps) => {\n      if (!isUnmounting) {\n        if (!_.find(mobileapps, { key: null })) {\n          mobileapps.unshift({ key: null, label: ALL_MOBILE_APPS });\n        }\n\n        this.setState({\n          mobileapps: mobileapps,\n        });\n\n        if ((!query.entity || !query.entity.key) && mobileapps) {\n          query.entity = mobileapps[0];\n        } else if (query.entity && !_.find(mobileapps, ['key', query.entity.key])) {\n          query.entity = mobileapps[0];\n        }\n\n        onChange(query);\n      }\n    });\n\n    datasource.dataSourceMobileapp.getMobileappTags().then((mobileappTags: any) => {\n      if (!isUnmounting) {\n        this.props.updateGroups(_.sortBy(mobileappTags, 'key'));\n\n        // select a meaningful default group\n        if (!query.group || !query.group.key) {\n          query.group = _.find(mobileappTags, ['key', 'beacon.page.name']);\n          onChange(query);\n        }\n      }\n    });\n\n    if (!query.entityType || !query.entityType.key) {\n      query.entityType = beacon_types[0];\n      onChange(query);\n    }\n\n    datasource.dataSourceMobileapp.getMobileappMetricsCatalog().then((mobileappMetrics: any) => {\n      if (!isUnmounting) {\n        // store all available metrics first and filter by type afterwards\n        this.props.updateMetrics(mobileappMetrics);\n        this.props.filterMetricsOnType(query.entityType.key);\n      }\n    });\n  }\n\n  componentWillUnmount() {\n    isUnmounting = true;\n  }\n\n  onMobileappChange = (mobileapp: SelectableValue) => {\n    const { query, onChange, onRunQuery } = this.props;\n    query.entity = mobileapp;\n    onChange(query);\n    onRunQuery();\n  };\n\n  onBeaconTypeChange = (type: SelectableValue) => {\n    const { query, onChange, filterMetricsOnType } = this.props;\n    query.entityType = type;\n    onChange(query);\n    filterMetricsOnType(query.entityType.key);\n  };\n\n  onGroupChange = (group: SelectableValue) => {\n    const { query, onChange, onRunQuery } = this.props;\n    query.group = group;\n\n    if (query.group && query.metricCategory.key === ANALYZE_MOBILE_APP_METRICS) {\n      query.showGroupBySecondLevel = query.group.type === 'KEY_VALUE_PAIR';\n    }\n    if (!query.showGroupBySecondLevel) {\n      query.groupbyTagSecondLevelKey = '';\n    }\n\n    onChange(query);\n    onRunQuery();\n  };\n\n  debouncedRunQuery = _.debounce(this.props.onRunQuery, 500);\n\n  onGroupByTagSecondLevelKeyChange = (eventItem: ChangeEvent<HTMLInputElement>) => {\n    const { query, onChange } = this.props;\n    query.groupbyTagSecondLevelKey = eventItem.currentTarget.value;\n    onChange(query);\n\n    // onRunQuery with 500ms delay after last debounce\n    this.debouncedRunQuery();\n  };\n\n  render() {\n    const { query, groups } = this.props;\n\n    return (\n      <div className={'gf-form'}>\n        <FormSelect\n          queryKeyword\n          inputWidth={0}\n          label={'Mobile-app'}\n          tooltip={'Select your mobile app.'}\n          noOptionsMessage={'No mobile apps found'}\n          value={query.entity}\n          options={this.state.mobileapps}\n          onChange={this.onMobileappChange}\n        />\n\n        <FormSelect\n          queryKeyword\n          labelWidth={6}\n          label={'Type'}\n          tooltip={'Select a beacon type.'}\n          value={query.entityType}\n          options={beacon_types}\n          onChange={this.onBeaconTypeChange}\n        />\n\n        <FormSelect\n          queryKeyword\n          labelWidth={6}\n          label={'Group by'}\n          tooltip={'Group by tag.'}\n          value={query.group}\n          options={groups}\n          onChange={this.onGroupChange}\n        />\n\n        <div style={!query.showGroupBySecondLevel ? { display: 'none' } : {}}>\n          <Input value={query.groupbyTagSecondLevelKey} onChange={this.onGroupByTagSecondLevelKeyChange} />\n        </div>\n      </div>\n    );\n  }\n}\n","export default [\n  {\n    key: 'SLI',\n    label: 'SLI',\n  },\n  {\n    key: 'Remaining Error Budget',\n    label: 'Remaining Error Budget',\n  },\n  {\n    key: 'Timeseries',\n    label: 'Timeseries',\n  },\n];\n","import React, { ChangeEvent } from 'react';\n\nimport { DataSource } from '../../datasources/DataSource';\nimport { InstanaQuery } from '../../types/instana_query';\nimport { SLO_INFORMATION } from '../../GlobalVariables';\nimport SloSpecifics from '../../lists/slo_specifics';\nimport FormSelect from '../FormField/FormSelect';\nimport { SelectableValue } from '@grafana/data';\nimport FormInput from '../FormField/FormInput';\nimport _ from 'lodash';\n\nconst MAX_VAL = 0.9999;\n\ninterface SloInformationState {\n  sloReports: SelectableValue[];\n  isValidSlo: boolean;\n}\n\ninterface Props {\n  query: InstanaQuery;\n\n  onRunQuery(): void;\n\n  onChange(value: InstanaQuery): void;\n\n  datasource: DataSource;\n}\n\nlet isUnmounting = false;\n\nexport class SloInformation extends React.Component<Props, SloInformationState> {\n  constructor(props: any) {\n    super(props);\n    this.state = {\n      sloReports: [],\n      isValidSlo: true,\n    };\n  }\n\n  componentDidMount() {\n    isUnmounting = false;\n    this.loadSloReports();\n    this.isValid(this.props.query.sloValue);\n  }\n\n  componentWillUnmount() {\n    isUnmounting = true;\n  }\n\n  debouncedRunQuery = _.debounce(this.props.onRunQuery, 500);\n\n  onSloChange = (slo: SelectableValue) => {\n    const { query, onRunQuery } = this.props;\n    query.sloReport = slo;\n    onRunQuery();\n  };\n\n  onSloValueChange = (sloValue: ChangeEvent<HTMLInputElement>) => {\n    const { query } = this.props;\n    query.sloValue = sloValue.currentTarget.value;\n\n    if (this.isValid(query.sloValue)) {\n      // onRunQuery with 500ms delay after last debounce\n      this.debouncedRunQuery();\n    }\n  };\n\n  onSloSpecificChange = (sloSpecific: SelectableValue) => {\n    const { query, onRunQuery } = this.props;\n    query.sloSpecific = sloSpecific;\n    onRunQuery();\n  };\n\n  isValid(val: string): boolean {\n    const valid = !val || (+val >= 0 && +val <= MAX_VAL);\n    this.setState({\n      isValidSlo: valid,\n    });\n    return valid;\n  }\n\n  shouldComponentUpdate(\n    nextProps: Readonly<Props>,\n    nextState: Readonly<SloInformationState>,\n    nextContext: any\n  ): boolean {\n    return nextProps.query.metricCategory.key === SLO_INFORMATION;\n  }\n\n  loadSloReports() {\n    const { query } = this.props;\n    this.props.datasource.getSloReports().then((sloReports) => {\n      if (!isUnmounting) {\n        this.setState({ sloReports: sloReports });\n\n        if (!query.sloReport && sloReports.length >= 1) {\n          query.sloReport = sloReports[0];\n        }\n      }\n    });\n  }\n\n  render() {\n    const { query } = this.props;\n\n    return (\n      <div className={'gf-form'}>\n        <FormSelect\n          queryKeyword\n          inputWidth={0}\n          label={'Configured SLI'}\n          tooltip={'SLI configuration used to compute error budget and SLI values.'}\n          noOptionsMessage={'No configured SLI found'}\n          value={query.sloReport}\n          options={this.state.sloReports}\n          onChange={this.onSloChange}\n        />\n\n        <FormInput\n          queryKeyword\n          labelWidth={7}\n          inputWidth={0}\n          label={'SLO'}\n          tooltip={'Type in your desired SLO threshold from 0 to ' + MAX_VAL}\n          value={query.sloValue}\n          invalid={!this.state.isValidSlo}\n          placeholder={'0.99'}\n          onChange={this.onSloValueChange}\n        />\n\n        <FormSelect\n          queryKeyword\n          labelWidth={7}\n          inputWidth={0}\n          label={'Value type'}\n          tooltip={\n            <div>\n              Select your specific SLO information:\n              <ul>\n                <li>&apos;SLI&apos; requires Gauge visualization</li>\n                <li>&apos;Remaining Error Budget&apos; requires Singlestat visualization</li>\n                <li>&apos;Timeseries&apos; requires Bars draw mode on Graph visualization</li>\n              </ul>\n            </div>\n          }\n          value={query.sloSpecific}\n          options={SloSpecifics}\n          onChange={this.onSloSpecificChange}\n        />\n      </div>\n    );\n  }\n}\n","export default [\n  {\n    key: 'Status',\n    label: 'Status',\n  },\n  {\n    key: 'Service Level Target',\n    label: 'Service Level Target',\n  },\n  {\n    key: 'Total Error Budget',\n    label: 'Total Error Budget',\n  },\n  {\n    key: 'Remaining Error Budget',\n    label: 'Remaining Error Budget',\n  },\n  {\n    key: 'Spended Error Budget',\n    label: 'Spended Error Budget',\n  },\n  {\n    key: 'Timeseries',\n    label: 'Violation Distribution',\n  },\n  {\n    key: 'Error Chart',\n    label: 'Error Chart',\n  },\n  {\n    key: 'Error Accumulation Chart',\n    label: 'Error Accumulation Chart',\n  },\n  {\n    key: 'Error Budget Remain Chart',\n    label: 'Error Budget remain Chart',\n  },\n];\n","import React from 'react';\n\nimport { DataSource } from '../../datasources/DataSource';\nimport FormSelect from '../FormField/FormSelect';\nimport { InstanaQuery } from '../../types/instana_query';\nimport { SLO2_INFORMATION } from '../../GlobalVariables';\nimport { SelectableValue } from '@grafana/data';\nimport Slo2Specifics from '../../lists/slo2_specifics';\nimport _ from 'lodash';\n\ninterface Slo2InformationState {\n  slo2Reports: SelectableValue[];\n  isValidSlo: boolean;\n}\n\ninterface Props {\n  query: InstanaQuery;\n\n  onRunQuery(): void;\n\n  onChange(value: InstanaQuery): void;\n\n  datasource: DataSource;\n}\n\nlet isUnmounting = false;\n\nexport class Slo2Information extends React.Component<Props, Slo2InformationState> {\n  constructor(props: any) {\n    super(props);\n    this.state = {\n      slo2Reports: [],\n      isValidSlo: true,\n    };\n  }\n\n  componentDidMount() {\n    isUnmounting = false;\n    this.loadSloReports();\n  }\n\n  componentWillUnmount() {\n    isUnmounting = true;\n  }\n\n  debouncedRunQuery = _.debounce(this.props.onRunQuery, 500);\n\n  onSlo2Change = (slo: SelectableValue) => {\n    const { query, onRunQuery } = this.props;\n    query.slo2Report = slo;\n    onRunQuery();\n  };\n\n  onSloSpecificChange = (slo2Specific: SelectableValue) => {\n    const { query, onRunQuery, onChange } = this.props;\n    query.slo2Specific = slo2Specific;\n    onChange({ ...query });\n    onRunQuery();\n  };\n\n  shouldComponentUpdate(\n    nextProps: Readonly<Props>,\n    nextState: Readonly<Slo2InformationState>,\n    nextContext: any\n  ): boolean {\n    return nextProps.query.metricCategory.key === SLO2_INFORMATION;\n  }\n\n  loadSloReports() {\n    this.props.datasource.getSlo2Reports().then((slo2Reports) => {\n      if (!isUnmounting) {\n        this.setState({ slo2Reports: slo2Reports });\n      }\n    });\n  }\n\n  render() {\n    const { query } = this.props;\n\n    return (\n      <div className={'gf-form'}>\n        <FormSelect\n          queryKeyword\n          inputWidth={0}\n          label={'SLO Configuration name'}\n          tooltip={'SLI configuration used to compute SLI Report.'}\n          noOptionsMessage={'No configured SLO found'}\n          value={query.slo2Report}\n          options={this.state.slo2Reports}\n          onChange={this.onSlo2Change}\n        />\n\n        <FormSelect\n          queryKeyword\n          labelWidth={7}\n          inputWidth={0}\n          label={'Value type'}\n          tooltip={\n            <div>\n              Select your specific SLO information:\n              <ul>\n                <li>&apos;Status&apos; requires Gauge visualization</li>\n                <li>&apos;Service Level Target&apos; requires Gauge visualization</li>\n                <li>&apos;Total Error Budget&apos; requires Singlestat visualization</li>\n                <li>&apos;Remaining Error Budget&apos; requires Singlestat visualization</li>\n                <li>&apos;Spended Error Budget&apos; requires Singlestat visualization</li>\n                <li>&apos;Violation&apos; requires Bars draw mode on Graph visualization</li>\n                <li>&apos;Error Chart&apos; requires Bars draw mode on Graph visualization</li>\n                <li>&apos;Error Accumulation Chart&apos; requires Bars draw mode on Graph visualization</li>\n                <li>&apos;Error Budget Chart&apos; requires Bars draw mode on Graph visualization</li>\n              </ul>\n            </div>\n          }\n          value={query.slo2Specific}\n          options={Slo2Specifics}\n          onChange={this.onSloSpecificChange}\n        />\n      </div>\n    );\n  }\n}\n","export default [\n  { key: 'pageLoad', label: 'Page Loads' },\n  { key: 'page_change', label: 'Page Transitions' },\n  { key: 'resourceLoad', label: 'Resources' },\n  { key: 'httpRequest', label: 'HTTP Requests' },\n  { key: 'error', label: 'Errors' },\n  { key: 'custom', label: 'Custom Events' },\n];\n","import { ALL_WEBSITES, ANALYZE_WEBSITE_METRICS } from '../../GlobalVariables';\nimport React, { ChangeEvent } from 'react';\n\nimport { DataSource } from '../../datasources/DataSource';\nimport FormSelect from '../FormField/FormSelect';\nimport { Input } from '@grafana/ui';\nimport { InstanaQuery } from '../../types/instana_query';\nimport { SelectableValue } from '@grafana/data';\nimport _ from 'lodash';\nimport beacon_types from '../../lists/beacon_types_website';\n\ninterface WebsiteMetricsState {\n  websites: SelectableValue[];\n}\n\ninterface Props {\n  query: InstanaQuery;\n  groups: SelectableValue[];\n  datasource: DataSource;\n\n  updateGroups(groups: SelectableValue[]): void;\n  onRunQuery(): void;\n  onChange(value: InstanaQuery): void;\n  updateMetrics(metrics: SelectableValue[]): void;\n  filterMetricsOnType(type: string): any;\n}\n\nlet isUnmounting = false;\n\nexport class WebsiteMetrics extends React.Component<Props, WebsiteMetricsState> {\n  constructor(props: any) {\n    super(props);\n    this.state = {\n      websites: [],\n    };\n  }\n\n  componentDidMount() {\n    const { query, datasource, onChange } = this.props;\n    isUnmounting = false;\n    datasource.fetchWebsites().then((websites) => {\n      if (!isUnmounting) {\n        if (!_.find(websites, { key: null })) {\n          websites.unshift({ key: null, label: ALL_WEBSITES });\n        }\n\n        this.setState({\n          websites: websites,\n        });\n\n        if ((!query.entity || !query.entity.key) && websites) {\n          query.entity = websites[0];\n        } else if (query.entity && !_.find(websites, ['key', query.entity.key])) {\n          query.entity = websites[0];\n        }\n\n        onChange(query);\n      }\n    });\n\n    datasource.dataSourceWebsite.getWebsiteTags().then((websiteTags: any) => {\n      if (!isUnmounting) {\n        this.props.updateGroups(_.sortBy(websiteTags, 'key'));\n\n        // select a meaningful default group\n        if (!query.group || !query.group.key) {\n          query.group = _.find(websiteTags, ['key', 'beacon.page.name']);\n          onChange(query);\n        }\n      }\n    });\n\n    if (!query.entityType || !query.entityType.key) {\n      query.entityType = beacon_types[0];\n      onChange(query);\n    }\n\n    datasource.dataSourceWebsite.getWebsiteMetricsCatalog().then((websiteMetrics: any) => {\n      if (!isUnmounting) {\n        // store all available metrics first and filter by type afterwards\n        this.props.updateMetrics(websiteMetrics);\n        this.props.filterMetricsOnType(query.entityType.key);\n      }\n    });\n  }\n\n  componentWillUnmount() {\n    isUnmounting = true;\n  }\n\n  onWebsiteChange = (website: SelectableValue) => {\n    const { query, onChange, onRunQuery } = this.props;\n    query.entity = website;\n    onChange(query);\n    onRunQuery();\n  };\n\n  onBeaconTypeChange = (type: SelectableValue) => {\n    const { query, onChange, filterMetricsOnType } = this.props;\n    query.entityType = type;\n    onChange(query);\n    filterMetricsOnType(query.entityType.key);\n  };\n\n  onGroupChange = (group: SelectableValue) => {\n    const { query, onChange, onRunQuery } = this.props;\n    query.group = group;\n\n    if (query.group && query.metricCategory.key === ANALYZE_WEBSITE_METRICS) {\n      query.showGroupBySecondLevel = query.group.type === 'KEY_VALUE_PAIR';\n    }\n    if (!query.showGroupBySecondLevel) {\n      query.groupbyTagSecondLevelKey = '';\n    }\n\n    onChange(query);\n    onRunQuery();\n  };\n\n  debouncedRunQuery = _.debounce(this.props.onRunQuery, 500);\n\n  onGroupByTagSecondLevelKeyChange = (eventItem: ChangeEvent<HTMLInputElement>) => {\n    const { query, onChange } = this.props;\n    query.groupbyTagSecondLevelKey = eventItem.currentTarget.value;\n    onChange(query);\n\n    // onRunQuery with 500ms delay after last debounce\n    this.debouncedRunQuery();\n  };\n\n  render() {\n    const { query, groups } = this.props;\n\n    return (\n      <div className={'gf-form'}>\n        <FormSelect\n          queryKeyword\n          inputWidth={0}\n          label={'Website'}\n          tooltip={'Select your website.'}\n          noOptionsMessage={'No websites found'}\n          value={query.entity}\n          options={this.state.websites}\n          onChange={this.onWebsiteChange}\n        />\n\n        <FormSelect\n          queryKeyword\n          labelWidth={6}\n          label={'Type'}\n          tooltip={'Select a beacon type.'}\n          value={query.entityType}\n          options={beacon_types}\n          onChange={this.onBeaconTypeChange}\n        />\n\n        <FormSelect\n          queryKeyword\n          labelWidth={6}\n          label={'Group by'}\n          tooltip={'Group by tag.'}\n          value={query.group}\n          options={groups}\n          onChange={this.onGroupChange}\n        />\n\n        <div style={!query.showGroupBySecondLevel ? { display: 'none' } : {}}>\n          <Input value={query.groupbyTagSecondLevelKey} onChange={this.onGroupByTagSecondLevelKeyChange} />\n        </div>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport { DataSource } from '../../datasources/DataSource';\nimport { SelectableValue } from '@grafana/data';\nimport { InstanaQuery } from '../../types/instana_query';\nimport FormSelect from '../FormField/FormSelect';\nimport { PLEASE_SPECIFY } from 'GlobalVariables';\n\ninterface Props {\n  query: InstanaQuery;\n  datasource: DataSource;\n  onChange(value: InstanaQuery): void;\n  onRunQuery(): void;\n  updateMetrics(metrics: SelectableValue[]): void;\n}\n\ninterface State {\n  tests: SelectableValue[];\n}\n\nconst testTypeOptions: SelectableValue[] = [\n  { label: PLEASE_SPECIFY, value: '' },\n  { label: 'Metric', value: 'metric' },\n  { label: 'Results', value: 'results' },\n];\n\nlet isUnmounting = false;\n\nexport class SyntheticMonitoring extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      tests: [],\n    };\n  }\n\n  componentDidMount() {\n    isUnmounting = false;\n    this.fetchSyntheticTests();\n  }\n\n  componentWillUnmount() {\n    isUnmounting = true;\n  }\n\n  fetchSyntheticTests = async () => {\n    const { datasource, query, onChange } = this.props;\n\n    try {\n      const tests = await datasource.dataSourceSyntheticMonitoring.getSyntheticMonitoringtests();\n\n      if (!isUnmounting) {\n        const placeholderOption: SelectableValue = { label: PLEASE_SPECIFY, value: '' };\n\n        const testOptions: SelectableValue[] = [\n          placeholderOption,\n          ...tests.map((test: any) => ({\n            label: test.key,\n            value: test.label,\n            test,\n          })),\n        ];\n\n        this.setState({ tests: testOptions });\n\n        // Set to placeholder if entity is not already set\n        if (!query.entity || !query.entity.value) {\n          query.entity = placeholderOption;\n          query.testId = '';\n          onChange(query);\n        }\n\n        // Set to placeholder if testType is not already set\n        if (!query.testType || !query.testType.value) {\n          query.testType = { label: PLEASE_SPECIFY, value: '' };\n          onChange(query);\n        }\n      }\n    } catch (error) {\n      console.error('Error fetching synthetic tests', error);\n    }\n\n    // Fetch metrics catalog\n    datasource.dataSourceSyntheticMonitoring\n      .getSyntheticMonitoringMetricsCatalog()\n      .then((SyntheticMonitoringMetrics: any) => {\n        if (!isUnmounting) {\n          this.props.updateMetrics(SyntheticMonitoringMetrics);\n        }\n      });\n  };\n\n  onTestChange = (test: SelectableValue) => {\n    const { query, onChange, onRunQuery } = this.props;\n\n    query.entity = test;\n\n    if (test.test) {\n      query.testId = test.test.testId;\n    } else {\n      query.testId = '';\n    }\n\n    onChange(query);\n    onRunQuery();\n  };\n\n  onTestTypeChange = async (testType: SelectableValue) => {\n    const { query, onChange, onRunQuery } = this.props;\n\n    const prevTestTypeValue = query.testType?.value;\n\n    // Update test type\n    query.testType = testType;\n\n    // If switching between 'metric' <-> 'results', then reset the test\n    const isSwitchingTypes =\n      (prevTestTypeValue === 'metric' && testType.value === 'results') ||\n      (prevTestTypeValue === 'results' && testType.value === 'metric');\n\n    if (isSwitchingTypes) {\n      query.entity = { label: PLEASE_SPECIFY, value: '' };\n      query.testId = '';\n    }\n\n    onChange(query);\n    onRunQuery();\n  };\n\n  onMetricChange = (metric: SelectableValue) => {\n    const { query, onChange, onRunQuery } = this.props;\n    query.metric = metric;\n    onChange(query);\n    onRunQuery();\n  };\n\n  render() {\n    const { query } = this.props;\n\n    return (\n      <div>\n        <div className=\"gf-form\">\n          <FormSelect\n            queryKeyword\n            inputWidth={0}\n            label={'Synthetic Test'}\n            tooltip={'Select your test'}\n            noOptionsMessage={'No synthetic tests found'}\n            value={query.entity}\n            options={this.state.tests}\n            onChange={this.onTestChange}\n          />\n          <FormSelect\n            queryKeyword\n            inputWidth={0}\n            label={'Type'}\n            tooltip={'Select your test type'}\n            noOptionsMessage={'No synthetic test type found'}\n            value={query.testType}\n            options={testTypeOptions}\n            onChange={this.onTestTypeChange}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n","import '../instana-grafana.css';\n\nimport {\n  ANALYZE_APPLICATION_METRICS,\n  ANALYZE_MOBILE_APP_METRICS,\n  ANALYZE_WEBSITE_METRICS,\n  APPLICATION_SERVICE_ENDPOINT_METRICS,\n  BUILT_IN_METRICS,\n  CUSTOM_METRICS,\n  INFRASTRUCTURE_ANALYZE,\n  SLO_INFORMATION,\n  SLO2_INFORMATION,\n  SYNTHETIC_MONITORING,\n} from '../GlobalVariables';\nimport { QueryEditorProps, SelectableValue } from '@grafana/data';\nimport React, { PureComponent } from 'react';\n\nimport AdvancedSettings from './AdvancedSettings/AdvancedSettings';\nimport AggregationFunctions from '../lists/aggregation_function';\nimport { ApplicationCallsMetrics } from './Analyze/ApplicationCallsMetrics';\nimport { ApplicationServiceEndpointMetrics } from './ApplicationServiceEndpointMetrics/ApplicationServiceEndpointMetrics';\nimport { Badge } from '@grafana/ui';\nimport { DataSource } from '../datasources/DataSource';\nimport { Explore } from './Infrastructure/Explore';\nimport { Filters } from './Analyze/Filter';\nimport FormSelect from './FormField/FormSelect';\nimport { Infrastructure } from './Infrastructure/Infrastructure';\nimport { InstanaOptions } from '../types/instana_options';\nimport { InstanaQuery } from '../types/instana_query';\nimport Metric from './Metric/Metric';\nimport { MetricFilter } from './Infrastructure/Custom/MetricFilter';\nimport { MobileAppMetrics } from './Analyze/MobileAppMetrics';\nimport { SloInformation } from './SLOInformation/SloInformation';\nimport { Slo2Information } from './SLOInformation/Slo2Information';\nimport { WebsiteMetrics } from './Analyze/WebsiteMetrics';\nimport { SyntheticMonitoring } from './SyntheticMonitoring/SyntheticMonitoring';\nimport _ from 'lodash';\nimport metricCategories from '../lists/metric_categories';\nimport migrate from '../migration';\nimport { readTime } from '../util/time_util';\n\ntype Props = QueryEditorProps<DataSource, InstanaQuery, InstanaOptions>;\n\ninterface QueryState {\n  groups: SelectableValue[];\n  queryTypes: SelectableValue[];\n  allMetrics: SelectableValue[];\n  availableMetrics: SelectableValue[];\n  selectedWindowSize: number;\n}\n\nexport class QueryEditor extends PureComponent<Props, QueryState> {\n  query: InstanaQuery;\n  snapshots: any;\n  allowInfraExplore: boolean;\n\n  constructor(props: Props) {\n    super(props);\n    const defaultQuery: Partial<InstanaQuery> = {\n      metricCategory: metricCategories[0],\n      timeShiftIsValid: true,\n      customFilters: [],\n    };\n\n    this.query = Object.assign(defaultQuery, props.query);\n\n    migrate(this.query);\n\n    this.state = {\n      groups: [],\n      allMetrics: [],\n      queryTypes: [],\n      availableMetrics: [],\n      selectedWindowSize: props.range ? readTime(props.range).windowSize : 21600000,\n    };\n\n    this.filterMetricsOnType = this.filterMetricsOnType.bind(this);\n    this.loadEntityTypes = this.loadEntityTypes.bind(this);\n    this.allowInfraExplore = props.datasource.options.allowInfraExplore;\n\n    props.onChange(this.query);\n  }\n\n  componentDidUpdate(prevProps: Readonly<Props>, prevState: Readonly<QueryState>, snapshot?: any) {\n    const { onChange, range, datasource } = this.props;\n    if (range && this.state.selectedWindowSize !== readTime(range).windowSize) {\n      this.setState({\n        ...this.state,\n        selectedWindowSize: readTime(range).windowSize,\n      });\n      datasource.setPossibleTimeIntervals(this.query);\n      if (!datasource.availableTimeIntervals.find((i) => i.key === this.query.timeInterval.key)) {\n        this.query.timeInterval = datasource.getDefaultTimeInterval(this.query);\n        onChange(this.query);\n        // no need to execute onRunQuery() here because the change of time frame triggers\n        // datasource.query() anyways and datasource will take care of correcting the timeInterval\n      }\n    }\n  }\n\n  onCategoryChange = (newCategory: SelectableValue) => {\n    if (this.query.metricCategory === newCategory) {\n      // nothing needs to be done\n    } else {\n      this.selectionReset();\n      this.query.metricCategory = newCategory;\n      this.query.timeInterval = this.props.datasource.getDefaultTimeInterval(this.query);\n\n      this.changeAndRun();\n    }\n  };\n\n  changeAndRun = () => {\n    this.props.onChange(this.query);\n    this.props.onRunQuery();\n  };\n\n  setMetricPlaceholder(nrOfTotalResults: number) {\n    if (this.query.metricCategory.key === CUSTOM_METRICS) {\n      this.query.metric = {\n        key: null,\n        label: 'Please select (' + nrOfTotalResults + '/' + this.state.allMetrics.length + ')',\n      };\n    } else {\n      this.query.metric = {\n        key: null,\n        label: 'Please select (' + nrOfTotalResults + ')',\n      };\n    }\n\n    this.props.onChange(this.query);\n  }\n\n  updateMetrics = (metrics: SelectableValue[]) => {\n    this.setState(\n      {\n        availableMetrics: _.sortBy(metrics, 'key'),\n        allMetrics: _.sortBy(metrics, 'key'),\n      },\n      () => {\n        if ((this.query.metric && this.query.metric.key) || this.query.showAllMetrics) {\n          const metric = _.find(metrics, (m) => m.key === this.query.metric.key);\n          metric ? (this.query.metric = metric) : (this.query.metric = { key: null });\n        }\n        if (this.query.metricCategory.key === CUSTOM_METRICS) {\n          this.onMetricsFilter(this.query.customFilters); // this contains setMetricPlaceholder\n        } else if (!this.query.metric || !this.query.metric.key) {\n          this.setMetricPlaceholder(metrics.length);\n        }\n        this.changeAndRun();\n      }\n    );\n  };\n\n  loadEntityTypes(filterResult = true) {\n    const { query, datasource, onRunQuery } = this.props;\n\n    if (query.entityQuery) {\n      datasource.fetchTypesForTarget(query).then((response: any) => {\n        this.snapshots = response.data;\n        this.filterForEntityType(true, filterResult);\n        onRunQuery();\n      });\n    } else {\n      this.setState({ queryTypes: [] });\n    }\n  }\n\n  filterForEntityType = (findMatchingEntityTypes = true, filterResults = true) => {\n    const { query, datasource, onChange } = this.props;\n    datasource.getEntityTypes().then((entityTypes: any) => {\n      let queryTypes = entityTypes;\n      if (filterResults && !query.useFreeTextMetrics) {\n        queryTypes = this.filterEntityTypes(entityTypes, findMatchingEntityTypes);\n      }\n\n      this.setState({ queryTypes: queryTypes });\n\n      if (!query.entityType || !query.entityType.key || !_.find(queryTypes, (m) => m.key === query.entityType.key)) {\n        query.entityType = { key: null, label: 'Please select (' + queryTypes.length + ')' };\n      }\n\n      onChange(query);\n    });\n  };\n\n  filterEntityTypes = (entityTypes: SelectableValue[], findMatchingEntityTypes: boolean) => {\n    if (findMatchingEntityTypes) {\n      return _.sortBy(\n        _.filter(entityTypes, (entityType) => this.findMatchingEntityTypes(entityType)),\n        'label'\n      );\n    }\n\n    return _.sortBy(entityTypes, 'label');\n  };\n\n  findMatchingEntityTypes = (entityType: SelectableValue) => {\n    const { query } = this.props;\n\n    if (query.metricCategory.key === BUILT_IN_METRICS || query.metricCategory.key === CUSTOM_METRICS) {\n      return this.snapshots.find((type: any) => type === entityType.key) && entityType.label != null;\n    }\n\n    return false;\n  };\n\n  updateQueryTypes = (types: SelectableValue[]) => {\n    this.setState({\n      queryTypes: types,\n    });\n  };\n\n  updateGroups = (groups: SelectableValue[]) => {\n    this.setState({\n      groups: groups,\n    });\n  };\n\n  onMetricsFilter = (customFilters: string[]) => {\n    let newAvailableMetrics: SelectableValue[] = [];\n    if (!customFilters || customFilters.length === 0) {\n      newAvailableMetrics = this.state.allMetrics;\n    } else {\n      newAvailableMetrics = this.applyFilterToMetricList(customFilters);\n    }\n    this.query.canShowAllMetrics = this.isAbleToShowAllMetrics(newAvailableMetrics);\n    if (!this.query.canShowAllMetrics) {\n      this.query.showAllMetrics = false;\n    }\n    this.query.customFilters = customFilters;\n    if (!this.query.metric || !this.query.metric.key) {\n      this.setMetricPlaceholder(newAvailableMetrics.length);\n    }\n\n    this.setState((state) => ({ ...state, availableMetrics: newAvailableMetrics }));\n\n    this.props.onChange(this.query);\n    this.checkMetricAndRefresh();\n  };\n\n  applyFilterToMetricList(filters: string[]) {\n    let filteredMetrics: any = this.state.allMetrics;\n    _.forEach(filters, (filter) => {\n      if (filter !== '') {\n        filteredMetrics = _.sortBy(\n          _.filter(filteredMetrics, (metric) => metric.key.toLowerCase().includes(filter.toLowerCase())),\n          'key'\n        );\n      }\n    });\n\n    return filteredMetrics;\n  }\n\n  filterMetricsOnType(type: string) {\n    let filteredMetrics: SelectableValue[] = this.state.allMetrics.filter((metric) => {\n      return metric.beaconTypes.includes(type);\n    });\n\n    this.setState({\n      availableMetrics: filteredMetrics,\n    });\n\n    if (!this.query.metric || !this.query.metric.key || !this.query.metric.beaconTypes.includes(type)) {\n      this.setMetricPlaceholder(filteredMetrics.length);\n    }\n\n    this.changeAndRun();\n  }\n\n  isAbleToShowAllMetrics(metrics: SelectableValue[]) {\n    return this.query.metricCategory.key === CUSTOM_METRICS && metrics.length > 0 && metrics.length <= 5;\n  }\n\n  checkMetricAndRefresh() {\n    if (\n      this.query.metric &&\n      this.query.metric.key &&\n      !_.includes(\n        _.map(this.state.availableMetrics, (m) => m.key),\n        this.query.metric.key\n      )\n    ) {\n      this.resetMetricSelection();\n    }\n\n    this.changeAndRun();\n  }\n\n  selectionReset() {\n    const { query } = this.props;\n    if (query.metricCategory.key > CUSTOM_METRICS) {\n      query.entityQuery = '';\n    }\n\n    this.setState({\n      availableMetrics: [],\n      allMetrics: [],\n      groups: [],\n    });\n\n    this.resetEntityTypeSelection();\n    this.resetEntitySelection();\n    this.resetMetricSelection();\n  }\n\n  resetEntityTypeSelection() {\n    const { query } = this.props;\n    query.entityType = {\n      key: null,\n      label: '-',\n    };\n    query.customFilters = [];\n  }\n\n  resetEntitySelection() {\n    const { query } = this.props;\n    query.entity = {};\n    query.group = {};\n    query.showGroupBySecondLevel = false;\n    query.groupbyTagSecondLevelKey = '';\n    query.aggregateGraphs = false;\n    query.aggregationFunction = AggregationFunctions[0];\n    query.hideOriginalGraphs = false;\n    query.filters = [];\n    query.showWarningCantShowAllResults = false;\n    query.showAllMetrics = false;\n    query.canShowAllMetrics = false;\n    query.displayMaxMetricValue = false;\n    query.applicationCallToEntity = '';\n    query.callToEntity = '';\n    query.tagFilterExpression = '';\n    this.resetServices();\n    this.resetEndpoints();\n    this.resetSLO();\n    this.resetSLO2();\n  }\n\n  resetMetricSelection() {\n    const { query } = this.props;\n    query.metric = {};\n    query.timeShift = '';\n    query.timeShiftIsValid = true;\n    query.showWarningCantShowAllResults = false;\n    query.showAllMetrics = false;\n    query.labelFormat = '';\n    query.freeTextMetrics = '';\n    query.useFreeTextMetrics = false;\n  }\n\n  resetServices() {\n    this.props.query.service = {};\n  }\n\n  resetEndpoints() {\n    this.props.query.endpoint = {};\n  }\n\n  resetSLO() {\n    const { query } = this.props;\n    query.sloValue = '';\n    query.sloReport = {};\n  }\n\n  resetSLO2() {\n    const { query } = this.props;\n    query.sloValue = '';\n    query.sloReport = {};\n  }\n\n  render() {\n    const { query, onCategoryChange } = this;\n    const categories = this.allowInfraExplore\n      ? metricCategories\n      : metricCategories.filter((category) => category.key !== INFRASTRUCTURE_ANALYZE);\n\n    return (\n      <div className={'gf-form-group'}>\n        <div className={'gf-form'}>\n          <FormSelect\n            queryKeyword\n            inputWidth={0}\n            label={'Category'}\n            tooltip={'Select a metric category.'}\n            value={query.metricCategory}\n            options={categories}\n            onChange={onCategoryChange}\n          />\n        </div>\n\n        {query.metricCategory.key === BUILT_IN_METRICS && (\n          <Infrastructure\n            query={query}\n            queryTypes={this.state.queryTypes}\n            datasource={this.props.datasource}\n            onRunQuery={this.props.onRunQuery}\n            onChange={this.props.onChange}\n            updateMetrics={this.updateMetrics}\n            loadEntityTypes={this.loadEntityTypes}\n            updateQueryTypes={this.updateQueryTypes}\n          />\n        )}\n\n        {query.metricCategory.key === CUSTOM_METRICS && (\n          <Infrastructure\n            query={query}\n            queryTypes={this.state.queryTypes}\n            datasource={this.props.datasource}\n            onRunQuery={this.props.onRunQuery}\n            onChange={this.props.onChange}\n            updateMetrics={this.updateMetrics}\n            loadEntityTypes={this.loadEntityTypes}\n            updateQueryTypes={this.updateQueryTypes}\n          />\n        )}\n\n        {query.metricCategory.key === INFRASTRUCTURE_ANALYZE && (\n          <Explore\n            query={query}\n            onRunQuery={this.props.onRunQuery}\n            onChange={this.props.onChange}\n            updateMetrics={this.updateMetrics}\n            groups={this.state.groups}\n            updateGroups={this.updateGroups}\n            datasource={this.props.datasource}\n          />\n        )}\n\n        {query.metricCategory.key === ANALYZE_APPLICATION_METRICS && (\n          <ApplicationCallsMetrics\n            query={query}\n            onRunQuery={this.props.onRunQuery}\n            onChange={this.props.onChange}\n            updateMetrics={this.updateMetrics}\n            groups={this.state.groups}\n            updateGroups={this.updateGroups}\n            datasource={this.props.datasource}\n          />\n        )}\n\n        {query.metricCategory.key === ANALYZE_WEBSITE_METRICS && (\n          <WebsiteMetrics\n            query={query}\n            onRunQuery={this.props.onRunQuery}\n            onChange={this.props.onChange}\n            updateMetrics={this.updateMetrics}\n            groups={this.state.groups}\n            updateGroups={this.updateGroups}\n            filterMetricsOnType={this.filterMetricsOnType}\n            datasource={this.props.datasource}\n          />\n        )}\n\n        {query.metricCategory.key === ANALYZE_MOBILE_APP_METRICS && (\n          <MobileAppMetrics\n            query={query}\n            onRunQuery={this.props.onRunQuery}\n            onChange={this.props.onChange}\n            updateMetrics={this.updateMetrics}\n            groups={this.state.groups}\n            updateGroups={this.updateGroups}\n            filterMetricsOnType={this.filterMetricsOnType}\n            datasource={this.props.datasource}\n          />\n        )}\n\n        {query.metricCategory.key === APPLICATION_SERVICE_ENDPOINT_METRICS && (\n          <ApplicationServiceEndpointMetrics\n            query={query}\n            onRunQuery={this.props.onRunQuery}\n            onChange={this.props.onChange}\n            updateMetrics={this.updateMetrics}\n            datasource={this.props.datasource}\n          />\n        )}\n\n        {query.metricCategory.key === SLO_INFORMATION && (\n          <SloInformation\n            query={query}\n            onRunQuery={this.props.onRunQuery}\n            onChange={this.props.onChange}\n            datasource={this.props.datasource}\n          />\n        )}\n\n        {query.metricCategory.key === SLO2_INFORMATION && (\n          <Slo2Information\n            query={query}\n            onRunQuery={this.props.onRunQuery}\n            onChange={this.props.onChange}\n            datasource={this.props.datasource}\n          />\n        )}\n\n        {query.metricCategory.key === SYNTHETIC_MONITORING && (\n          <SyntheticMonitoring\n            query={query}\n            onRunQuery={this.props.onRunQuery}\n            onChange={this.props.onChange}\n            updateMetrics={this.updateMetrics}\n            // groups={this.state.groups}\n            // updateGroups={this.updateGroups}\n            // filterMetricsOnType={this.filterMetricsOnType}\n            datasource={this.props.datasource}\n          />\n        )}\n\n        {query.metricCategory.key !== SLO_INFORMATION && query.metricCategory.key !== SLO2_INFORMATION && (\n          <Metric\n            query={query}\n            onChange={this.props.onChange}\n            onRunQuery={this.props.onRunQuery}\n            updateMetrics={this.updateMetrics}\n            availableMetrics={this.state.availableMetrics}\n            datasource={this.props.datasource}\n          />\n        )}\n\n        {query.metricCategory.key === CUSTOM_METRICS && (\n          <MetricFilter\n            query={query}\n            onChange={this.props.onChange}\n            onRunQuery={this.props.onRunQuery}\n            onFilterChange={this.onMetricsFilter}\n            availableMetrics={this.state.availableMetrics}\n            datasource={this.props.datasource}\n          />\n        )}\n\n        {(query.metricCategory.key === ANALYZE_APPLICATION_METRICS ||\n          query.metricCategory.key === ANALYZE_WEBSITE_METRICS ||\n          query.metricCategory.key === ANALYZE_MOBILE_APP_METRICS ||\n          query.metricCategory.key === INFRASTRUCTURE_ANALYZE) && (\n          <Filters\n            query={query}\n            onChange={this.props.onChange}\n            onRunQuery={this.props.onRunQuery}\n            datasource={this.props.datasource}\n            groups={this.state.groups}\n          />\n        )}\n\n        <AdvancedSettings\n          query={query}\n          onRunQuery={this.props.onRunQuery}\n          onChange={this.props.onChange}\n          loadEntityTypes={this.loadEntityTypes}\n        />\n\n        <Badge text={'5.0.0'} color={'blue'} />\n      </div>\n    );\n  }\n}\n","import { InstanaOptions, SecureJsonData } from './types/instana_options';\nimport { DataSourcePlugin } from '@grafana/data';\nimport { DataSource } from './datasources/DataSource';\nimport { ConfigEditor } from './components/ConfigEditor';\nimport { QueryEditor } from './components/QueryEditor';\nimport { InstanaQuery } from './types/instana_query';\n\nexport const plugin = new DataSourcePlugin<DataSource, InstanaQuery, InstanaOptions, SecureJsonData>(DataSource)\n  .setConfigEditor(ConfigEditor)\n  .setQueryEditor(QueryEditor);\n"],"sourceRoot":""}